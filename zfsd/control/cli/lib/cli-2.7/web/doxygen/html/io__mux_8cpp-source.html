<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>CLI: io_mux.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-20981143-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="classes.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_7ca5e860cc97c111944d6d090aaeaed5.html">cpp</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_909ff1c5a0fe7ebd415c9e08d3a715b8.html">src</a></div>
<h1>io_mux.cpp</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment">    Copyright (c) 2006-2011, Alexis Royer, http://alexis.royer.free.fr/CLI</span>
<a name="l00003"></a>00003 <span class="comment"></span>
<a name="l00004"></a>00004 <span class="comment">    All rights reserved.</span>
<a name="l00005"></a>00005 <span class="comment"></span>
<a name="l00006"></a>00006 <span class="comment">    Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00007"></a>00007 <span class="comment"></span>
<a name="l00008"></a>00008 <span class="comment">        * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00009"></a>00009 <span class="comment">        * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00010"></a>00010 <span class="comment">        * Neither the name of the CLI library project nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00011"></a>00011 <span class="comment"></span>
<a name="l00012"></a>00012 <span class="comment">    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span>
<a name="l00013"></a>00013 <span class="comment">    "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span>
<a name="l00014"></a>00014 <span class="comment">    LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span>
<a name="l00015"></a>00015 <span class="comment">    A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR</span>
<a name="l00016"></a>00016 <span class="comment">    CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,</span>
<a name="l00017"></a>00017 <span class="comment">    EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,</span>
<a name="l00018"></a>00018 <span class="comment">    PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR</span>
<a name="l00019"></a>00019 <span class="comment">    PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF</span>
<a name="l00020"></a>00020 <span class="comment">    LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING</span>
<a name="l00021"></a>00021 <span class="comment">    NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS</span>
<a name="l00022"></a>00022 <span class="comment">    SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00023"></a>00023 <span class="comment">*/</span>
<a name="l00024"></a>00024 
<a name="l00025"></a>00025 
<a name="l00026"></a>00026 <span class="preprocessor">#include "<a class="code" href="pch_8h.html">cli/pch.h</a>"</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;string.h&gt;</span> <span class="comment">// memset</span>
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 <span class="preprocessor">#include "<a class="code" href="io__mux_8h.html">cli/io_mux.h</a>"</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include "<a class="code" href="shell_8h.html">cli/shell.h</a>"</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include "<a class="code" href="assert_8h.html">cli/assert.h</a>"</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include "<a class="code" href="consistency_8h.html">consistency.h</a>"</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include "<a class="code" href="constraints_8h.html">constraints.h</a>"</span>
<a name="l00035"></a>00035 
<a name="l00036"></a>00036 <a class="code" href="namespace_8h.html#965caf70ca576c007bee150001248651">CLI_NS_USE</a>(cli)
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 
<a name="l00040"></a>00040 <span class="preprocessor">#define TRACE_IOMUX GetIOMuxTraceClass()</span>
<a name="l00042"></a>00042 <span class="preprocessor">static const TraceClass&amp; GetIOMuxTraceClass(void)</span>
<a name="l00043"></a>00043 <span class="preprocessor"></span>{
<a name="l00044"></a>00044     <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classTraceClass.html">TraceClass</a> cli_IOMuxTraceClass(<span class="stringliteral">"CLI_IOMUX"</span>, <a class="code" href="classHelp.html">Help</a>()
<a name="l00045"></a>00045         .AddHelp(<a class="code" href="classResourceString.html#88d585d899c8482aeb434571923739b3f12fbeaebaa487c3970ecc2cf837e0df">Help::LANG_EN</a>, <span class="stringliteral">"Input/output multiplexer traces"</span>)
<a name="l00046"></a>00046         .AddHelp(<a class="code" href="classResourceString.html#88d585d899c8482aeb434571923739b3142a22fb5f61fe5c723693b4cc887f4f">Help::LANG_FR</a>, <span class="stringliteral">"Traces de multiplexage d'entrées/sorties"</span>));
<a name="l00047"></a>00047     <span class="keywordflow">return</span> cli_IOMuxTraceClass;
<a name="l00048"></a>00048 }
<a name="l00049"></a>00049 
<a name="l00050"></a>00050 
<a name="l00051"></a>00051 IOMux::IOMux(<span class="keyword">const</span> <span class="keywordtype">bool</span> B_AutoDelete)
<a name="l00052"></a>00052   : <a class="code" href="classIODevice.html">IODevice</a>(<span class="stringliteral">"mux"</span>, B_AutoDelete),
<a name="l00053"></a>00053     m_qDevices(MAX_IO_MUX_INPUTS)
<a name="l00054"></a>00054 {
<a name="l00055"></a>00055     <a class="code" href="consistency_8h.html#cd519988d0498954c9a9507773b172b7">EnsureCommonDevices</a>();
<a name="l00056"></a>00056     <a class="code" href="consistency_8h.html#ed1a89fb454edbbeb912461221e72014">EnsureTraces</a>();
<a name="l00057"></a>00057 
<a name="l00058"></a>00058     <a class="code" href="traces_8h.html#757ce8f9014dd17ed7349efcdd702af9">GetTraces</a>().<a class="code" href="classTraces.html#69bc0bc6fcd2a39cb61304e6b92506c2">Trace</a>(TRACE_IOMUX) &lt;&lt; <span class="stringliteral">"New "</span> &lt;&lt; <a class="code" href="classOutputDevice.html#6c668b07b5d90122008c934dece4409b">GetDebugName</a>() &lt;&lt; <a class="code" href="io__device_8h.html#d6d7d55b8cc249130097ce4007a1162a">endl</a>;
<a name="l00059"></a>00059 }
<a name="l00060"></a>00060 
<a name="l00061"></a>00061 <a class="code" href="classIOMux.html#d7f7603392d08bcb3e84aa7c5580a3f0">IOMux::~IOMux</a>(<span class="keywordtype">void</span>)
<a name="l00062"></a>00062 {
<a name="l00063"></a>00063     <a class="code" href="traces_8h.html#757ce8f9014dd17ed7349efcdd702af9">GetTraces</a>().<a class="code" href="classTraces.html#69bc0bc6fcd2a39cb61304e6b92506c2">Trace</a>(TRACE_IOMUX) &lt;&lt; <span class="stringliteral">"Deleting "</span> &lt;&lt; <a class="code" href="classOutputDevice.html#6c668b07b5d90122008c934dece4409b">GetDebugName</a>() &lt;&lt; <a class="code" href="io__device_8h.html#d6d7d55b8cc249130097ce4007a1162a">endl</a>;
<a name="l00064"></a>00064 
<a name="l00065"></a>00065     <a class="code" href="classIOMux.html#047e72e25dae082fa1f941d81a55e442">ResetDeviceList</a>();
<a name="l00066"></a>00066 }
<a name="l00067"></a>00067 
<a name="l00068"></a>00068 <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="classIOMux.html#c0e2d63d88cec44fde40f3fa51d48861">IOMux::OpenDevice</a>(<span class="keywordtype">void</span>)
<a name="l00069"></a>00069 {
<a name="l00070"></a>00070     <a class="code" href="traces_8h.html#757ce8f9014dd17ed7349efcdd702af9">GetTraces</a>().<a class="code" href="classTraces.html#99fe59fe9cb9e5183b245623c2a240a8">SafeTrace</a>(TRACE_IOMUX, *<span class="keyword">this</span>) &lt;&lt; <span class="stringliteral">"Opening "</span> &lt;&lt; <a class="code" href="classOutputDevice.html#6c668b07b5d90122008c934dece4409b">GetDebugName</a>() &lt;&lt; <a class="code" href="io__device_8h.html#d6d7d55b8cc249130097ce4007a1162a">endl</a>;
<a name="l00071"></a>00071 
<a name="l00072"></a>00072     <span class="keywordtype">bool</span> b_Res = <span class="keyword">true</span>;
<a name="l00073"></a>00073 
<a name="l00074"></a>00074     <span class="keywordflow">if</span> (<a class="code" href="classIODevice.html">IODevice</a>* <span class="keyword">const</span> pcli_Input = CheckCurrentDevice())
<a name="l00075"></a>00075     {
<a name="l00076"></a>00076         <a class="code" href="traces_8h.html#757ce8f9014dd17ed7349efcdd702af9">GetTraces</a>().<a class="code" href="classTraces.html#99fe59fe9cb9e5183b245623c2a240a8">SafeTrace</a>(TRACE_IOMUX, *<span class="keyword">this</span>) &lt;&lt; <a class="code" href="classOutputDevice.html#6c668b07b5d90122008c934dece4409b">GetDebugName</a>() &lt;&lt; <span class="stringliteral">": opening input "</span> &lt;&lt; pcli_Input-&gt;GetDebugName() &lt;&lt; <a class="code" href="io__device_8h.html#d6d7d55b8cc249130097ce4007a1162a">endl</a>;
<a name="l00077"></a>00077         <span class="keywordflow">if</span> (! pcli_Input-&gt;OpenUp(<a class="code" href="debug_8h.html#12506d620d4ecd0161866c9b19d761ed">__CALL_INFO__</a>))
<a name="l00078"></a>00078         {
<a name="l00079"></a>00079             <a class="code" href="classOutputDevice.html#c831dff60351f1a3dffd667e175e8f23">m_cliLastError</a> = pcli_Input-&gt;GetLastError();
<a name="l00080"></a>00080             b_Res = <span class="keyword">false</span>;
<a name="l00081"></a>00081         }
<a name="l00082"></a>00082     }
<a name="l00083"></a>00083     <span class="keywordflow">else</span>
<a name="l00084"></a>00084     {
<a name="l00085"></a>00085         <span class="comment">// Note: m_cliLastError has been set within CheckCurrentDevice()</span>
<a name="l00086"></a>00086         b_Res = <span class="keyword">false</span>;
<a name="l00087"></a>00087     }
<a name="l00088"></a>00088 
<a name="l00089"></a>00089     <span class="keywordflow">if</span> (! b_Res)
<a name="l00090"></a>00090     {
<a name="l00091"></a>00091         <a class="code" href="classIOMux.html#e10b2a0f2bf8bb49c21ee03f24c4ce9f">CloseDevice</a>();
<a name="l00092"></a>00092     }
<a name="l00093"></a>00093     <span class="keywordflow">return</span> b_Res;
<a name="l00094"></a>00094 }
<a name="l00095"></a>00095 
<a name="l00096"></a>00096 <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="classIOMux.html#e10b2a0f2bf8bb49c21ee03f24c4ce9f">IOMux::CloseDevice</a>(<span class="keywordtype">void</span>)
<a name="l00097"></a>00097 {
<a name="l00098"></a>00098     <a class="code" href="traces_8h.html#757ce8f9014dd17ed7349efcdd702af9">GetTraces</a>().<a class="code" href="classTraces.html#99fe59fe9cb9e5183b245623c2a240a8">SafeTrace</a>(TRACE_IOMUX, *<span class="keyword">this</span>) &lt;&lt; <span class="stringliteral">"Closing "</span> &lt;&lt; <a class="code" href="classOutputDevice.html#6c668b07b5d90122008c934dece4409b">GetDebugName</a>() &lt;&lt; <a class="code" href="io__device_8h.html#d6d7d55b8cc249130097ce4007a1162a">endl</a>;
<a name="l00099"></a>00099 
<a name="l00100"></a>00100     <span class="keywordtype">bool</span> b_Res = <span class="keyword">true</span>;
<a name="l00101"></a>00101 
<a name="l00102"></a>00102     <span class="keywordflow">while</span> (! m_qDevices.IsEmpty())
<a name="l00103"></a>00103     {
<a name="l00104"></a>00104         <span class="keywordflow">if</span> (! ReleaseFirstDevice())
<a name="l00105"></a>00105         {
<a name="l00106"></a>00106             <span class="comment">// Note: m_cliLastError has been set within ReleaseFirstDevice()</span>
<a name="l00107"></a>00107             b_Res = <span class="keyword">false</span>;
<a name="l00108"></a>00108         }
<a name="l00109"></a>00109     }
<a name="l00110"></a>00110 
<a name="l00111"></a>00111     <span class="keywordflow">return</span> b_Res;
<a name="l00112"></a>00112 }
<a name="l00113"></a>00113 
<a name="l00114"></a>00114 <span class="keywordtype">void</span> <a class="code" href="classIOMux.html#9555807b66281a1256b7c9b2a5dea9ee">IOMux::PutString</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> STR_Out)<span class="keyword"> const</span>
<a name="l00115"></a>00115 <span class="keyword"></span>{
<a name="l00116"></a>00116     <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classOutputDevice.html">OutputDevice</a>* <span class="keyword">const</span> pcli_Output = <a class="code" href="classIOMux.html#20ec792655bba3f587edb5c7a1ed3823">GetCurrentDevice</a>())
<a name="l00117"></a>00117     {
<a name="l00118"></a>00118         <span class="keywordflow">if</span> (! pcli_Output-&gt;WouldOutput(*<span class="keyword">this</span>)) <span class="comment">// Avoid infinite loops.</span>
<a name="l00119"></a>00119         {
<a name="l00120"></a>00120             pcli_Output-&gt;PutString(STR_Out);
<a name="l00121"></a>00121         }
<a name="l00122"></a>00122     }
<a name="l00123"></a>00123 }
<a name="l00124"></a>00124 
<a name="l00125"></a>00125 <span class="keywordtype">void</span> <a class="code" href="classIOMux.html#ddf508a6b22a055f559928e78d4df27b">IOMux::Beep</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span>
<a name="l00126"></a>00126 <span class="keyword"></span>{
<a name="l00127"></a>00127     <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classOutputDevice.html">OutputDevice</a>* <span class="keyword">const</span> pcli_Output = <a class="code" href="classIOMux.html#20ec792655bba3f587edb5c7a1ed3823">GetCurrentDevice</a>())
<a name="l00128"></a>00128     {
<a name="l00129"></a>00129         <span class="keywordflow">if</span> (! pcli_Output-&gt;WouldOutput(*<span class="keyword">this</span>)) <span class="comment">// Avoid infinite loops.</span>
<a name="l00130"></a>00130         {
<a name="l00131"></a>00131             pcli_Output-&gt;Beep();
<a name="l00132"></a>00132         }
<a name="l00133"></a>00133     }
<a name="l00134"></a>00134 }
<a name="l00135"></a>00135 
<a name="l00136"></a>00136 <span class="keywordtype">void</span> <a class="code" href="classIOMux.html#2a24a27d3e4551963d41fd541b1204ef">IOMux::CleanScreen</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span>
<a name="l00137"></a>00137 <span class="keyword"></span>{
<a name="l00138"></a>00138     <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classOutputDevice.html">OutputDevice</a>* <span class="keyword">const</span> pcli_Output = <a class="code" href="classIOMux.html#20ec792655bba3f587edb5c7a1ed3823">GetCurrentDevice</a>())
<a name="l00139"></a>00139     {
<a name="l00140"></a>00140         <span class="keywordflow">if</span> (! pcli_Output-&gt;WouldOutput(*<span class="keyword">this</span>)) <span class="comment">// Avoid infinite loops.</span>
<a name="l00141"></a>00141         {
<a name="l00142"></a>00142             pcli_Output-&gt;CleanScreen();
<a name="l00143"></a>00143         }
<a name="l00144"></a>00144     }
<a name="l00145"></a>00145 }
<a name="l00146"></a>00146 
<a name="l00147"></a>00147 <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="classIOMux.html#280b26d991561610c88903dacafdff22">IOMux::WouldOutput</a>(<span class="keyword">const</span> <a class="code" href="classOutputDevice.html">OutputDevice</a>&amp; CLI_Device)<span class="keyword"> const</span>
<a name="l00148"></a>00148 <span class="keyword"></span>{
<a name="l00149"></a>00149     <span class="comment">// Check self instance first.</span>
<a name="l00150"></a>00150     <span class="keywordflow">if</span> (<a class="code" href="classOutputDevice.html#3be4874ce99500243bfaeada5091f3f4">IODevice::WouldOutput</a>(CLI_Device))
<a name="l00151"></a>00151     {
<a name="l00152"></a>00152         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00153"></a>00153     }
<a name="l00154"></a>00154 
<a name="l00155"></a>00155     <span class="comment">// Then check output stream.</span>
<a name="l00156"></a>00156     <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classOutputDevice.html">OutputDevice</a>* <span class="keyword">const</span> pcli_Output = <a class="code" href="classIOMux.html#20ec792655bba3f587edb5c7a1ed3823">GetCurrentDevice</a>())
<a name="l00157"></a>00157     {
<a name="l00158"></a>00158         <span class="keywordflow">if</span> (pcli_Output-&gt;WouldOutput(CLI_Device))
<a name="l00159"></a>00159         {
<a name="l00160"></a>00160             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00161"></a>00161         }
<a name="l00162"></a>00162     }
<a name="l00163"></a>00163 
<a name="l00164"></a>00164     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00165"></a>00165 }
<a name="l00166"></a>00166 
<a name="l00167"></a>00167 <span class="keyword">const</span> <a class="code" href="io__device_8h.html#90d295cf6b6bc9873c186cc8851147f8">KEY</a> <a class="code" href="classIOMux.html#6b693f1730f7ed42c2e80df07392fc52">IOMux::GetKey</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span>
<a name="l00168"></a>00168 <span class="keyword"></span>{
<a name="l00169"></a>00169     <span class="keywordflow">for</span> (   <span class="keyword">const</span> <a class="code" href="classIODevice.html">IODevice</a>* pcli_Input = CheckCurrentDevice();
<a name="l00170"></a>00170             pcli_Input != NULL;
<a name="l00171"></a>00171             pcli_Input = const_cast&lt;IOMux*&gt;(<span class="keyword">this</span>)-&gt;<a class="code" href="classIOMux.html#2bbe6ad4589f97b3108e630e4f7bc8cc">SwitchNextDevice</a>())
<a name="l00172"></a>00172     {
<a name="l00173"></a>00173         <a class="code" href="io__device_8h.html#90d295cf6b6bc9873c186cc8851147f8">KEY</a> e_Key = <a class="code" href="io__device_8h.html#87c1c1677bb8199c62a3de0ebc270471e42682039e1a584113718465a202d0c0">NULL_KEY</a>;
<a name="l00174"></a>00174         <span class="keywordflow">if</span> (! pcli_Input-&gt;WouldInput(*<span class="keyword">this</span>)) <span class="comment">// Protection against infinite loop.</span>
<a name="l00175"></a>00175         {
<a name="l00176"></a>00176             e_Key = pcli_Input-&gt;GetKey();
<a name="l00177"></a>00177         }
<a name="l00178"></a>00178 
<a name="l00179"></a>00179         <span class="keywordflow">if</span> (e_Key != <a class="code" href="io__device_8h.html#87c1c1677bb8199c62a3de0ebc270471e42682039e1a584113718465a202d0c0">NULL_KEY</a>)
<a name="l00180"></a>00180         {
<a name="l00181"></a>00181             <span class="keywordflow">return</span> e_Key;
<a name="l00182"></a>00182         }
<a name="l00183"></a>00183     }
<a name="l00184"></a>00184 
<a name="l00185"></a>00185     <span class="keywordflow">if</span> (<a class="code" href="classOutputDevice.html#c831dff60351f1a3dffd667e175e8f23">m_cliLastError</a>.<a class="code" href="classResourceString.html#97af672605cd7e6af835db384771a834">IsEmpty</a>())
<a name="l00186"></a>00186     {
<a name="l00187"></a>00187         <a class="code" href="classOutputDevice.html#c831dff60351f1a3dffd667e175e8f23">m_cliLastError</a>
<a name="l00188"></a>00188             .SetString(<a class="code" href="classResourceString.html#88d585d899c8482aeb434571923739b3f12fbeaebaa487c3970ecc2cf837e0df">ResourceString::LANG_EN</a>, <span class="stringliteral">"IOMux: No valid input device"</span>)
<a name="l00189"></a>00189             .<a class="code" href="classResourceString.html#7a475c727ce2d3b13a4ce609032a0a8a">SetString</a>(<a class="code" href="classResourceString.html#88d585d899c8482aeb434571923739b3142a22fb5f61fe5c723693b4cc887f4f">ResourceString::LANG_FR</a>, <span class="stringliteral">"IOMux: Entrée de caractère invalide"</span>);
<a name="l00190"></a>00190     }
<a name="l00191"></a>00191     <span class="keywordflow">return</span> <a class="code" href="io__device_8h.html#87c1c1677bb8199c62a3de0ebc270471e42682039e1a584113718465a202d0c0">cli::NULL_KEY</a>;
<a name="l00192"></a>00192 }
<a name="l00193"></a>00193 
<a name="l00194"></a>00194 <span class="keyword">const</span> <a class="code" href="classResourceString.html">ResourceString</a> <a class="code" href="classIOMux.html#50740639e983eae6a98ff3e2b7cfa9d8">IOMux::GetLocation</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span>
<a name="l00195"></a>00195 <span class="keyword"></span>{
<a name="l00196"></a>00196     <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classIODevice.html">IODevice</a>* <span class="keyword">const</span> pcli_Input = <a class="code" href="classIOMux.html#20ec792655bba3f587edb5c7a1ed3823">GetCurrentDevice</a>())
<a name="l00197"></a>00197     {
<a name="l00198"></a>00198         <span class="keywordflow">if</span> (! pcli_Input-&gt;WouldInput(*<span class="keyword">this</span>)) <span class="comment">// Avoid infinite loops.</span>
<a name="l00199"></a>00199         {
<a name="l00200"></a>00200             <span class="keywordflow">return</span> pcli_Input-&gt;GetLocation();
<a name="l00201"></a>00201         }
<a name="l00202"></a>00202     }
<a name="l00203"></a>00203 
<a name="l00204"></a>00204     <span class="keywordflow">return</span> <a class="code" href="classResourceString.html">ResourceString</a>();
<a name="l00205"></a>00205 }
<a name="l00206"></a>00206 
<a name="l00207"></a>00207 <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="classIOMux.html#4899e1cb875ca0e4b9d151b902e1ded6">IOMux::WouldInput</a>(<span class="keyword">const</span> <a class="code" href="classIODevice.html">IODevice</a>&amp; CLI_Device)<span class="keyword"> const</span>
<a name="l00208"></a>00208 <span class="keyword"></span>{
<a name="l00209"></a>00209     <span class="comment">// Check self instance first.</span>
<a name="l00210"></a>00210     <span class="keywordflow">if</span> (<a class="code" href="classIODevice.html#d03f2900ba78cac1f7e7ba53633ec607">IODevice::WouldInput</a>(CLI_Device))
<a name="l00211"></a>00211     {
<a name="l00212"></a>00212         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00213"></a>00213     }
<a name="l00214"></a>00214 
<a name="l00215"></a>00215     <span class="comment">// Then check current input stream.</span>
<a name="l00216"></a>00216     <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classIODevice.html">IODevice</a>* <span class="keyword">const</span> pcli_Input = <a class="code" href="classIOMux.html#20ec792655bba3f587edb5c7a1ed3823">GetCurrentDevice</a>())
<a name="l00217"></a>00217     {
<a name="l00218"></a>00218         <span class="keywordflow">if</span> (pcli_Input-&gt;WouldInput(CLI_Device))
<a name="l00219"></a>00219         {
<a name="l00220"></a>00220             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00221"></a>00221         }
<a name="l00222"></a>00222     }
<a name="l00223"></a>00223     <span class="comment">// Other input streams do not need to be checked yet.:</span>
<a name="l00224"></a>00224     <span class="comment">// only GetKey() does switch to next input device automatically, and GetKey() does check WouldInput() before calling GetKey() on the next device.</span>
<a name="l00225"></a>00225 
<a name="l00226"></a>00226     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00227"></a>00227 }
<a name="l00228"></a>00228 
<a name="l00229"></a>00229 <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="classIOMux.html#f1fbe3d6f74ef7028c525a4073310740">IOMux::AddDevice</a>(<a class="code" href="classIODevice.html">IODevice</a>* <span class="keyword">const</span> PCLI_Device)
<a name="l00230"></a>00230 {
<a name="l00231"></a>00231     <span class="keywordflow">if</span> (PCLI_Device != NULL)
<a name="l00232"></a>00232     {
<a name="l00233"></a>00233         <a class="code" href="traces_8h.html#757ce8f9014dd17ed7349efcdd702af9">GetTraces</a>().<a class="code" href="classTraces.html#99fe59fe9cb9e5183b245623c2a240a8">SafeTrace</a>(TRACE_IOMUX, *<span class="keyword">this</span>) &lt;&lt; <a class="code" href="classOutputDevice.html#6c668b07b5d90122008c934dece4409b">GetDebugName</a>() &lt;&lt; <span class="stringliteral">": adding "</span> &lt;&lt; PCLI_Device-&gt;<a class="code" href="classOutputDevice.html#6c668b07b5d90122008c934dece4409b">GetDebugName</a>() &lt;&lt; <a class="code" href="io__device_8h.html#d6d7d55b8cc249130097ce4007a1162a">endl</a>;
<a name="l00234"></a>00234 
<a name="l00235"></a>00235         <span class="keywordflow">if</span> (m_qDevices.AddTail(PCLI_Device))
<a name="l00236"></a>00236         {
<a name="l00237"></a>00237             PCLI_Device-&gt;<a class="code" href="classOutputDevice.html#5cf7d389260e7c6a349efb9c2f5da262">UseInstance</a>(<a class="code" href="debug_8h.html#12506d620d4ecd0161866c9b19d761ed">__CALL_INFO__</a>);
<a name="l00238"></a>00238             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00239"></a>00239         }
<a name="l00240"></a>00240         <span class="keywordflow">else</span>
<a name="l00241"></a>00241         {
<a name="l00242"></a>00242             <a class="code" href="classOutputDevice.html#c831dff60351f1a3dffd667e175e8f23">m_cliLastError</a>
<a name="l00243"></a>00243                 .<a class="code" href="classResourceString.html#7a475c727ce2d3b13a4ce609032a0a8a">SetString</a>(<a class="code" href="classResourceString.html#88d585d899c8482aeb434571923739b3f12fbeaebaa487c3970ecc2cf837e0df">ResourceString::LANG_EN</a>, <span class="stringliteral">"IOMux: Cannot add device to the device list"</span>)
<a name="l00244"></a>00244                 .<a class="code" href="classResourceString.html#7a475c727ce2d3b13a4ce609032a0a8a">SetString</a>(<a class="code" href="classResourceString.html#88d585d899c8482aeb434571923739b3142a22fb5f61fe5c723693b4cc887f4f">ResourceString::LANG_FR</a>, <span class="stringliteral">"IOMux: Impossible d'ajouter un périphérique d'entrée / sortie à la liste"</span>);
<a name="l00245"></a>00245         }
<a name="l00246"></a>00246     }
<a name="l00247"></a>00247     <span class="keywordflow">else</span>
<a name="l00248"></a>00248     {
<a name="l00249"></a>00249         <a class="code" href="classOutputDevice.html#c831dff60351f1a3dffd667e175e8f23">m_cliLastError</a>
<a name="l00250"></a>00250             .<a class="code" href="classResourceString.html#7a475c727ce2d3b13a4ce609032a0a8a">SetString</a>(<a class="code" href="classResourceString.html#88d585d899c8482aeb434571923739b3f12fbeaebaa487c3970ecc2cf837e0df">ResourceString::LANG_EN</a>, <span class="stringliteral">"IOMux: Cannot add a NULL input device"</span>)
<a name="l00251"></a>00251             .<a class="code" href="classResourceString.html#7a475c727ce2d3b13a4ce609032a0a8a">SetString</a>(<a class="code" href="classResourceString.html#88d585d899c8482aeb434571923739b3142a22fb5f61fe5c723693b4cc887f4f">ResourceString::LANG_FR</a>, <span class="stringliteral">"IOMux: Impossible d'ajouter un périphérique d'entrée / sortie invalide"</span>);
<a name="l00252"></a>00252     }
<a name="l00253"></a>00253 
<a name="l00254"></a>00254     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00255"></a>00255 }
<a name="l00256"></a>00256 
<a name="l00257"></a>00257 <span class="keyword">const</span> <a class="code" href="classIODevice.html">IODevice</a>* <span class="keyword">const</span> <a class="code" href="classIOMux.html#20ec792655bba3f587edb5c7a1ed3823">IOMux::GetCurrentDevice</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span>
<a name="l00258"></a>00258 <span class="keyword"></span>{
<a name="l00259"></a>00259     <span class="keywordflow">if</span> (! m_qDevices.IsEmpty())
<a name="l00260"></a>00260     {
<a name="l00261"></a>00261         <span class="keywordflow">return</span> m_qDevices.GetHead();
<a name="l00262"></a>00262     }
<a name="l00263"></a>00263 
<a name="l00264"></a>00264     <span class="keywordflow">return</span> NULL;
<a name="l00265"></a>00265 }
<a name="l00266"></a>00266 
<a name="l00267"></a>00267 <span class="keyword">const</span> <a class="code" href="classIODevice.html">IODevice</a>* <span class="keyword">const</span> <a class="code" href="classIOMux.html#2bbe6ad4589f97b3108e630e4f7bc8cc">IOMux::SwitchNextDevice</a>(<span class="keywordtype">void</span>)
<a name="l00268"></a>00268 {
<a name="l00269"></a>00269     <span class="comment">// Terminate head device.</span>
<a name="l00270"></a>00270     <span class="keywordflow">if</span> (! m_qDevices.IsEmpty())
<a name="l00271"></a>00271     {
<a name="l00272"></a>00272         <span class="keywordflow">if</span> (! ReleaseFirstDevice())
<a name="l00273"></a>00273         {
<a name="l00274"></a>00274             <span class="comment">// Note: m_cliLastError has been set within ReleaseFirstInputDevice()</span>
<a name="l00275"></a>00275             <span class="keywordflow">return</span> NULL;
<a name="l00276"></a>00276         }
<a name="l00277"></a>00277     }
<a name="l00278"></a>00278 
<a name="l00279"></a>00279     <span class="comment">// Prepare next device.</span>
<a name="l00280"></a>00280     <span class="keywordflow">if</span> (<a class="code" href="classIODevice.html">IODevice</a>* <span class="keyword">const</span> pcli_CurrentDevice = CheckCurrentDevice())
<a name="l00281"></a>00281     {
<a name="l00282"></a>00282         <a class="code" href="traces_8h.html#757ce8f9014dd17ed7349efcdd702af9">GetTraces</a>().<a class="code" href="classTraces.html#99fe59fe9cb9e5183b245623c2a240a8">SafeTrace</a>(TRACE_IOMUX, *<span class="keyword">this</span>) &lt;&lt; <a class="code" href="classOutputDevice.html#6c668b07b5d90122008c934dece4409b">GetDebugName</a>() &lt;&lt; <span class="stringliteral">": moving to next input "</span> &lt;&lt; pcli_CurrentDevice-&gt;GetDebugName() &lt;&lt; <a class="code" href="io__device_8h.html#d6d7d55b8cc249130097ce4007a1162a">endl</a>;
<a name="l00283"></a>00283         <span class="keywordflow">if</span> (<a class="code" href="classOutputDevice.html#5a6c07074e9fde0fd11aa7d110b73c19">GetOpenUsers</a>() &gt; 0)
<a name="l00284"></a>00284         {
<a name="l00285"></a>00285             <span class="keywordflow">if</span> (! pcli_CurrentDevice-&gt;OpenUp(<a class="code" href="debug_8h.html#12506d620d4ecd0161866c9b19d761ed">__CALL_INFO__</a>))
<a name="l00286"></a>00286             {
<a name="l00287"></a>00287                 <span class="comment">// Open failure.</span>
<a name="l00288"></a>00288                 <a class="code" href="classOutputDevice.html#c831dff60351f1a3dffd667e175e8f23">m_cliLastError</a> = pcli_CurrentDevice-&gt;GetLastError();
<a name="l00289"></a>00289                 <span class="keywordflow">return</span> NULL;
<a name="l00290"></a>00290             }
<a name="l00291"></a>00291         }
<a name="l00292"></a>00292 
<a name="l00293"></a>00293         <span class="comment">// Successful return.</span>
<a name="l00294"></a>00294         <span class="keywordflow">return</span> pcli_CurrentDevice;
<a name="l00295"></a>00295     }
<a name="l00296"></a>00296     <span class="keywordflow">else</span>
<a name="l00297"></a>00297     {
<a name="l00298"></a>00298         <a class="code" href="traces_8h.html#757ce8f9014dd17ed7349efcdd702af9">GetTraces</a>().<a class="code" href="classTraces.html#99fe59fe9cb9e5183b245623c2a240a8">SafeTrace</a>(TRACE_IOMUX, *<span class="keyword">this</span>) &lt;&lt; <a class="code" href="classOutputDevice.html#6c668b07b5d90122008c934dece4409b">GetDebugName</a>() &lt;&lt; <span class="stringliteral">": no more input"</span> &lt;&lt; <a class="code" href="io__device_8h.html#d6d7d55b8cc249130097ce4007a1162a">endl</a>;
<a name="l00299"></a>00299         <span class="comment">// Note: m_cliLastError has been set within CheckInput()</span>
<a name="l00300"></a>00300         <span class="keywordflow">if</span> (<a class="code" href="classOutputDevice.html#c831dff60351f1a3dffd667e175e8f23">m_cliLastError</a>.<a class="code" href="classResourceString.html#97af672605cd7e6af835db384771a834">IsEmpty</a>())
<a name="l00301"></a>00301         {
<a name="l00302"></a>00302             <a class="code" href="classOutputDevice.html#c831dff60351f1a3dffd667e175e8f23">m_cliLastError</a>
<a name="l00303"></a>00303                 .SetString(<a class="code" href="classResourceString.html#88d585d899c8482aeb434571923739b3f12fbeaebaa487c3970ecc2cf837e0df">ResourceString::LANG_EN</a>, <span class="stringliteral">"IOMux: No input / output device"</span>)
<a name="l00304"></a>00304                 .<a class="code" href="classResourceString.html#7a475c727ce2d3b13a4ce609032a0a8a">SetString</a>(<a class="code" href="classResourceString.html#88d585d899c8482aeb434571923739b3142a22fb5f61fe5c723693b4cc887f4f">ResourceString::LANG_FR</a>, <span class="stringliteral">"IOMux: Pas de périphérique d'entrée / sortie"</span>);
<a name="l00305"></a>00305         }
<a name="l00306"></a>00306     }
<a name="l00307"></a>00307 
<a name="l00308"></a>00308     <span class="comment">// Default return indicates a failure.</span>
<a name="l00309"></a>00309     <span class="keywordflow">return</span> NULL;
<a name="l00310"></a>00310 }
<a name="l00311"></a>00311 
<a name="l00312"></a>00312 <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="classIOMux.html#047e72e25dae082fa1f941d81a55e442">IOMux::ResetDeviceList</a>(<span class="keywordtype">void</span>)
<a name="l00313"></a>00313 {
<a name="l00314"></a>00314     <span class="keywordtype">bool</span> b_Res = <span class="keyword">true</span>;
<a name="l00315"></a>00315 
<a name="l00316"></a>00316     <span class="keywordflow">while</span> (! m_qDevices.IsEmpty())
<a name="l00317"></a>00317     {
<a name="l00318"></a>00318         <span class="keywordflow">if</span> (! ReleaseFirstDevice())
<a name="l00319"></a>00319         {
<a name="l00320"></a>00320             <span class="comment">// Note: m_cliLastError has been set within ReleaseFirstInputDevice()</span>
<a name="l00321"></a>00321             b_Res = <span class="keyword">false</span>;
<a name="l00322"></a>00322         }
<a name="l00323"></a>00323     }
<a name="l00324"></a>00324 
<a name="l00325"></a>00325     <span class="keywordflow">return</span> b_Res;
<a name="l00326"></a>00326 }
<a name="l00327"></a>00327 
<a name="l00328"></a>00328 <a class="code" href="classIODevice.html">IODevice</a>* <span class="keyword">const</span> <a class="code" href="classIOMux.html#fdf99e17d8e74009223003e38ed9fc5e">IOMux::CreateDevice</a>(<span class="keywordtype">void</span>)
<a name="l00329"></a>00329 {
<a name="l00330"></a>00330     <span class="keywordflow">return</span> NULL;
<a name="l00331"></a>00331 }
<a name="l00332"></a>00332 
<a name="l00333"></a>00333 <a class="code" href="classIODevice.html">IODevice</a>* <span class="keyword">const</span> IOMux::CheckCurrentDevice(<span class="keywordtype">void</span>)<span class="keyword"> const</span>
<a name="l00334"></a>00334 <span class="keyword"></span>{
<a name="l00335"></a>00335     <span class="comment">// m_qDevices is not empty =&gt; return the first valid device.</span>
<a name="l00336"></a>00336     <span class="keywordflow">while</span> (! m_qDevices.IsEmpty())
<a name="l00337"></a>00337     {
<a name="l00338"></a>00338         <span class="keywordflow">if</span> (<a class="code" href="classIODevice.html">IODevice</a>* <span class="keyword">const</span> pcli_CurrentDevice = m_qDevices.GetHead())
<a name="l00339"></a>00339         {
<a name="l00340"></a>00340             <span class="keywordflow">return</span> pcli_CurrentDevice;
<a name="l00341"></a>00341         }
<a name="l00342"></a>00342         <span class="keywordflow">else</span>
<a name="l00343"></a>00343         {
<a name="l00344"></a>00344             m_qDevices.RemoveHead();
<a name="l00345"></a>00345         }
<a name="l00346"></a>00346     }
<a name="l00347"></a>00347 
<a name="l00348"></a>00348     <span class="comment">// Input needed.</span>
<a name="l00349"></a>00349     <span class="keywordflow">if</span> (<a class="code" href="classIODevice.html">IODevice</a>* <span class="keyword">const</span> pcli_NewDevice = const_cast&lt;IOMux*&gt;(<span class="keyword">this</span>)-&gt;<a class="code" href="classIOMux.html#fdf99e17d8e74009223003e38ed9fc5e">CreateDevice</a>())
<a name="l00350"></a>00350     {
<a name="l00351"></a>00351         <span class="keywordflow">if</span> (! const_cast&lt;IOMux*&gt;(<span class="keyword">this</span>)-&gt;<a class="code" href="classIOMux.html#f1fbe3d6f74ef7028c525a4073310740">AddDevice</a>(pcli_NewDevice))
<a name="l00352"></a>00352         {
<a name="l00353"></a>00353             <span class="comment">// Note: m_cliLastError has been set within AddInput().</span>
<a name="l00354"></a>00354             <span class="keywordflow">return</span> NULL;
<a name="l00355"></a>00355         }
<a name="l00356"></a>00356 
<a name="l00357"></a>00357         <span class="keywordflow">if</span> (<a class="code" href="classOutputDevice.html#5a6c07074e9fde0fd11aa7d110b73c19">GetOpenUsers</a>() &gt; 0)
<a name="l00358"></a>00358         {
<a name="l00359"></a>00359             <span class="comment">// Input should be opened.</span>
<a name="l00360"></a>00360             <span class="keywordflow">if</span> (! pcli_NewDevice-&gt;OpenUp(<a class="code" href="debug_8h.html#12506d620d4ecd0161866c9b19d761ed">__CALL_INFO__</a>))
<a name="l00361"></a>00361             {
<a name="l00362"></a>00362                 <span class="comment">// Open failure.</span>
<a name="l00363"></a>00363                 <a class="code" href="classOutputDevice.html#c831dff60351f1a3dffd667e175e8f23">m_cliLastError</a> = pcli_NewDevice-&gt;GetLastError();
<a name="l00364"></a>00364                 <span class="keywordflow">return</span> NULL;
<a name="l00365"></a>00365             }
<a name="l00366"></a>00366         }
<a name="l00367"></a>00367     }
<a name="l00368"></a>00368 
<a name="l00369"></a>00369     <span class="keywordflow">if</span> (! m_qDevices.IsEmpty())
<a name="l00370"></a>00370     {
<a name="l00371"></a>00371         <span class="keywordflow">if</span> (<a class="code" href="classIODevice.html">IODevice</a>* <span class="keyword">const</span> pcli_CurrentDevice = m_qDevices.GetHead())
<a name="l00372"></a>00372         {
<a name="l00373"></a>00373             <span class="comment">// Successful return.</span>
<a name="l00374"></a>00374             <span class="keywordflow">return</span> pcli_CurrentDevice;
<a name="l00375"></a>00375         }
<a name="l00376"></a>00376     }
<a name="l00377"></a>00377 
<a name="l00378"></a>00378     <span class="comment">// No more input.</span>
<a name="l00379"></a>00379     <a class="code" href="classOutputDevice.html#c831dff60351f1a3dffd667e175e8f23">m_cliLastError</a>
<a name="l00380"></a>00380         .<a class="code" href="classResourceString.html#7a475c727ce2d3b13a4ce609032a0a8a">SetString</a>(<a class="code" href="classResourceString.html#88d585d899c8482aeb434571923739b3f12fbeaebaa487c3970ecc2cf837e0df">ResourceString::LANG_EN</a>, <span class="stringliteral">"IOMux: No more input"</span>)
<a name="l00381"></a>00381         .<a class="code" href="classResourceString.html#7a475c727ce2d3b13a4ce609032a0a8a">SetString</a>(<a class="code" href="classResourceString.html#88d585d899c8482aeb434571923739b3142a22fb5f61fe5c723693b4cc887f4f">ResourceString::LANG_FR</a>, <span class="stringliteral">"IOMux: Aucun périphérique d'entrée"</span>);
<a name="l00382"></a>00382     <span class="keywordflow">return</span> NULL;
<a name="l00383"></a>00383 }
<a name="l00384"></a>00384 
<a name="l00385"></a>00385 <span class="keyword">const</span> <span class="keywordtype">bool</span> IOMux::ReleaseFirstDevice(<span class="keywordtype">void</span>)
<a name="l00386"></a>00386 {
<a name="l00387"></a>00387     <span class="keywordflow">if</span> (! m_qDevices.IsEmpty())
<a name="l00388"></a>00388     {
<a name="l00389"></a>00389         <span class="keywordtype">bool</span> b_Res = <span class="keyword">true</span>;
<a name="l00390"></a>00390 
<a name="l00391"></a>00391         <span class="keywordflow">if</span> (<a class="code" href="classIODevice.html">IODevice</a>* <span class="keyword">const</span> pcli_FirstDevice = m_qDevices.RemoveHead())
<a name="l00392"></a>00392         {
<a name="l00393"></a>00393             <span class="keywordflow">if</span> (<a class="code" href="classOutputDevice.html#5a6c07074e9fde0fd11aa7d110b73c19">GetOpenUsers</a>() &gt; 0)
<a name="l00394"></a>00394             {
<a name="l00395"></a>00395                 <span class="comment">// Close the device if needed.</span>
<a name="l00396"></a>00396                 <span class="keywordflow">if</span> (! pcli_FirstDevice-&gt;CloseDown(<a class="code" href="debug_8h.html#12506d620d4ecd0161866c9b19d761ed">__CALL_INFO__</a>))
<a name="l00397"></a>00397                 {
<a name="l00398"></a>00398                     <a class="code" href="classOutputDevice.html#c831dff60351f1a3dffd667e175e8f23">m_cliLastError</a> = pcli_FirstDevice-&gt;GetLastError();
<a name="l00399"></a>00399                     b_Res = <span class="keyword">false</span>;
<a name="l00400"></a>00400                 }
<a name="l00401"></a>00401             }
<a name="l00402"></a>00402             <span class="comment">// Free the device instance.</span>
<a name="l00403"></a>00403             pcli_FirstDevice-&gt;FreeInstance(<a class="code" href="debug_8h.html#12506d620d4ecd0161866c9b19d761ed">__CALL_INFO__</a>);
<a name="l00404"></a>00404         }
<a name="l00405"></a>00405 
<a name="l00406"></a>00406         <span class="keywordflow">return</span> b_Res;
<a name="l00407"></a>00407     }
<a name="l00408"></a>00408     <span class="keywordflow">else</span>
<a name="l00409"></a>00409     {
<a name="l00410"></a>00410         <a class="code" href="classOutputDevice.html#c831dff60351f1a3dffd667e175e8f23">m_cliLastError</a>
<a name="l00411"></a>00411             .<a class="code" href="classResourceString.html#7a475c727ce2d3b13a4ce609032a0a8a">SetString</a>(ResourceString::LANG_EN, <span class="stringliteral">"IOMux: No more input / output"</span>)
<a name="l00412"></a>00412             .<a class="code" href="classResourceString.html#7a475c727ce2d3b13a4ce609032a0a8a">SetString</a>(<a class="code" href="classResourceString.html#88d585d899c8482aeb434571923739b3142a22fb5f61fe5c723693b4cc887f4f">ResourceString::LANG_FR</a>, <span class="stringliteral">"IOMux: Aucun périphérique d'entrée / sortie"</span>);
<a name="l00413"></a>00413         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00414"></a>00414     }
<a name="l00415"></a>00415 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Mon Dec 12 23:20:26 2011 for CLI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
