<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>CLI: command_line_edition.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-20981143-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="classes.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_7ca5e860cc97c111944d6d090aaeaed5.html">cpp</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_909ff1c5a0fe7ebd415c9e08d3a715b8.html">src</a></div>
<h1>command_line_edition.cpp</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment">    Copyright (c) 2006-2011, Alexis Royer, http://alexis.royer.free.fr/CLI</span>
<a name="l00003"></a>00003 <span class="comment"></span>
<a name="l00004"></a>00004 <span class="comment">    All rights reserved.</span>
<a name="l00005"></a>00005 <span class="comment"></span>
<a name="l00006"></a>00006 <span class="comment">    Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00007"></a>00007 <span class="comment"></span>
<a name="l00008"></a>00008 <span class="comment">        * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00009"></a>00009 <span class="comment">        * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00010"></a>00010 <span class="comment">        * Neither the name of the CLI library project nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00011"></a>00011 <span class="comment"></span>
<a name="l00012"></a>00012 <span class="comment">    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span>
<a name="l00013"></a>00013 <span class="comment">    "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span>
<a name="l00014"></a>00014 <span class="comment">    LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span>
<a name="l00015"></a>00015 <span class="comment">    A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR</span>
<a name="l00016"></a>00016 <span class="comment">    CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,</span>
<a name="l00017"></a>00017 <span class="comment">    EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,</span>
<a name="l00018"></a>00018 <span class="comment">    PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR</span>
<a name="l00019"></a>00019 <span class="comment">    PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF</span>
<a name="l00020"></a>00020 <span class="comment">    LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING</span>
<a name="l00021"></a>00021 <span class="comment">    NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS</span>
<a name="l00022"></a>00022 <span class="comment">    SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00023"></a>00023 <span class="comment">*/</span>
<a name="l00024"></a>00024 
<a name="l00025"></a>00025 
<a name="l00026"></a>00026 <span class="preprocessor">#include "<a class="code" href="pch_8h.html">cli/pch.h</a>"</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="preprocessor">#include "<a class="code" href="io__device_8h.html">cli/io_device.h</a>"</span>
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 <span class="preprocessor">#include "<a class="code" href="constraints_8h.html">constraints.h</a>"</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include "<a class="code" href="command__line__edition_8h.html">command_line_edition.h</a>"</span>
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 
<a name="l00034"></a>00034 <a class="code" href="namespace_8h.html#965caf70ca576c007bee150001248651">CLI_NS_USE</a>(cli)
<a name="l00035"></a>00035 
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 <a class="code" href="classCmdLineEdition.html">CmdLineEdition</a>::<a class="code" href="classCmdLineEdition.html">CmdLineEdition</a>(const <a class="code" href="classCmdLineEdition.html">CmdLineEdition</a>&amp; CLI_CmdLine)
<a name="l00038"></a>00038   : m_tkLeft(CLI_CmdLine.m_tkRight),
<a name="l00039"></a>00039     m_tkRight(CLI_CmdLine.m_tkLeft),
<a name="l00040"></a>00040     m_bInsertMode(CLI_CmdLine.m_bInsertMode)
<a name="l00041"></a>00041 {
<a name="l00042"></a>00042 }
<a name="l00043"></a>00043 
<a name="l00044"></a>00044 <a class="code" href="classCmdLineEdition.html#f437867eff50238d78603b15adb8c248">CmdLineEdition::CmdLineEdition</a>(<span class="keywordtype">void</span>)
<a name="l00045"></a>00045   : m_tkLeft(MAX_CMD_LINE_LENGTH), m_tkRight(MAX_CMD_LINE_LENGTH), m_bInsertMode(true)
<a name="l00046"></a>00046 {
<a name="l00047"></a>00047 }
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 <a class="code" href="classCmdLineEdition.html#2a91e422c8e44dfcaa6b4ac89c68ac82">CmdLineEdition::~CmdLineEdition</a>(<span class="keywordtype">void</span>)
<a name="l00050"></a>00050 {
<a name="l00051"></a>00051 }
<a name="l00052"></a>00052 
<a name="l00053"></a>00053 <a class="code" href="classCmdLineEdition.html">CmdLineEdition</a>&amp; <a class="code" href="classCmdLineEdition.html#ebe95f2b0c0c64a77d0096fe69c94d1d">CmdLineEdition::operator=</a>(<span class="keyword">const</span> <a class="code" href="classCmdLineEdition.html">CmdLineEdition</a>&amp; CLI_CmdLine)
<a name="l00054"></a>00054 {
<a name="l00055"></a>00055     m_tkLeft = CLI_CmdLine.<a class="code" href="classCmdLineEdition.html#79c1528de40af1eeeb26fe3e2d761f63">m_tkLeft</a>;
<a name="l00056"></a>00056     m_tkRight = CLI_CmdLine.<a class="code" href="classCmdLineEdition.html#492cc185eef3ed5ba22371231fcd1635">m_tkRight</a>;
<a name="l00057"></a>00057     m_bInsertMode = CLI_CmdLine.<a class="code" href="classCmdLineEdition.html#a263a8d77c359eb1aa8791202797d998">m_bInsertMode</a>;
<a name="l00058"></a>00058 
<a name="l00059"></a>00059     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00060"></a>00060 }
<a name="l00061"></a>00061 
<a name="l00062"></a>00062 <span class="keywordtype">void</span> <a class="code" href="classCmdLineEdition.html#69eacc8587f58b7ca149df2ef0a46ccb">CmdLineEdition::Set</a>(<span class="keyword">const</span> tk::String&amp; TK_Left, <span class="keyword">const</span> tk::String&amp; TK_Right)
<a name="l00063"></a>00063 {
<a name="l00064"></a>00064     <span class="comment">// Simply set both parts of the command line.</span>
<a name="l00065"></a>00065     m_tkLeft = TK_Left;
<a name="l00066"></a>00066     m_tkRight = TK_Right;
<a name="l00067"></a>00067 }
<a name="l00068"></a>00068 
<a name="l00069"></a>00069 <span class="keywordtype">void</span> <a class="code" href="classCmdLineEdition.html#55c26585a8b2ef1c7540dd26e4ab26f1">CmdLineEdition::Reset</a>(<span class="keywordtype">void</span>)
<a name="l00070"></a>00070 {
<a name="l00071"></a>00071     <span class="comment">// Simply reset both parts of the command line.</span>
<a name="l00072"></a>00072     m_tkLeft.Reset();
<a name="l00073"></a>00073     m_tkRight.Reset();
<a name="l00074"></a>00074 }
<a name="l00075"></a>00075 
<a name="l00076"></a>00076 <span class="keywordtype">void</span> <a class="code" href="classCmdLineEdition.html#54bc4a8394d6d9e302a27e6b04dfa07b">CmdLineEdition::SetInsertMode</a>(<span class="keyword">const</span> <span class="keywordtype">bool</span> B_InsertMode)
<a name="l00077"></a>00077 {
<a name="l00078"></a>00078     m_bInsertMode = B_InsertMode;
<a name="l00079"></a>00079 }
<a name="l00080"></a>00080 
<a name="l00081"></a>00081 <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="classCmdLineEdition.html#2af5c5706c1b02701e933c0995a04e54">CmdLineEdition::GetInsertMode</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span>
<a name="l00082"></a>00082 <span class="keyword"></span>{
<a name="l00083"></a>00083     <span class="keywordflow">return</span> m_bInsertMode;
<a name="l00084"></a>00084 }
<a name="l00085"></a>00085 
<a name="l00086"></a>00086 <span class="keywordtype">void</span> <a class="code" href="classCmdLineEdition.html#9e54ef76c3967253fd6f1a8296c38587">CmdLineEdition::Put</a>(<span class="keyword">const</span> <a class="code" href="classOutputDevice.html">OutputDevice</a>&amp; CLI_OutputDevice, <span class="keyword">const</span> <span class="keywordtype">char</span> C_Char)
<a name="l00087"></a>00087 {
<a name="l00088"></a>00088     <span class="comment">// First of all, append the left part of the command line.</span>
<a name="l00089"></a>00089     <span class="keyword">const</span> <span class="keywordtype">char</span> str_String[] = { C_Char, <span class="charliteral">'\0'</span> };
<a name="l00090"></a>00090     <a class="code" href="classCmdLineEdition.html#9e54ef76c3967253fd6f1a8296c38587">Put</a>(CLI_OutputDevice, tk::String(10, str_String));
<a name="l00091"></a>00091 }
<a name="l00092"></a>00092 
<a name="l00093"></a>00093 <span class="keywordtype">void</span> <a class="code" href="classCmdLineEdition.html#9e54ef76c3967253fd6f1a8296c38587">CmdLineEdition::Put</a>(<span class="keyword">const</span> <a class="code" href="classOutputDevice.html">OutputDevice</a>&amp; CLI_OutputDevice, <span class="keyword">const</span> tk::String&amp; TK_String)
<a name="l00094"></a>00094 {
<a name="l00095"></a>00095     <span class="comment">// First of all, append the left part of the command line.</span>
<a name="l00096"></a>00096     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ui_Len0 = m_tkLeft.GetLength();
<a name="l00097"></a>00097     m_tkLeft.Append(TK_String);
<a name="l00098"></a>00098     <span class="keywordflow">if</span> (m_tkLeft.GetLength() &gt; ui_Len0)
<a name="l00099"></a>00099     {
<a name="l00100"></a>00100         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ui_CharCount = m_tkLeft.GetLength() - ui_Len0;
<a name="l00101"></a>00101 
<a name="l00102"></a>00102         <span class="comment">// Print out the expanded characters.</span>
<a name="l00103"></a>00103         CLI_OutputDevice &lt;&lt; m_tkLeft.SubString(ui_Len0, (<span class="keywordtype">int</span>) ui_CharCount);
<a name="l00104"></a>00104 
<a name="l00105"></a>00105         <span class="keywordflow">if</span> (m_bInsertMode)
<a name="l00106"></a>00106         {
<a name="l00107"></a>00107             <span class="comment">// Refresh the right part of the line.</span>
<a name="l00108"></a>00108 
<a name="l00109"></a>00109             <span class="comment">// Print out the right part of the line.</span>
<a name="l00110"></a>00110             CLI_OutputDevice &lt;&lt; m_tkRight;
<a name="l00111"></a>00111             <span class="comment">// Move the cursor to the left.</span>
<a name="l00112"></a>00112             <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ui=m_tkRight.GetLength(); ui&gt;0; ui--)
<a name="l00113"></a>00113             {
<a name="l00114"></a>00114                 CLI_OutputDevice.<a class="code" href="classOutputDevice.html#a4653710e8f6f3d9bd53cdfec4fe253d">PutString</a>(<span class="stringliteral">"\b"</span>);
<a name="l00115"></a>00115             }
<a name="l00116"></a>00116         }
<a name="l00117"></a>00117         <span class="keywordflow">else</span>
<a name="l00118"></a>00118         {
<a name="l00119"></a>00119             <span class="comment">// Remove the first characters of the right part of the command line.</span>
<a name="l00120"></a>00120             <span class="keywordflow">if</span> (m_tkRight.GetLength() &gt; ui_CharCount)
<a name="l00121"></a>00121             {
<a name="l00122"></a>00122                 m_tkRight = m_tkRight.SubString(ui_CharCount, (<span class="keywordtype">int</span>) (m_tkRight.GetLength() - ui_CharCount));
<a name="l00123"></a>00123             }
<a name="l00124"></a>00124             <span class="keywordflow">else</span>
<a name="l00125"></a>00125             {
<a name="l00126"></a>00126                 m_tkRight.Reset();
<a name="l00127"></a>00127             }
<a name="l00128"></a>00128         }
<a name="l00129"></a>00129     }
<a name="l00130"></a>00130 }
<a name="l00131"></a>00131 
<a name="l00132"></a>00132 <span class="keywordtype">void</span> <a class="code" href="classCmdLineEdition.html#4fe03e4ed78c4e2c9d66518ffc1102f6">CmdLineEdition::CleanAll</a>(<span class="keyword">const</span> <a class="code" href="classOutputDevice.html">OutputDevice</a>&amp; CLI_OutputDevice)
<a name="l00133"></a>00133 {
<a name="l00134"></a>00134     <a class="code" href="classCmdLineEdition.html#366607bb40c643180bcf2c8050819bf4">Delete</a>(CLI_OutputDevice, (<span class="keywordtype">int</span>) m_tkRight.GetLength());
<a name="l00135"></a>00135     <a class="code" href="classCmdLineEdition.html#366607bb40c643180bcf2c8050819bf4">Delete</a>(CLI_OutputDevice, - (<span class="keywordtype">int</span>) m_tkLeft.GetLength());
<a name="l00136"></a>00136 }
<a name="l00137"></a>00137 
<a name="l00138"></a>00138 <span class="keywordtype">void</span> <a class="code" href="classCmdLineEdition.html#366607bb40c643180bcf2c8050819bf4">CmdLineEdition::Delete</a>(<span class="keyword">const</span> <a class="code" href="classOutputDevice.html">OutputDevice</a>&amp; CLI_OutputDevice, <span class="keyword">const</span> <span class="keywordtype">int</span> I_Count)
<a name="l00139"></a>00139 {
<a name="l00140"></a>00140     <span class="keywordflow">if</span> (I_Count &gt; 0)
<a name="l00141"></a>00141     {
<a name="l00142"></a>00142         <span class="comment">// Delete forward</span>
<a name="l00143"></a>00143 
<a name="l00144"></a>00144         <span class="comment">// Find out the pattern to keep, reduce the right part of the command line.</span>
<a name="l00145"></a>00145         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ui_CharCount = (((<span class="keywordtype">unsigned</span> int) I_Count &lt; m_tkRight.GetLength()) ? (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) I_Count : m_tkRight.GetLength());
<a name="l00146"></a>00146         m_tkRight = m_tkRight.SubString(ui_CharCount, (<span class="keywordtype">int</span>) (m_tkRight.GetLength() - ui_CharCount));
<a name="l00147"></a>00147         <span class="comment">// Print over the kept right part of the command line.</span>
<a name="l00148"></a>00148         CLI_OutputDevice &lt;&lt; m_tkRight;
<a name="l00149"></a>00149         <span class="comment">// Blank the useless characters at the end of the line.</span>
<a name="l00150"></a>00150         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ui_Blank = ui_CharCount; ui_Blank &gt; 0; ui_Blank --)
<a name="l00151"></a>00151             CLI_OutputDevice &lt;&lt; <span class="stringliteral">" "</span>;
<a name="l00152"></a>00152         <span class="comment">// Move back the cursor.</span>
<a name="l00153"></a>00153         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ui_Back = m_tkRight.GetLength() + ui_CharCount; ui_Back &gt; 0; ui_Back --)
<a name="l00154"></a>00154             CLI_OutputDevice &lt;&lt; <span class="stringliteral">"\b"</span>;
<a name="l00155"></a>00155     }
<a name="l00156"></a>00156     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (I_Count &lt; 0)
<a name="l00157"></a>00157     {
<a name="l00158"></a>00158         <span class="comment">// Delete backward.</span>
<a name="l00159"></a>00159 
<a name="l00160"></a>00160         <span class="comment">// Fin out the pattern to keep, reduce the left part of the commane line.</span>
<a name="l00161"></a>00161         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ui_CharCount = (((<span class="keywordtype">unsigned</span> int) -I_Count &lt; m_tkLeft.GetLength()) ? (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) -I_Count : m_tkLeft.GetLength());
<a name="l00162"></a>00162         m_tkLeft = m_tkLeft.SubString(0, (<span class="keywordtype">int</span>) (m_tkLeft.GetLength() - ui_CharCount));
<a name="l00163"></a>00163         <span class="comment">// Move back the cursor.</span>
<a name="l00164"></a>00164         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ui_Back1 = ui_CharCount; ui_Back1 &gt; 0; ui_Back1 --)
<a name="l00165"></a>00165             CLI_OutputDevice &lt;&lt; <span class="stringliteral">"\b"</span>;
<a name="l00166"></a>00166         <span class="comment">// Print over the right part of the command line.</span>
<a name="l00167"></a>00167         CLI_OutputDevice &lt;&lt; m_tkRight;
<a name="l00168"></a>00168         <span class="comment">// Blank the useless characters at the end of the line.</span>
<a name="l00169"></a>00169         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ui_Blank = ui_CharCount; ui_Blank &gt; 0; ui_Blank --)
<a name="l00170"></a>00170             CLI_OutputDevice &lt;&lt; <span class="stringliteral">" "</span>;
<a name="l00171"></a>00171         <span class="comment">// Move back the cursor.</span>
<a name="l00172"></a>00172         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ui_Back2 = m_tkRight.GetLength() + ui_CharCount; ui_Back2 &gt; 0; ui_Back2 --)
<a name="l00173"></a>00173             CLI_OutputDevice &lt;&lt; <span class="stringliteral">"\b"</span>;
<a name="l00174"></a>00174     }
<a name="l00175"></a>00175 }
<a name="l00176"></a>00176 
<a name="l00177"></a>00177 <span class="keywordtype">void</span> <a class="code" href="classCmdLineEdition.html#048465c667e3c9e7ae8967d8772c9b50">CmdLineEdition::PrintCmdLine</a>(<span class="keyword">const</span> <a class="code" href="classOutputDevice.html">OutputDevice</a>&amp; CLI_OutputDevice)<span class="keyword"> const</span>
<a name="l00178"></a>00178 <span class="keyword"></span>{
<a name="l00179"></a>00179     CLI_OutputDevice &lt;&lt; m_tkLeft;
<a name="l00180"></a>00180     CLI_OutputDevice &lt;&lt; m_tkRight;
<a name="l00181"></a>00181     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ui = m_tkRight.GetLength(); ui &gt; 0; ui --)
<a name="l00182"></a>00182     {
<a name="l00183"></a>00183         CLI_OutputDevice &lt;&lt; <span class="charliteral">'\b'</span>;
<a name="l00184"></a>00184     }
<a name="l00185"></a>00185 }
<a name="l00186"></a>00186 
<a name="l00187"></a>00187 <span class="keywordtype">void</span> <a class="code" href="classCmdLineEdition.html#dc14c5b12aecb7edc159bf321d995d3e">CmdLineEdition::MoveCursor</a>(<span class="keyword">const</span> <a class="code" href="classOutputDevice.html">OutputDevice</a>&amp; CLI_OutputDevice, <span class="keyword">const</span> <span class="keywordtype">int</span> I_Count)
<a name="l00188"></a>00188 {
<a name="l00189"></a>00189     <span class="keywordflow">if</span> (I_Count &gt; 0)
<a name="l00190"></a>00190     {
<a name="l00191"></a>00191         <span class="comment">// Move forward</span>
<a name="l00192"></a>00192 
<a name="l00193"></a>00193         <span class="comment">// Find out the pattern to skip.</span>
<a name="l00194"></a>00194         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ui_CharCount = (((<span class="keywordtype">unsigned</span> int) I_Count &lt; m_tkRight.GetLength()) ? (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) I_Count : m_tkRight.GetLength());
<a name="l00195"></a>00195         <span class="keyword">const</span> tk::String tk_Skipped = m_tkRight.SubString(0, (<span class="keywordtype">int</span>) ui_CharCount);
<a name="l00196"></a>00196         <span class="comment">// Append the left part of the command line.</span>
<a name="l00197"></a>00197         <span class="keywordflow">if</span> (m_tkLeft.Append(tk_Skipped))
<a name="l00198"></a>00198         {
<a name="l00199"></a>00199             <span class="comment">// Reduce the right part of the command line.</span>
<a name="l00200"></a>00200             m_tkRight = m_tkRight.SubString(ui_CharCount, (<span class="keywordtype">int</span>) (m_tkRight.GetLength() - ui_CharCount));
<a name="l00201"></a>00201             <span class="comment">// Print over the skipped part of the command line.</span>
<a name="l00202"></a>00202             CLI_OutputDevice &lt;&lt; tk_Skipped;
<a name="l00203"></a>00203         }
<a name="l00204"></a>00204     }
<a name="l00205"></a>00205     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (I_Count &lt; 0)
<a name="l00206"></a>00206     {
<a name="l00207"></a>00207         <span class="comment">// Move backward.</span>
<a name="l00208"></a>00208 
<a name="l00209"></a>00209         <span class="comment">// Find out the pattern to skip.</span>
<a name="l00210"></a>00210         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ui_CharCount = (((<span class="keywordtype">unsigned</span> int) -I_Count &lt; m_tkLeft.GetLength()) ? (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) -I_Count : m_tkLeft.GetLength());
<a name="l00211"></a>00211         <span class="keyword">const</span> tk::String tk_Skipped = m_tkLeft.SubString(m_tkLeft.GetLength() - ui_CharCount, (int) ui_CharCount);
<a name="l00212"></a>00212         <span class="comment">// Append the right part of the command line.</span>
<a name="l00213"></a>00213         tk::String tk_Right(tk_Skipped);
<a name="l00214"></a>00214         <span class="keywordflow">if</span> (tk_Right.Append(m_tkRight) &amp;&amp; m_tkRight.Reset() &amp;&amp; m_tkRight.Append(tk_Right))
<a name="l00215"></a>00215         {
<a name="l00216"></a>00216             <span class="comment">// Reduce the left part of the command line.</span>
<a name="l00217"></a>00217             m_tkLeft = m_tkLeft.SubString(0, (<span class="keywordtype">int</span>) (m_tkLeft.GetLength() - ui_CharCount));
<a name="l00218"></a>00218             <span class="comment">// Backward the cursor.</span>
<a name="l00219"></a>00219             <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ui=ui_CharCount; ui&gt;0; ui--)
<a name="l00220"></a>00220             {
<a name="l00221"></a>00221                 CLI_OutputDevice &lt;&lt; <span class="stringliteral">"\b"</span>;
<a name="l00222"></a>00222             }
<a name="l00223"></a>00223         }
<a name="l00224"></a>00224     }
<a name="l00225"></a>00225 }
<a name="l00226"></a>00226 
<a name="l00227"></a>00227 <span class="keywordtype">void</span> <a class="code" href="classCmdLineEdition.html#4a63de64e20b93171a892bac20417cba">CmdLineEdition::NextLine</a>(<span class="keyword">const</span> <a class="code" href="classOutputDevice.html">OutputDevice</a>&amp; CLI_OutputDevice)
<a name="l00228"></a>00228 {
<a name="l00229"></a>00229     CLI_OutputDevice &lt;&lt; m_tkRight &lt;&lt; <a class="code" href="io__device_8h.html#d6d7d55b8cc249130097ce4007a1162a">endl</a>;
<a name="l00230"></a>00230 }
<a name="l00231"></a>00231 
<a name="l00232"></a>00232 <span class="keywordtype">void</span> <a class="code" href="classCmdLineEdition.html#fe0d091378e93f7729f9543ac27950b1">CmdLineEdition::Home</a>(<span class="keyword">const</span> <a class="code" href="classOutputDevice.html">OutputDevice</a>&amp; CLI_OutputDevice)
<a name="l00233"></a>00233 {
<a name="l00234"></a>00234     <a class="code" href="classCmdLineEdition.html#dc14c5b12aecb7edc159bf321d995d3e">MoveCursor</a>(CLI_OutputDevice, - (<span class="keywordtype">int</span>) m_tkLeft.GetLength());
<a name="l00235"></a>00235 }
<a name="l00236"></a>00236 
<a name="l00237"></a>00237 <span class="keywordtype">void</span> <a class="code" href="classCmdLineEdition.html#e899273c37104d2b2d0198cd01379f30">CmdLineEdition::End</a>(<span class="keyword">const</span> <a class="code" href="classOutputDevice.html">OutputDevice</a>&amp; CLI_OutputDevice)
<a name="l00238"></a>00238 {
<a name="l00239"></a>00239     <a class="code" href="classCmdLineEdition.html#dc14c5b12aecb7edc159bf321d995d3e">MoveCursor</a>(CLI_OutputDevice, (<span class="keywordtype">int</span>) m_tkRight.GetLength());
<a name="l00240"></a>00240 }
<a name="l00241"></a>00241 
<a name="l00242"></a>00242 <span class="keyword">const</span> tk::String <a class="code" href="classCmdLineEdition.html#59decc58f0539006c8e816f2268cf11e">CmdLineEdition::GetLine</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span>
<a name="l00243"></a>00243 <span class="keyword"></span>{
<a name="l00244"></a>00244     <span class="keywordflow">return</span> tk::String::Concat(MAX_CMD_LINE_LENGTH, m_tkLeft, m_tkRight);
<a name="l00245"></a>00245 }
<a name="l00246"></a>00246 
<a name="l00247"></a>00247 <span class="keyword">const</span> tk::String <a class="code" href="classCmdLineEdition.html#82e777328c85d7de1c5cdc491c958d13">CmdLineEdition::GetLeft</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span>
<a name="l00248"></a>00248 <span class="keyword"></span>{
<a name="l00249"></a>00249     <span class="keywordflow">return</span> m_tkLeft;
<a name="l00250"></a>00250 }
<a name="l00251"></a>00251 
<a name="l00252"></a>00252 <span class="keyword">const</span> tk::String <a class="code" href="classCmdLineEdition.html#3e939f8bc49e7e4be75e24dc170f6c44">CmdLineEdition::GetRight</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span>
<a name="l00253"></a>00253 <span class="keyword"></span>{
<a name="l00254"></a>00254     <span class="keywordflow">return</span> m_tkRight;
<a name="l00255"></a>00255 }
<a name="l00256"></a>00256 
<a name="l00257"></a>00257 <span class="keyword">const</span> tk::String <a class="code" href="classCmdLineEdition.html#ecd5e63cfdd9b8fcca0ca719f8122f49">CmdLineEdition::GetNextWord</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span>
<a name="l00258"></a>00258 <span class="keyword"></span>{
<a name="l00259"></a>00259     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ui_Len = 0;
<a name="l00260"></a>00260 
<a name="l00261"></a>00261     <span class="comment">// Skip blank characters.</span>
<a name="l00262"></a>00262     <span class="keywordflow">for</span> (   ui_Len = 0;
<a name="l00263"></a>00263             (ui_Len &lt;= m_tkRight.GetLength()) &amp;&amp; (m_tkRight[ui_Len] == <span class="charliteral">' '</span>);
<a name="l00264"></a>00264             ui_Len ++)
<a name="l00265"></a>00265     {
<a name="l00266"></a>00266     }
<a name="l00267"></a>00267 
<a name="l00268"></a>00268     <span class="comment">// Skip characters until the next blank character.</span>
<a name="l00269"></a>00269     <span class="keywordflow">for</span> (   ;
<a name="l00270"></a>00270             (ui_Len &lt;= m_tkRight.GetLength()) &amp;&amp; (m_tkRight[ui_Len] != <span class="charliteral">' '</span>);
<a name="l00271"></a>00271             ui_Len ++)
<a name="l00272"></a>00272     {
<a name="l00273"></a>00273     }
<a name="l00274"></a>00274 
<a name="l00275"></a>00275     <span class="comment">// Return the next word.</span>
<a name="l00276"></a>00276     <span class="keywordflow">if</span> (ui_Len &gt; m_tkRight.GetLength())
<a name="l00277"></a>00277     {
<a name="l00278"></a>00278         ui_Len = m_tkRight.GetLength();
<a name="l00279"></a>00279     }
<a name="l00280"></a>00280     <span class="keywordflow">return</span> m_tkRight.SubString(0, (<span class="keywordtype">int</span>) ui_Len);
<a name="l00281"></a>00281 }
<a name="l00282"></a>00282 
<a name="l00283"></a>00283 <span class="keyword">const</span> tk::String <a class="code" href="classCmdLineEdition.html#e741959935564cd6486789c141ef51df">CmdLineEdition::GetPrevWord</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span>
<a name="l00284"></a>00284 <span class="keyword"></span>{
<a name="l00285"></a>00285     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ui_Len = 0;
<a name="l00286"></a>00286 
<a name="l00287"></a>00287     <span class="comment">// Skip blank characters.</span>
<a name="l00288"></a>00288     <span class="keywordflow">for</span> (   ui_Len = 0;
<a name="l00289"></a>00289             (ui_Len &lt;= m_tkLeft.GetLength()) &amp;&amp; (m_tkLeft[m_tkLeft.GetLength() - 1 - ui_Len] == <span class="charliteral">' '</span>);
<a name="l00290"></a>00290             ui_Len ++)
<a name="l00291"></a>00291     {
<a name="l00292"></a>00292     }
<a name="l00293"></a>00293 
<a name="l00294"></a>00294     <span class="comment">// Skip characters until the next blank character.</span>
<a name="l00295"></a>00295     <span class="keywordflow">for</span> (   ;
<a name="l00296"></a>00296             (ui_Len &lt;= m_tkLeft.GetLength()) &amp;&amp; (m_tkLeft[m_tkLeft.GetLength() - 1 - ui_Len] != <span class="charliteral">' '</span>);
<a name="l00297"></a>00297             ui_Len ++)
<a name="l00298"></a>00298     {
<a name="l00299"></a>00299     }
<a name="l00300"></a>00300 
<a name="l00301"></a>00301     <span class="comment">// Return the previous word.</span>
<a name="l00302"></a>00302     <span class="keywordflow">if</span> (ui_Len &gt; m_tkLeft.GetLength())
<a name="l00303"></a>00303     {
<a name="l00304"></a>00304         ui_Len = m_tkLeft.GetLength();
<a name="l00305"></a>00305     }
<a name="l00306"></a>00306     <span class="keywordflow">return</span> m_tkLeft.SubString(m_tkLeft.GetLength() - ui_Len, (int) ui_Len);
<a name="l00307"></a>00307 }
<a name="l00308"></a>00308 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Mon Dec 12 23:20:26 2011 for CLI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
