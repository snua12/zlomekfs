<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>zlomekFS: config.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul>
</div>
<div class="nav">
<a class="el" href="dir_21c430ab3b7001ae39034eae6f7edf71.html">zfsd</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_ac94841c51e61ddc7acc56e12a771012.html">backup</a></div>
<h1>backup/config.h File Reference</h1>Configuration. <a href="#_details">More...</a>
<p>
<code>#include &quot;<a class="el" href="backup_2system_8h-source.html">system.h</a>&quot;</code><br>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;inttypes.h&gt;</code><br>
<code>#include &quot;<a class="el" href="backup_2pthread-wrapper_8h-source.html">pthread-wrapper.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2memory_8h-source.html">memory.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2semaphore_8h-source.html">semaphore.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2thread_8h-source.html">thread.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2fh_8h-source.html">fh.h</a>&quot;</code><br>

<p>
<a href="backup_2config_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2config_8h.html#caa6806f4603602cc4fbf7e0933d36e2">set_default_uid_gid</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2config_8h.html#b35d0cec5bcb0fcf62b5def80540a135">add_reread_config_request_dentry</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2config_8h.html#8f1ed3033dcf6ff5dc9b772688160f69">add_reread_config_request_local_path</a> (<a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structstring__def.html">string</a> *path)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2config_8h.html#eea8b7ceaab536ad2a7d8a21757cc7c8">add_reread_config_request</a> (<a class="el" href="structstring__def.html">string</a> *relative_path, uint32_t from_sid)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2config_8h.html#06062f9f09fa586b6cbab34dcdab45ed">read_cluster_config</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2config_8h.html#f0067ca792b928324f940c60a15c3958">read_config_file</a> (const char *file)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2config_8h.html#f648c56dacd880ff7289c9602e5c78b9">initialize_config_c</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2config_8h.html#e4c51a63a81cd1c07bfac0795f2cb78a">cleanup_config_c</a> (void)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structthread__def.html">thread</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2config_8h.html#536a63644540e51cd5c8b6293751e472">config_reader_data</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structsemaphore__def.html">semaphore</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2config_8h.html#b22e1ed1a2add956110f47db9fe60e77">config_sem</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structstring__def.html">string</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2config_8h.html#0d25ab84a03b34e1de0ec72820d6857a">kernel_file_name</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2config_8h.html#6dcbff17c4d66183705fc2a976b1325a">config_node</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2config_8h.html#9bf49dfe14c6b79d001964cea203e64c">versioning</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2config_8h.html#3b4c427a38f04df445e25e0c85b8f307">verdisplay</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2config_8h.html#2d7d7a80b0694f337ab94f96b49924c5">retention_age_min</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2config_8h.html#67a1e214b95c07b7a7bd645f1391cf29">retention_age_max</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2config_8h.html#5810add3e4bcfd110153a10bdb556d4a">retention_num_min</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2config_8h.html#a543eb8d217beae417fb4976484cefd1">retention_num_max</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2config_8h.html#2f5c12cd23729c92ce5248163dc1cc20">mlock_zfsd</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Configuration. 
<p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="eea8b7ceaab536ad2a7d8a21757cc7c8"></a><!-- doxytag: member="backup/config.h::add_reread_config_request" ref="eea8b7ceaab536ad2a7d8a21757cc7c8" args="(string *relative_path, uint32_t from_sid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void add_reread_config_request           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>relative_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>from_sid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add request to reread config file RELATIVE_PATH to queue. The request came from node FROM_SID. 
</div>
</div><p>
<a class="anchor" name="b35d0cec5bcb0fcf62b5def80540a135"></a><!-- doxytag: member="backup/config.h::add_reread_config_request_dentry" ref="b35d0cec5bcb0fcf62b5def80540a135" args="(internal_dentry dentry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void add_reread_config_request_dentry           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add request to reread config file DENTRY to queue. 
</div>
</div><p>
<a class="anchor" name="8f1ed3033dcf6ff5dc9b772688160f69"></a><!-- doxytag: member="backup/config.h::add_reread_config_request_local_path" ref="8f1ed3033dcf6ff5dc9b772688160f69" args="(volume vol, string *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void add_reread_config_request_local_path           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>path</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add request to reread config file PATH on volume VOL to queue. 
</div>
</div><p>
<a class="anchor" name="e4c51a63a81cd1c07bfac0795f2cb78a"></a><!-- doxytag: member="backup/config.h::cleanup_config_c" ref="e4c51a63a81cd1c07bfac0795f2cb78a" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cleanup_config_c           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy data structures in CONFIG.C. 
</div>
</div><p>
<a class="anchor" name="f648c56dacd880ff7289c9602e5c78b9"></a><!-- doxytag: member="backup/config.h::initialize_config_c" ref="f648c56dacd880ff7289c9602e5c78b9" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initialize_config_c           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize data structures in CONFIG.C. 
</div>
</div><p>
<a class="anchor" name="06062f9f09fa586b6cbab34dcdab45ed"></a><!-- doxytag: member="backup/config.h::read_cluster_config" ref="06062f9f09fa586b6cbab34dcdab45ed" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool read_cluster_config           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read configuration of the cluster - nodes, volumes, ... 
</div>
</div><p>
<a class="anchor" name="f0067ca792b928324f940c60a15c3958"></a><!-- doxytag: member="backup/config.h::read_config_file" ref="f0067ca792b928324f940c60a15c3958" args="(const char *file)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool read_config_file           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>file</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read configuration from FILE and using this information read configuration of node and cluster. Return true on success. 
</div>
</div><p>
<a class="anchor" name="caa6806f4603602cc4fbf7e0933d36e2"></a><!-- doxytag: member="backup/config.h::set_default_uid_gid" ref="caa6806f4603602cc4fbf7e0933d36e2" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_default_uid_gid           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set default local user/group. 
</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="6dcbff17c4d66183705fc2a976b1325a"></a><!-- doxytag: member="backup/config.h::config_node" ref="6dcbff17c4d66183705fc2a976b1325a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="config_8h.html#6dcbff17c4d66183705fc2a976b1325a">config_node</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Node which the local node should fetch the global configuration from. 
</div>
</div><p>
<a class="anchor" name="536a63644540e51cd5c8b6293751e472"></a><!-- doxytag: member="backup/config.h::config_reader_data" ref="536a63644540e51cd5c8b6293751e472" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structthread__def.html">thread</a> <a class="el" href="config_8h.html#536a63644540e51cd5c8b6293751e472">config_reader_data</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Data for config reader thread. 
</div>
</div><p>
<a class="anchor" name="b22e1ed1a2add956110f47db9fe60e77"></a><!-- doxytag: member="backup/config.h::config_sem" ref="b22e1ed1a2add956110f47db9fe60e77" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsemaphore__def.html">semaphore</a> <a class="el" href="config_8h.html#b22e1ed1a2add956110f47db9fe60e77">config_sem</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Semaphore for managing the reread request queue. 
</div>
</div><p>
<a class="anchor" name="0d25ab84a03b34e1de0ec72820d6857a"></a><!-- doxytag: member="backup/config.h::kernel_file_name" ref="0d25ab84a03b34e1de0ec72820d6857a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structstring__def.html">string</a> <a class="el" href="config_8h.html#0d25ab84a03b34e1de0ec72820d6857a">kernel_file_name</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
File used to communicate with kernel. 
</div>
</div><p>
<a class="anchor" name="2f5c12cd23729c92ce5248163dc1cc20"></a><!-- doxytag: member="backup/config.h::mlock_zfsd" ref="2f5c12cd23729c92ce5248163dc1cc20" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="config_8h.html#2f5c12cd23729c92ce5248163dc1cc20">mlock_zfsd</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
mlockall() zfsd . 
</div>
</div><p>
<a class="anchor" name="67a1e214b95c07b7a7bd645f1391cf29"></a><!-- doxytag: member="backup/config.h::retention_age_max" ref="67a1e214b95c07b7a7bd645f1391cf29" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="config_8h.html#67a1e214b95c07b7a7bd645f1391cf29">retention_age_max</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="2d7d7a80b0694f337ab94f96b49924c5"></a><!-- doxytag: member="backup/config.h::retention_age_min" ref="2d7d7a80b0694f337ab94f96b49924c5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="config_8h.html#2d7d7a80b0694f337ab94f96b49924c5">retention_age_min</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="a543eb8d217beae417fb4976484cefd1"></a><!-- doxytag: member="backup/config.h::retention_num_max" ref="a543eb8d217beae417fb4976484cefd1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="config_8h.html#a543eb8d217beae417fb4976484cefd1">retention_num_max</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="5810add3e4bcfd110153a10bdb556d4a"></a><!-- doxytag: member="backup/config.h::retention_num_min" ref="5810add3e4bcfd110153a10bdb556d4a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="config_8h.html#5810add3e4bcfd110153a10bdb556d4a">retention_num_min</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="3b4c427a38f04df445e25e0c85b8f307"></a><!-- doxytag: member="backup/config.h::verdisplay" ref="3b4c427a38f04df445e25e0c85b8f307" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="config_8h.html#3b4c427a38f04df445e25e0c85b8f307">verdisplay</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Versions displayed in readdir. 
</div>
</div><p>
<a class="anchor" name="9bf49dfe14c6b79d001964cea203e64c"></a><!-- doxytag: member="backup/config.h::versioning" ref="9bf49dfe14c6b79d001964cea203e64c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="config_8h.html#9bf49dfe14c6b79d001964cea203e64c">versioning</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Versioning enabled. 
</div>
</div><p>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Aug 6 00:37:39 2010 for zlomekFS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.2 </small></address>
</body>
</html>
