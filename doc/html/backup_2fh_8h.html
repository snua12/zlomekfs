<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>zlomekFS: fh.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul>
</div>
<div class="nav">
<a class="el" href="dir_21c430ab3b7001ae39034eae6f7edf71.html">zfsd</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_ac94841c51e61ddc7acc56e12a771012.html">backup</a></div>
<h1>backup/fh.h File Reference</h1>File handle functions. <a href="#_details">More...</a>
<p>
<code>#include &quot;<a class="el" href="backup_2system_8h-source.html">system.h</a>&quot;</code><br>
<code>#include &lt;inttypes.h&gt;</code><br>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;time.h&gt;</code><br>
<code>#include &quot;<a class="el" href="backup_2pthread-wrapper_8h-source.html">pthread-wrapper.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2memory_8h-source.html">memory.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2crc32_8h-source.html">crc32.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2hashtab_8h-source.html">hashtab.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2varray_8h-source.html">varray.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2zfs-prot_8h-source.html">zfs-prot.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2util_8h-source.html">util.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2fibheap_8h-source.html">fibheap.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2interval_8h-source.html">interval.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2journal_8h-source.html">journal.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2volume_8h-source.html">volume.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="cap_8h-source.html">cap.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2metadata_8h-source.html">metadata.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2version_8h-source.html">version.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2cap_8h-source.html">cap.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="volume_8h-source.html">volume.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="metadata_8h-source.html">metadata.h</a>&quot;</code><br>

<p>
<a href="backup_2fh_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structinternal__fh__def.html">internal_fh_def</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Internal information about file handle.  <a href="structinternal__fh__def.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlock__info__def.html">lock_info_def</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Information about locked dentries by current thread.  <a href="structlock__info__def.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structinternal__dentry__def.html">internal_dentry_def</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Internal directory entry.  <a href="structinternal__dentry__def.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvirtual__dir__def.html">virtual_dir_def</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Virtual directory (element of mount tree).  <a href="structvirtual__dir__def.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#e3557cdf77e2a6c527c14cbde75bdfeb">VIRTUAL_DEVICE</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#6fefb99a279054362ece826744775d7d">ROOT_INODE</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#10c695978f398ac53caeb45e212222b5">MAX_LOCKED_FILE_HANDLES</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#618c1ab77921012a9745c6acd64336e2">VIRTUAL_FH_P</a>(FH)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#356d00622b4f9aff79163b43964b67aa">NON_EXIST_FH_P</a>(FH)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#bc929e1f0b7f521cf1b4557c081673ad">CONFLICT_DIR_P</a>(FH)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#f0835cd1757d931aea9a45625bda1705">REGULAR_FH_P</a>(FH)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#0ba787a6080e24635d7d35737c62b947">LOCAL_VOLUME_ROOT_P</a>(DENTRY)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#80ac3e5d2fbf319e8147aa344e40a957">SPECIAL_NAME_P</a>(NAME, ALWAYS)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#84f5ace811b73705855225e53e89e38a">SPECIAL_DIR_P</a>(DIR, NAME, ALWAYS)&nbsp;&nbsp;&nbsp;(LOCAL_VOLUME_ROOT_P (DIR) &amp;&amp; SPECIAL_NAME_P ((NAME), (ALWAYS)))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#3a7c2732eb68591a5a08e92d54942959">zfs_fh_undefine</a>(FH)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#45eda11fa1f69f58d21589cacb9f8524">zfs_fh_undefined</a>(FH)&nbsp;&nbsp;&nbsp;(bytecmp (&amp;(FH), -1, sizeof (<a class="el" href="structzfs__fh__def.html">zfs_fh</a>)))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#eee8b8ae311510596a700ed184d7495d">ZFS_FH_HASH</a>(FH)&nbsp;&nbsp;&nbsp;(crc32_buffer ((FH), sizeof (<a class="el" href="structzfs__fh__def.html">zfs_fh</a>)))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#5ba9521b6a3f1ac6bdfcc70359eac2ae">ZFS_FH_EQ</a>(FH1, FH2)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#6ba569b2f54503f3debfa83db858a43d">INTERNAL_DENTRY_HASH</a>(D)&nbsp;&nbsp;&nbsp;(ZFS_FH_HASH (&amp;(D)-&gt;fh-&gt;local_fh))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#71ca08ee8e215859b964ca0bf5402a1a">INTERNAL_DENTRY_HASH_NAME</a>(D)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#3a575e2d62433510248c737e544ead46">INTERNAL_FH_HAS_LOCAL_PATH</a>(FH)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#630f9515ffa050ce69b097cb3d9c7f29">INTERNAL_FH_VERSION_OPEN</a>(FH)&nbsp;&nbsp;&nbsp;((FH)-&gt;version_fd &gt; 0)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#83bff87dfdf3d97dc7d9948c0355aa48">LEVEL_UNLOCKED</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#14129519c52c799a1cdb45647d2cd97a">LEVEL_SHARED</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#0e1cec557a08244fe6975c3cccd75f3e">LEVEL_EXCLUSIVE</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#13cc7e01096f904e62218994f9699cce">CONFLICT_LOCAL_EXISTS</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#4a6db5a1621b59ff4a7866c3bcfa5aa5">CONFLICT_REMOTE_EXISTS</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#73796db08e2af9c903842a91f5c8f655">CONFLICT_BOTH_EXIST</a>&nbsp;&nbsp;&nbsp;(CONFLICT_LOCAL_EXISTS | CONFLICT_REMOTE_EXISTS)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#eca2f9dacee337a556efbcd6ec6b1706">IFH_UPDATE</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#f241099b7d2ef2f0d2bb2bc8239e493b">IFH_REINTEGRATE</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#293ee415797bb76a692ead8a2d9f506e">IFH_METADATA</a>&nbsp;&nbsp;&nbsp;4</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#357e169f8564a9108fd58275cab53d18">IFH_ALL_UPDATE</a>&nbsp;&nbsp;&nbsp;(IFH_UPDATE | IFH_REINTEGRATE | IFH_METADATA)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#18cc368ffb4156c3ddbc325b60552f5e">IFH_ENQUEUED</a>&nbsp;&nbsp;&nbsp;8</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#05b16e73c3a4076656ae442084405d4e">IFH_REINTEGRATING</a>&nbsp;&nbsp;&nbsp;16</td></tr>

<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="structvolume__def.html">volume_def</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#23b8f8d0235e1d23f4244a5bd6742523">volume</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="structinternal__fh__def.html">internal_fh_def</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#74fae3e6dfb05779e3168d9c9f1427e2">internal_fh</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="structinternal__dentry__def.html">internal_dentry_def</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#4326b09466330e1f334da8c5c2627a85">internal_dentry</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="structvirtual__dir__def.html">virtual_dir_def</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#f5a7b3dc50ac942780765d4f924961aa">virtual_dir</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="structlock__info__def.html">lock_info_def</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#52e8d1ec5aee2f26bd490c162927ce86">lock_info</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Information about locked dentries by current thread.  <a href="#52e8d1ec5aee2f26bd490c162927ce86"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#a48729af296248e632b8f240ac13be70">set_lock_info</a> (<a class="el" href="structlock__info__def.html">lock_info</a> *li)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#7832f918945215af7cd2de05fc6604a2">set_owned</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry, unsigned int level)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#56dd89ef05da03bb82b7ff2d02a3fae7">zfs_fh_lookup</a> (<a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh, <a class="el" href="structvolume__def.html">volume</a> *volp, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *dentryp, <a class="el" href="structvirtual__dir__def.html">virtual_dir</a> *vdp, bool delete_volume_p)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#4369b087b71e1339cff3184f4863590b">zfs_fh_lookup_nolock</a> (<a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh, <a class="el" href="structvolume__def.html">volume</a> *volp, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *dentryp, <a class="el" href="structvirtual__dir__def.html">virtual_dir</a> *vdp, bool delete_volume_p)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#d4f866d0e859ea5b309a0316c9ba82e6">acquire_dentry</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#dba0f21d712309394992dba07fac7f02">release_dentry</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#090008bde0f42c0a0d0c7a3aad5f01ff">get_dentry</a> (<a class="el" href="structzfs__fh__def.html">zfs_fh</a> *local_fh, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *master_fh, <a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dir, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structfattr__def.html">fattr</a> *attr, <a class="el" href="structmetadata__def.html">metadata</a> *meta)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#98b93d3a61d62abf54b63d0ad69cee63">delete_dentry</a> (<a class="el" href="structvolume__def.html">volume</a> *volp, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *dirp, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *dir_fh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#eaa5c46027cebc0eff43f4c7d3bfcc86">vd_lookup</a> (<a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#f995be6e56b3a839133217f0cc3ef181">vd_lookup_name_dirstamp</a> (<a class="el" href="structvirtual__dir__def.html">virtual_dir</a> parent, <a class="el" href="structstring__def.html">string</a> *name, time_t *dirstamp)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#c14e8d0673bcce8f066e26f32a6059ce">vd_lookup_name</a> (<a class="el" href="structvirtual__dir__def.html">virtual_dir</a> parent, <a class="el" href="structstring__def.html">string</a> *name)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#8cb3cbb2d678f4c5dd957860bef32010">dentry_lookup</a> (<a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#2314960b1bbbccdc9f5de556cba01ee5">dentry_lookup_name</a> (<a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> parent, <a class="el" href="structstring__def.html">string</a> *name)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#f01bb3357770c86fde4bbc8b2046a557">dentry_lookup_path</a> (<a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> start, <a class="el" href="structstring__def.html">string</a> *path)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#7deec7e5a0d5cfec15604654622c5261">dentry_lookup_local_path</a> (<a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structstring__def.html">string</a> *local_path)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#50a8ee91cf7279f7980d3274be239c38">internal_dentry_lock</a> (unsigned int level, <a class="el" href="structvolume__def.html">volume</a> *volp, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *dentryp, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *tmp_fh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#25399c7c011c8db17106e51083bfe291">internal_dentry_unlock</a> (<a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#da95c07b441d3eb404b765d35b06d266">internal_dentry_lock2</a> (unsigned int level1, unsigned int level2, <a class="el" href="structvolume__def.html">volume</a> *volp, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *dentry1p, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *dentry2p, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *tmp_fh1, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *tmp_fh2)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#004bcac5a4521260bca2e2af84972285">set_master_fh</a> (<a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structinternal__fh__def.html">internal_fh</a> fh, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *master_fh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#d66e60c73dc9dad2c65d272496d9cd30">print_fh_htab</a> (FILE *f)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#36831320b72fcaf2ca2b169fbe126bf4">debug_fh_htab</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#25d627140eb6e87241af8459e1ec8ac8">print_subdentries</a> (FILE *f, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#0b5dd761ac09bd1c3e46ebab554c23d3">debug_subdentries</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#1e87a910684e1ba16db95f10db510d93">internal_dentry_create_ns</a> (<a class="el" href="structzfs__fh__def.html">zfs_fh</a> *local_fh, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *master_fh, <a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> parent, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structfattr__def.html">fattr</a> *attr, <a class="el" href="structmetadata__def.html">metadata</a> *meta, unsigned int level)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#7bfcf103cc9a1ffe0478066b25cf0535">internal_dentry_link</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> orig, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> parent, <a class="el" href="structstring__def.html">string</a> *name)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#53d039d599e7fe36af4474e9186ddeea">internal_dentry_move</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *from_dirp, <a class="el" href="structstring__def.html">string</a> *from_name, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *to_dirp, <a class="el" href="structstring__def.html">string</a> *to_name, <a class="el" href="structvolume__def.html">volume</a> *volp, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *from_fh, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *to_fh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#7a37ecd8655e55cacfdefafc3c346559">internal_dentry_destroy</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry, bool clear_volume_root, bool invalidate, bool volume_root_p)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#175d40b2a7407b9f9937c30a4a5640f9">create_conflict</a> (<a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dir, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *local_fh, <a class="el" href="structfattr__def.html">fattr</a> *attr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#12fcabe197197159092dfb7e5a943e15">add_file_to_conflict_dir</a> (<a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> conflict, bool exists, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh, <a class="el" href="structfattr__def.html">fattr</a> *attr, <a class="el" href="structmetadata__def.html">metadata</a> *meta)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#85cabd83c7f7d5629cfe8ea0c7da612b">try_resolve_conflict</a> (<a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> conflict)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#b5baf7233d31eac450ce2da650d38a85">conflict_local_dentry</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> conflict)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#b679b32ae12335a0a19fab427730a97e">conflict_remote_dentry</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> conflict)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#55f852506029a7b69002e96b359881b8">conflict_other_dentry</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> conflict, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#fc78ab179298144b9f2f500110659c7d">cancel_conflict</a> (<a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> conflict)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#7a251cf9ea14d69dcc4987c1fc0ccee8">virtual_dir_create</a> (<a class="el" href="structvirtual__dir__def.html">virtual_dir</a> parent, const char *name)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#16f9091ef5a42f2dc51d052efd3204e9">virtual_dir_destroy</a> (<a class="el" href="structvirtual__dir__def.html">virtual_dir</a> vd)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#1c2d9fd002758c3a3a569819f1deb9b7">virtual_root_create</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#358e857975192e937fe3f336a689fc96">virtual_root_destroy</a> (<a class="el" href="structvirtual__dir__def.html">virtual_dir</a> <a class="el" href="fh_8c.html#e4cac4bc0c5fa65508b79428d7395b36">root</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#2d82dccda4a8638279877471dea475fe">virtual_mountpoint_create</a> (<a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#b000229493a3fc66db907254aa7d8c09">virtual_mountpoint_destroy</a> (<a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#e73623d02e39544a31a39aa06761acd7">virtual_dir_set_fattr</a> (<a class="el" href="structvirtual__dir__def.html">virtual_dir</a> vd)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#709d39f9778814c3335adc4939343cee">print_virtual_tree</a> (FILE *f)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#482816e87ac2a79cd4219eb86dd439e6">debug_virtual_tree</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#6c9c424d261a183cdf4bbe0e724b564a">initialize_fh_c</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#debe6f14d598f841f48955be99ebac0a">cleanup_fh_c</a> (void)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structzfs__fh__def.html">zfs_fh</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#aeaeb70a4389345c638f589b8357cb45">root_fh</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structzfs__fh__def.html">zfs_fh</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#09f04f0b6d113df8eba9e2e215fa2b04">undefined_fh</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structhtab__def.html">htab_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#50e9c7e5731f9c1ddd313dea77cff407">dentry_htab</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structhtab__def.html">htab_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#abf7a9cb87e4416067ef118ff1948e27">vd_htab</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">pthread_mutex_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#6107d9eff35f5714a36635dcaa3198a2">fh_mutex</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">pthread_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#f82c0c931b261e7dd78e0511fd95e7a7">cleanup_dentry_thread</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">pthread_mutex_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8h.html#14d4f0f064daf73042171a677db1d0e1">cleanup_dentry_thread_in_syscall</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
File handle functions. 
<p>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="73796db08e2af9c903842a91f5c8f655"></a><!-- doxytag: member="backup/fh.h::CONFLICT_BOTH_EXIST" ref="73796db08e2af9c903842a91f5c8f655" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFLICT_BOTH_EXIST&nbsp;&nbsp;&nbsp;(CONFLICT_LOCAL_EXISTS | CONFLICT_REMOTE_EXISTS)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="bc929e1f0b7f521cf1b4557c081673ad"></a><!-- doxytag: member="backup/fh.h::CONFLICT_DIR_P" ref="bc929e1f0b7f521cf1b4557c081673ad" args="(FH)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFLICT_DIR_P          </td>
          <td>(</td>
          <td class="paramtype">FH&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">((FH).sid == <a class="code" href="backup_2node_8h.html#1b42e58f4612fce6b5ffe2617f35173f">NODE_NONE</a>                  \
                            &amp;&amp; (FH).vid != <a class="code" href="backup_2volume_8h.html#cd3f66bba58a2892c3ebd5cf5b692cbd">VOLUME_ID_VIRTUAL</a>)
</pre></div>Is FH a conflict directroy? 
</div>
</div><p>
<a class="anchor" name="13cc7e01096f904e62218994f9699cce"></a><!-- doxytag: member="backup/fh.h::CONFLICT_LOCAL_EXISTS" ref="13cc7e01096f904e62218994f9699cce" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFLICT_LOCAL_EXISTS&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Flags for internal_dentry_create_conflict. 
</div>
</div><p>
<a class="anchor" name="4a6db5a1621b59ff4a7866c3bcfa5aa5"></a><!-- doxytag: member="backup/fh.h::CONFLICT_REMOTE_EXISTS" ref="4a6db5a1621b59ff4a7866c3bcfa5aa5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFLICT_REMOTE_EXISTS&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="357e169f8564a9108fd58275cab53d18"></a><!-- doxytag: member="backup/fh.h::IFH_ALL_UPDATE" ref="357e169f8564a9108fd58275cab53d18" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IFH_ALL_UPDATE&nbsp;&nbsp;&nbsp;(IFH_UPDATE | IFH_REINTEGRATE | IFH_METADATA)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="18cc368ffb4156c3ddbc325b60552f5e"></a><!-- doxytag: member="backup/fh.h::IFH_ENQUEUED" ref="18cc368ffb4156c3ddbc325b60552f5e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IFH_ENQUEUED&nbsp;&nbsp;&nbsp;8          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="293ee415797bb76a692ead8a2d9f506e"></a><!-- doxytag: member="backup/fh.h::IFH_METADATA" ref="293ee415797bb76a692ead8a2d9f506e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IFH_METADATA&nbsp;&nbsp;&nbsp;4          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="f241099b7d2ef2f0d2bb2bc8239e493b"></a><!-- doxytag: member="backup/fh.h::IFH_REINTEGRATE" ref="f241099b7d2ef2f0d2bb2bc8239e493b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IFH_REINTEGRATE&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="05b16e73c3a4076656ae442084405d4e"></a><!-- doxytag: member="backup/fh.h::IFH_REINTEGRATING" ref="05b16e73c3a4076656ae442084405d4e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IFH_REINTEGRATING&nbsp;&nbsp;&nbsp;16          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="eca2f9dacee337a556efbcd6ec6b1706"></a><!-- doxytag: member="backup/fh.h::IFH_UPDATE" ref="eca2f9dacee337a556efbcd6ec6b1706" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IFH_UPDATE&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Internal file handle flags. 
</div>
</div><p>
<a class="anchor" name="6ba569b2f54503f3debfa83db858a43d"></a><!-- doxytag: member="backup/fh.h::INTERNAL_DENTRY_HASH" ref="6ba569b2f54503f3debfa83db858a43d" args="(D)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INTERNAL_DENTRY_HASH          </td>
          <td>(</td>
          <td class="paramtype">D&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(ZFS_FH_HASH (&amp;(D)-&gt;fh-&gt;local_fh))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Hash function for internal dentry D, computed from fh-&gt;local_fh. 
</div>
</div><p>
<a class="anchor" name="71ca08ee8e215859b964ca0bf5402a1a"></a><!-- doxytag: member="backup/fh.h::INTERNAL_DENTRY_HASH_NAME" ref="71ca08ee8e215859b964ca0bf5402a1a" args="(D)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INTERNAL_DENTRY_HASH_NAME          </td>
          <td>(</td>
          <td class="paramtype">D&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">(<a class="code" href="backup_2crc32_8c.html#a4e5598af82ca76082574ea3e85bc84e">crc32_update</a> (<a class="code" href="backup_2crc32_8c.html#c8f920de0cb519e35ff1e3a4ada446ae">crc32_buffer</a> ((D)-&gt;<a class="code" href="structnode__def.html#3030f2d6288572f0b13121800bc3dd6e">name</a>.<a class="code" href="structstring__def.html#4f661a640f55b3bda278bc4f1786b1ab">str</a>, (D)-&gt;name.len),             \
                 &amp;(D)-&gt;parent-&gt;fh-&gt;local_fh, sizeof (<a class="code" href="structzfs__fh__def.html">zfs_fh</a>)))
</pre></div>Hash function for internal dentry D, computed from parent-&gt;fh and name. 
</div>
</div><p>
<a class="anchor" name="3a575e2d62433510248c737e544ead46"></a><!-- doxytag: member="backup/fh.h::INTERNAL_FH_HAS_LOCAL_PATH" ref="3a575e2d62433510248c737e544ead46" args="(FH)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INTERNAL_FH_HAS_LOCAL_PATH          </td>
          <td>(</td>
          <td class="paramtype">FH&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">((FH)-&gt;local_fh.sid == <a class="code" href="backup_2node_8c.html#0f677470ab813f69e53e192bc366ad53">this_node</a>-&gt;<a class="code" href="structnode__def.html#1953f45ab2a2db6d208e0a87933ebf8a">id</a>                                    \
   &amp;&amp; (FH)-&gt;local_fh.vid != <a class="code" href="backup_2volume_8h.html#cd3f66bba58a2892c3ebd5cf5b692cbd">VOLUME_ID_VIRTUAL</a>)
</pre></div>True if file handle FH has a local path. 
</div>
</div><p>
<a class="anchor" name="630f9515ffa050ce69b097cb3d9c7f29"></a><!-- doxytag: member="backup/fh.h::INTERNAL_FH_VERSION_OPEN" ref="630f9515ffa050ce69b097cb3d9c7f29" args="(FH)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INTERNAL_FH_VERSION_OPEN          </td>
          <td>(</td>
          <td class="paramtype">FH&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;((FH)-&gt;version_fd &gt; 0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
True if file handle FH has version file open. 
</div>
</div><p>
<a class="anchor" name="0e1cec557a08244fe6975c3cccd75f3e"></a><!-- doxytag: member="backup/fh.h::LEVEL_EXCLUSIVE" ref="0e1cec557a08244fe6975c3cccd75f3e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LEVEL_EXCLUSIVE&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="14129519c52c799a1cdb45647d2cd97a"></a><!-- doxytag: member="backup/fh.h::LEVEL_SHARED" ref="14129519c52c799a1cdb45647d2cd97a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LEVEL_SHARED&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="83bff87dfdf3d97dc7d9948c0355aa48"></a><!-- doxytag: member="backup/fh.h::LEVEL_UNLOCKED" ref="83bff87dfdf3d97dc7d9948c0355aa48" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LEVEL_UNLOCKED&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
"Lock" level of the file handle or virtual directory. 
</div>
</div><p>
<a class="anchor" name="0ba787a6080e24635d7d35737c62b947"></a><!-- doxytag: member="backup/fh.h::LOCAL_VOLUME_ROOT_P" ref="0ba787a6080e24635d7d35737c62b947" args="(DENTRY)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOCAL_VOLUME_ROOT_P          </td>
          <td>(</td>
          <td class="paramtype">DENTRY&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">((DENTRY)-&gt;parent == NULL                                               \
   || ((DENTRY)-&gt;parent-&gt;parent == NULL                                 \
       &amp;&amp; <a class="code" href="backup_2fh_8h.html#bc929e1f0b7f521cf1b4557c081673ad">CONFLICT_DIR_P</a> ((DENTRY)-&gt;parent-&gt;fh-&gt;local_fh)))
</pre></div>Is DENTRY a local volume root? 
</div>
</div><p>
<a class="anchor" name="10c695978f398ac53caeb45e212222b5"></a><!-- doxytag: member="backup/fh.h::MAX_LOCKED_FILE_HANDLES" ref="10c695978f398ac53caeb45e212222b5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_LOCKED_FILE_HANDLES&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Maximal number of file handles locked by one thread. 
</div>
</div><p>
<a class="anchor" name="356d00622b4f9aff79163b43964b67aa"></a><!-- doxytag: member="backup/fh.h::NON_EXIST_FH_P" ref="356d00622b4f9aff79163b43964b67aa" args="(FH)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NON_EXIST_FH_P          </td>
          <td>(</td>
          <td class="paramtype">FH&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">((FH).vid == <a class="code" href="backup_2volume_8h.html#cd3f66bba58a2892c3ebd5cf5b692cbd">VOLUME_ID_VIRTUAL</a>          \
                            &amp;&amp; (FH).sid != <a class="code" href="backup_2node_8h.html#1b42e58f4612fce6b5ffe2617f35173f">NODE_NONE</a>)
</pre></div>Is FH a file handle of non-existing file represented as a symlink to existing file in case of exist-non_exist conflict? 
</div>
</div><p>
<a class="anchor" name="f0835cd1757d931aea9a45625bda1705"></a><!-- doxytag: member="backup/fh.h::REGULAR_FH_P" ref="f0835cd1757d931aea9a45625bda1705" args="(FH)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REGULAR_FH_P          </td>
          <td>(</td>
          <td class="paramtype">FH&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">((FH).sid != <a class="code" href="backup_2node_8h.html#1b42e58f4612fce6b5ffe2617f35173f">NODE_NONE</a>                          \
                          &amp;&amp; (FH).vid != <a class="code" href="backup_2volume_8h.html#cd3f66bba58a2892c3ebd5cf5b692cbd">VOLUME_ID_VIRTUAL</a>)
</pre></div>Is FH a regular file handle, i.e. not special file handle? 
</div>
</div><p>
<a class="anchor" name="6fefb99a279054362ece826744775d7d"></a><!-- doxytag: member="backup/fh.h::ROOT_INODE" ref="6fefb99a279054362ece826744775d7d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ROOT_INODE&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="84f5ace811b73705855225e53e89e38a"></a><!-- doxytag: member="backup/fh.h::SPECIAL_DIR_P" ref="84f5ace811b73705855225e53e89e38a" args="(DIR, NAME, ALWAYS)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPECIAL_DIR_P          </td>
          <td>(</td>
          <td class="paramtype">DIR,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NAME,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ALWAYS&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(LOCAL_VOLUME_ROOT_P (DIR) &amp;&amp; SPECIAL_NAME_P ((NAME), (ALWAYS)))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Is file NAME in directory DIR a special dir? If ALWAYS is true return true even if request came from local node, otherwise return true only if request came from remote node. 
</div>
</div><p>
<a class="anchor" name="80ac3e5d2fbf319e8147aa344e40a957"></a><!-- doxytag: member="backup/fh.h::SPECIAL_NAME_P" ref="80ac3e5d2fbf319e8147aa344e40a957" args="(NAME, ALWAYS)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPECIAL_NAME_P          </td>
          <td>(</td>
          <td class="paramtype">NAME,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ALWAYS&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">(strcmp ((NAME), <span class="stringliteral">".zfs"</span>) == 0                                           \
   || (strcmp ((NAME), <span class="stringliteral">".shadow"</span>) == 0                                  \
       &amp;&amp; ((ALWAYS) || !<a class="code" href="backup_2network_8c.html#0c932ef2b4e8ba33954e299dfce14003">request_from_this_node</a> ())))
</pre></div>True when the NAME would be a special dir if the NAME was in local volume root. If ALWAYS is true return true even if request came from local node, otherwise return true only if request came from remote node. 
</div>
</div><p>
<a class="anchor" name="e3557cdf77e2a6c527c14cbde75bdfeb"></a><!-- doxytag: member="backup/fh.h::VIRTUAL_DEVICE" ref="e3557cdf77e2a6c527c14cbde75bdfeb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VIRTUAL_DEVICE&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="618c1ab77921012a9745c6acd64336e2"></a><!-- doxytag: member="backup/fh.h::VIRTUAL_FH_P" ref="618c1ab77921012a9745c6acd64336e2" args="(FH)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VIRTUAL_FH_P          </td>
          <td>(</td>
          <td class="paramtype">FH&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">((FH).vid == <a class="code" href="backup_2volume_8h.html#cd3f66bba58a2892c3ebd5cf5b692cbd">VOLUME_ID_VIRTUAL</a>                  \
                          &amp;&amp; (FH).sid == <a class="code" href="backup_2node_8h.html#1b42e58f4612fce6b5ffe2617f35173f">NODE_NONE</a>)
</pre></div>Is the FH virtual? 
</div>
</div><p>
<a class="anchor" name="5ba9521b6a3f1ac6bdfcc70359eac2ae"></a><!-- doxytag: member="backup/fh.h::ZFS_FH_EQ" ref="5ba9521b6a3f1ac6bdfcc70359eac2ae" args="(FH1, FH2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ZFS_FH_EQ          </td>
          <td>(</td>
          <td class="paramtype">FH1,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FH2&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">((FH1).ino == (FH2).ino                 \
                             &amp;&amp; (FH1).dev == (FH2).dev                  \
                             &amp;&amp; (FH1).vid == (FH2).vid                  \
                             &amp;&amp; (FH1).sid == (FH2).sid                  \
                             &amp;&amp; (FH1).gen == (FH2).gen)
</pre></div>Return true if FH1 and FH2 are the same. 
</div>
</div><p>
<a class="anchor" name="eee8b8ae311510596a700ed184d7495d"></a><!-- doxytag: member="backup/fh.h::ZFS_FH_HASH" ref="eee8b8ae311510596a700ed184d7495d" args="(FH)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ZFS_FH_HASH          </td>
          <td>(</td>
          <td class="paramtype">FH&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(crc32_buffer ((FH), sizeof (<a class="el" href="structzfs__fh__def.html">zfs_fh</a>)))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Hash function for zfs_fh FH. 
</div>
</div><p>
<a class="anchor" name="3a7c2732eb68591a5a08e92d54942959"></a><!-- doxytag: member="backup/fh.h::zfs_fh_undefine" ref="3a7c2732eb68591a5a08e92d54942959" args="(FH)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define zfs_fh_undefine          </td>
          <td>(</td>
          <td class="paramtype">FH&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">(<span class="keyword">sizeof</span> (FH) == <span class="keyword">sizeof</span> (<a class="code" href="structzfs__fh__def.html">zfs_fh</a>)         \
                             ? memset (&amp;(FH), -1, <span class="keyword">sizeof</span> (zfs_fh))      \
                             : (<a class="code" href="backup_2log_8h.html#ef4ff7cf390aba5ab4172cca329a2c89">abort</a> (), (<span class="keywordtype">void</span> *) 0))
</pre></div>Mark the ZFS file handle FH to be undefined. 
</div>
</div><p>
<a class="anchor" name="45eda11fa1f69f58d21589cacb9f8524"></a><!-- doxytag: member="backup/fh.h::zfs_fh_undefined" ref="45eda11fa1f69f58d21589cacb9f8524" args="(FH)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define zfs_fh_undefined          </td>
          <td>(</td>
          <td class="paramtype">FH&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(bytecmp (&amp;(FH), -1, sizeof (<a class="el" href="structzfs__fh__def.html">zfs_fh</a>)))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return true if the ZFS file handle FH is undefined. 
</div>
</div><p>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="4326b09466330e1f334da8c5c2627a85"></a><!-- doxytag: member="backup/fh.h::internal_dentry" ref="4326b09466330e1f334da8c5c2627a85" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structinternal__dentry__def.html">internal_dentry_def</a>* <a class="el" href="structinternal__dentry__def.html">internal_dentry</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="74fae3e6dfb05779e3168d9c9f1427e2"></a><!-- doxytag: member="backup/fh.h::internal_fh" ref="74fae3e6dfb05779e3168d9c9f1427e2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structinternal__fh__def.html">internal_fh_def</a>* <a class="el" href="structinternal__fh__def.html">internal_fh</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Forward definitions. 
</div>
</div><p>
<a class="anchor" name="52e8d1ec5aee2f26bd490c162927ce86"></a><!-- doxytag: member="backup/fh.h::lock_info" ref="52e8d1ec5aee2f26bd490c162927ce86" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structlock__info__def.html">lock_info_def</a>  <a class="el" href="structlock__info__def.html">lock_info</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Information about locked dentries by current thread. 
<p>

</div>
</div><p>
<a class="anchor" name="f5a7b3dc50ac942780765d4f924961aa"></a><!-- doxytag: member="backup/fh.h::virtual_dir" ref="f5a7b3dc50ac942780765d4f924961aa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structvirtual__dir__def.html">virtual_dir_def</a>* <a class="el" href="structvirtual__dir__def.html">virtual_dir</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="23b8f8d0235e1d23f4244a5bd6742523"></a><!-- doxytag: member="backup/fh.h::volume" ref="23b8f8d0235e1d23f4244a5bd6742523" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structvolume__def.html">volume_def</a>* <a class="el" href="structvolume__def.html">volume</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Forward declaration. 
</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="d4f866d0e859ea5b309a0316c9ba82e6"></a><!-- doxytag: member="backup/fh.h::acquire_dentry" ref="d4f866d0e859ea5b309a0316c9ba82e6" args="(internal_dentry dentry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void acquire_dentry           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Lock DENTRY and update time of last use. 
</div>
</div><p>
<a class="anchor" name="12fcabe197197159092dfb7e5a943e15"></a><!-- doxytag: member="backup/fh.h::add_file_to_conflict_dir" ref="12fcabe197197159092dfb7e5a943e15" args="(volume vol, internal_dentry conflict, bool exists, zfs_fh *fh, fattr *attr, metadata *meta)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> add_file_to_conflict_dir           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>conflict</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>exists</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfattr__def.html">fattr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmetadata__def.html">metadata</a> *&nbsp;</td>
          <td class="paramname"> <em>meta</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add a dentry to conflict dir CONFLICT on volume VOL. If EXISTS is true the file really exists so create a dentry with file handle FH, attributes ATTR and metadata META; otherwise create a virtual symlink representing non-existing file. 
</div>
</div><p>
<a class="anchor" name="fc78ab179298144b9f2f500110659c7d"></a><!-- doxytag: member="backup/fh.h::cancel_conflict" ref="fc78ab179298144b9f2f500110659c7d" args="(volume vol, internal_dentry conflict)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cancel_conflict           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>conflict</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Cancel the CONFLICT on volume VOL. 
</div>
</div><p>
<a class="anchor" name="debe6f14d598f841f48955be99ebac0a"></a><!-- doxytag: member="backup/fh.h::cleanup_fh_c" ref="debe6f14d598f841f48955be99ebac0a" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cleanup_fh_c           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy data structures in FH.C. 
</div>
</div><p>
<a class="anchor" name="b5baf7233d31eac450ce2da650d38a85"></a><!-- doxytag: member="backup/fh.h::conflict_local_dentry" ref="b5baf7233d31eac450ce2da650d38a85" args="(internal_dentry conflict)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> conflict_local_dentry           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>conflict</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the local dentry in conflict dir CONFLICT. 
</div>
</div><p>
<a class="anchor" name="55f852506029a7b69002e96b359881b8"></a><!-- doxytag: member="backup/fh.h::conflict_other_dentry" ref="55f852506029a7b69002e96b359881b8" args="(internal_dentry conflict, internal_dentry dentry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> conflict_other_dentry           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>conflict</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the other dentry in cronflict dir CONFLICT than DENTRY. 
</div>
</div><p>
<a class="anchor" name="b679b32ae12335a0a19fab427730a97e"></a><!-- doxytag: member="backup/fh.h::conflict_remote_dentry" ref="b679b32ae12335a0a19fab427730a97e" args="(internal_dentry conflict)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> conflict_remote_dentry           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>conflict</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the remote dentry in conflict dir CONFLICT. 
</div>
</div><p>
<a class="anchor" name="175d40b2a7407b9f9937c30a4a5640f9"></a><!-- doxytag: member="backup/fh.h::create_conflict" ref="175d40b2a7407b9f9937c30a4a5640f9" args="(volume vol, internal_dentry dir, string *name, zfs_fh *local_fh, fattr *attr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> create_conflict           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>local_fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfattr__def.html">fattr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create conflict directory for local file handle LOCAL_FH with attributes according to ATTR and name NAME in directory DIR on volume VOL. If such conflict directory already exists update the local file handle and attributes and return it. 
</div>
</div><p>
<a class="anchor" name="36831320b72fcaf2ca2b169fbe126bf4"></a><!-- doxytag: member="backup/fh.h::debug_fh_htab" ref="36831320b72fcaf2ca2b169fbe126bf4" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void debug_fh_htab           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Print the contents of hash table of filehandles HTAB to STDERR. 
</div>
</div><p>
<a class="anchor" name="0b5dd761ac09bd1c3e46ebab554c23d3"></a><!-- doxytag: member="backup/fh.h::debug_subdentries" ref="0b5dd761ac09bd1c3e46ebab554c23d3" args="(internal_dentry dentry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void debug_subdentries           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Print subdentries of dentry DENTRY to STDERR. 
</div>
</div><p>
<a class="anchor" name="482816e87ac2a79cd4219eb86dd439e6"></a><!-- doxytag: member="backup/fh.h::debug_virtual_tree" ref="482816e87ac2a79cd4219eb86dd439e6" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void debug_virtual_tree           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Print the virtual tree to STDERR. 
</div>
</div><p>
<a class="anchor" name="98b93d3a61d62abf54b63d0ad69cee63"></a><!-- doxytag: member="backup/fh.h::delete_dentry" ref="98b93d3a61d62abf54b63d0ad69cee63" args="(volume *volp, internal_dentry *dirp, string *name, zfs_fh *dir_fh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void delete_dentry           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a> *&nbsp;</td>
          <td class="paramname"> <em>volp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *&nbsp;</td>
          <td class="paramname"> <em>dirp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>dir_fh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy dentry NAME in directory DIR (whose file handle is DIR_FH) on volume VOL. 
</div>
</div><p>
<a class="anchor" name="8cb3cbb2d678f4c5dd957860bef32010"></a><!-- doxytag: member="backup/fh.h::dentry_lookup" ref="8cb3cbb2d678f4c5dd957860bef32010" args="(zfs_fh *fh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry_lookup           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the internal dentry for file handle FH. 
</div>
</div><p>
<a class="anchor" name="7deec7e5a0d5cfec15604654622c5261"></a><!-- doxytag: member="backup/fh.h::dentry_lookup_local_path" ref="7deec7e5a0d5cfec15604654622c5261" args="(volume vol, string *local_path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry_lookup_local_path           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>local_path</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the internal dentry for LOCAL_PATH on volume VOL. 
</div>
</div><p>
<a class="anchor" name="2314960b1bbbccdc9f5de556cba01ee5"></a><!-- doxytag: member="backup/fh.h::dentry_lookup_name" ref="2314960b1bbbccdc9f5de556cba01ee5" args="(volume vol, internal_dentry parent, string *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry_lookup_name           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Lookup the internal dentry by name and lock it. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>vol</em>&nbsp;</td><td>Volume whose root is returned if parent == NULL. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>parent</em>&nbsp;</td><td>Directory in which the dentry is being looked up. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>Name of the dentry. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="f01bb3357770c86fde4bbc8b2046a557"></a><!-- doxytag: member="backup/fh.h::dentry_lookup_path" ref="f01bb3357770c86fde4bbc8b2046a557" args="(volume vol, internal_dentry start, string *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry_lookup_path           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>path</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the internal dentry for PATH from directory START or from the volume root of volume VOL if START is NULL. 
</div>
</div><p>
<a class="anchor" name="090008bde0f42c0a0d0c7a3aad5f01ff"></a><!-- doxytag: member="backup/fh.h::get_dentry" ref="090008bde0f42c0a0d0c7a3aad5f01ff" args="(zfs_fh *local_fh, zfs_fh *master_fh, volume vol, internal_dentry dir, string *name, fattr *attr, metadata *meta)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> get_dentry           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>local_fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>master_fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfattr__def.html">fattr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmetadata__def.html">metadata</a> *&nbsp;</td>
          <td class="paramname"> <em>meta</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return dentry for file NAME in directory DIR on volume VOL. If it does not exist create it. Update its local file handle to LOCAL_FH, master file handle to MASTER_FH and attributes to ATTR. 
</div>
</div><p>
<a class="anchor" name="6c9c424d261a183cdf4bbe0e724b564a"></a><!-- doxytag: member="backup/fh.h::initialize_fh_c" ref="6c9c424d261a183cdf4bbe0e724b564a" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initialize_fh_c           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize data structures in FH.C. 
</div>
</div><p>
<a class="anchor" name="1e87a910684e1ba16db95f10db510d93"></a><!-- doxytag: member="backup/fh.h::internal_dentry_create_ns" ref="1e87a910684e1ba16db95f10db510d93" args="(zfs_fh *local_fh, zfs_fh *master_fh, volume vol, internal_dentry parent, string *name, fattr *attr, metadata *meta, unsigned int level)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> internal_dentry_create_ns           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>local_fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>master_fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfattr__def.html">fattr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmetadata__def.html">metadata</a> *&nbsp;</td>
          <td class="paramname"> <em>meta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>level</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="7a37ecd8655e55cacfdefafc3c346559"></a><!-- doxytag: member="backup/fh.h::internal_dentry_destroy" ref="7a37ecd8655e55cacfdefafc3c346559" args="(internal_dentry dentry, bool clear_volume_root, bool invalidate, bool volume_root_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void internal_dentry_destroy           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>clear_volume_root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>invalidate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>volume_root_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy internal dentry. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dentry</em>&nbsp;</td><td>Dentry which shall be destroyed. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>clear_volume_root</em>&nbsp;</td><td>Flag whether the volume root shall be cleared. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>invalidate</em>&nbsp;</td><td>Flag whether the dentry shall be invalidated. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>volume_root_p</em>&nbsp;</td><td>Flag whether the dentry was the volume root. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="7bfcf103cc9a1ffe0478066b25cf0535"></a><!-- doxytag: member="backup/fh.h::internal_dentry_link" ref="7bfcf103cc9a1ffe0478066b25cf0535" args="(internal_dentry orig, internal_dentry parent, string *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> internal_dentry_link           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>orig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a new internal dentry NAME in directory PARENT on volume VOL for file DENTRY. 
</div>
</div><p>
<a class="anchor" name="50a8ee91cf7279f7980d3274be239c38"></a><!-- doxytag: member="backup/fh.h::internal_dentry_lock" ref="50a8ee91cf7279f7980d3274be239c38" args="(unsigned int level, volume *volp, internal_dentry *dentryp, zfs_fh *tmp_fh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t internal_dentry_lock           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a> *&nbsp;</td>
          <td class="paramname"> <em>volp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *&nbsp;</td>
          <td class="paramname"> <em>dentryp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>tmp_fh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Lock dentry *DENTRYP on volume *VOLP to level LEVEL. Store the local ZFS file handle to TMP_FH. 
</div>
</div><p>
<a class="anchor" name="da95c07b441d3eb404b765d35b06d266"></a><!-- doxytag: member="backup/fh.h::internal_dentry_lock2" ref="da95c07b441d3eb404b765d35b06d266" args="(unsigned int level1, unsigned int level2, volume *volp, internal_dentry *dentry1p, internal_dentry *dentry2p, zfs_fh *tmp_fh1, zfs_fh *tmp_fh2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t internal_dentry_lock2           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>level1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>level2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a> *&nbsp;</td>
          <td class="paramname"> <em>volp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *&nbsp;</td>
          <td class="paramname"> <em>dentry1p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *&nbsp;</td>
          <td class="paramname"> <em>dentry2p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>tmp_fh1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>tmp_fh2</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Lock 2 dentries on volume *VOLP, lock *DENTRY1P to level LEVEL1 and DENTRY2P to level LEVEL2. Use TMP_FH1 and TMP_FH2 to lookup them. 
</div>
</div><p>
<a class="anchor" name="53d039d599e7fe36af4474e9186ddeea"></a><!-- doxytag: member="backup/fh.h::internal_dentry_move" ref="53d039d599e7fe36af4474e9186ddeea" args="(internal_dentry *from_dirp, string *from_name, internal_dentry *to_dirp, string *to_name, volume *volp, zfs_fh *from_fh, zfs_fh *to_fh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void internal_dentry_move           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *&nbsp;</td>
          <td class="paramname"> <em>from_dirp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>from_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *&nbsp;</td>
          <td class="paramname"> <em>to_dirp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>to_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a> *&nbsp;</td>
          <td class="paramname"> <em>volp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>from_fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>to_fh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Move internal dentry for file FROM_NAME in *FROM_DIRP to be a subdentry of *TO_DIRP with name TO_NAME on volume *VOLP. 
</div>
</div><p>
<a class="anchor" name="25399c7c011c8db17106e51083bfe291"></a><!-- doxytag: member="backup/fh.h::internal_dentry_unlock" ref="25399c7c011c8db17106e51083bfe291" args="(volume vol, internal_dentry dentry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void internal_dentry_unlock           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Unlock dentry DENTRY. 
</div>
</div><p>
<a class="anchor" name="d66e60c73dc9dad2c65d272496d9cd30"></a><!-- doxytag: member="backup/fh.h::print_fh_htab" ref="d66e60c73dc9dad2c65d272496d9cd30" args="(FILE *f)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void print_fh_htab           </td>
          <td>(</td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>f</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Print the contents of hash table HTAB to file F. 
</div>
</div><p>
<a class="anchor" name="25d627140eb6e87241af8459e1ec8ac8"></a><!-- doxytag: member="backup/fh.h::print_subdentries" ref="25d627140eb6e87241af8459e1ec8ac8" args="(FILE *f, internal_dentry dentry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void print_subdentries           </td>
          <td>(</td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Print subdentries of dentry DENTRY to file F. 
</div>
</div><p>
<a class="anchor" name="709d39f9778814c3335adc4939343cee"></a><!-- doxytag: member="backup/fh.h::print_virtual_tree" ref="709d39f9778814c3335adc4939343cee" args="(FILE *f)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void print_virtual_tree           </td>
          <td>(</td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>f</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Print the virtual tree to file F. 
</div>
</div><p>
<a class="anchor" name="dba0f21d712309394992dba07fac7f02"></a><!-- doxytag: member="backup/fh.h::release_dentry" ref="dba0f21d712309394992dba07fac7f02" args="(internal_dentry dentry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void release_dentry           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Update time of last use of DENTRY and unlock it. 
</div>
</div><p>
<a class="anchor" name="a48729af296248e632b8f240ac13be70"></a><!-- doxytag: member="backup/fh.h::set_lock_info" ref="a48729af296248e632b8f240ac13be70" args="(lock_info *li)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_lock_info           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlock__info__def.html">lock_info</a> *&nbsp;</td>
          <td class="paramname"> <em>li</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set array of lock info for current thread to LI. 
</div>
</div><p>
<a class="anchor" name="004bcac5a4521260bca2e2af84972285"></a><!-- doxytag: member="backup/fh.h::set_master_fh" ref="004bcac5a4521260bca2e2af84972285" args="(volume vol, internal_fh fh, zfs_fh *master_fh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool set_master_fh           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__fh__def.html">internal_fh</a>&nbsp;</td>
          <td class="paramname"> <em>fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>master_fh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set master file handle of file handle FH on volume VOL to MASTER_FH. 
</div>
</div><p>
<a class="anchor" name="7832f918945215af7cd2de05fc6604a2"></a><!-- doxytag: member="backup/fh.h::set_owned" ref="7832f918945215af7cd2de05fc6604a2" args="(internal_dentry dentry, unsigned int level)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_owned           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>level</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add dentry DENTRY locked to level LEVEL to list of dentries owned by current thread. 
</div>
</div><p>
<a class="anchor" name="85cabd83c7f7d5629cfe8ea0c7da612b"></a><!-- doxytag: member="backup/fh.h::try_resolve_conflict" ref="85cabd83c7f7d5629cfe8ea0c7da612b" args="(volume vol, internal_dentry conflict)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool try_resolve_conflict           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>conflict</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Try resolve CONFLICT on volume VOL, return true if it was resolved. 
</div>
</div><p>
<a class="anchor" name="eaa5c46027cebc0eff43f4c7d3bfcc86"></a><!-- doxytag: member="backup/fh.h::vd_lookup" ref="eaa5c46027cebc0eff43f4c7d3bfcc86" args="(zfs_fh *fh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a> vd_lookup           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return virtual directory for file handle FH. 
</div>
</div><p>
<a class="anchor" name="c14e8d0673bcce8f066e26f32a6059ce"></a><!-- doxytag: member="backup/fh.h::vd_lookup_name" ref="c14e8d0673bcce8f066e26f32a6059ce" args="(virtual_dir parent, string *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a> vd_lookup_name           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a>&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the virtual directory for NAME in virtual directory PARENT. 
</div>
</div><p>
<a class="anchor" name="f995be6e56b3a839133217f0cc3ef181"></a><!-- doxytag: member="backup/fh.h::vd_lookup_name_dirstamp" ref="f995be6e56b3a839133217f0cc3ef181" args="(virtual_dir parent, string *name, time_t *dirstamp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a> vd_lookup_name_dirstamp           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a>&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t *&nbsp;</td>
          <td class="paramname"> <em>dirstamp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="7a251cf9ea14d69dcc4987c1fc0ccee8"></a><!-- doxytag: member="backup/fh.h::virtual_dir_create" ref="7a251cf9ea14d69dcc4987c1fc0ccee8" args="(virtual_dir parent, const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a> virtual_dir_create           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a>&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a new virtual directory NAME in virtual directory PARENT. 
</div>
</div><p>
<a class="anchor" name="16f9091ef5a42f2dc51d052efd3204e9"></a><!-- doxytag: member="backup/fh.h::virtual_dir_destroy" ref="16f9091ef5a42f2dc51d052efd3204e9" args="(virtual_dir vd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void virtual_dir_destroy           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a>&nbsp;</td>
          <td class="paramname"> <em>vd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Delete a virtual directory VD from all hash tables and free it. 
</div>
</div><p>
<a class="anchor" name="e73623d02e39544a31a39aa06761acd7"></a><!-- doxytag: member="backup/fh.h::virtual_dir_set_fattr" ref="e73623d02e39544a31a39aa06761acd7" args="(virtual_dir vd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void virtual_dir_set_fattr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a>&nbsp;</td>
          <td class="paramname"> <em>vd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the file attributes of virtual directory VD. 
</div>
</div><p>
<a class="anchor" name="2d82dccda4a8638279877471dea475fe"></a><!-- doxytag: member="backup/fh.h::virtual_mountpoint_create" ref="2d82dccda4a8638279877471dea475fe" args="(volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a> virtual_mountpoint_create           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create the virtual mountpoint for volume VOL. 
</div>
</div><p>
<a class="anchor" name="b000229493a3fc66db907254aa7d8c09"></a><!-- doxytag: member="backup/fh.h::virtual_mountpoint_destroy" ref="b000229493a3fc66db907254aa7d8c09" args="(volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void virtual_mountpoint_destroy           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy the virtual mountpoint of volume VOL. 
</div>
</div><p>
<a class="anchor" name="1c2d9fd002758c3a3a569819f1deb9b7"></a><!-- doxytag: member="backup/fh.h::virtual_root_create" ref="1c2d9fd002758c3a3a569819f1deb9b7" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a> virtual_root_create           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create the virtual root directory. 
</div>
</div><p>
<a class="anchor" name="358e857975192e937fe3f336a689fc96"></a><!-- doxytag: member="backup/fh.h::virtual_root_destroy" ref="358e857975192e937fe3f336a689fc96" args="(virtual_dir root)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void virtual_root_destroy           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a>&nbsp;</td>
          <td class="paramname"> <em>dir</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy virtual root directory. 
</div>
</div><p>
<a class="anchor" name="56dd89ef05da03bb82b7ff2d02a3fae7"></a><!-- doxytag: member="backup/fh.h::zfs_fh_lookup" ref="56dd89ef05da03bb82b7ff2d02a3fae7" args="(zfs_fh *fh, volume *volp, internal_dentry *dentryp, virtual_dir *vdp, bool delete_volume_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t zfs_fh_lookup           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a> *&nbsp;</td>
          <td class="paramname"> <em>volp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *&nbsp;</td>
          <td class="paramname"> <em>dentryp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a> *&nbsp;</td>
          <td class="paramname"> <em>vdp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>delete_volume_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Find the internal file handle or virtual directory for zfs_fh FH and set *VOLP, *DENTRYP and VDP according to it. If DELETE_VOLUME_P is true and the volume should be deleted do not lookup the file handle and delete the volume if there are no file handles locked on it. 
</div>
</div><p>
<a class="anchor" name="4369b087b71e1339cff3184f4863590b"></a><!-- doxytag: member="backup/fh.h::zfs_fh_lookup_nolock" ref="4369b087b71e1339cff3184f4863590b" args="(zfs_fh *fh, volume *volp, internal_dentry *dentryp, virtual_dir *vdp, bool delete_volume_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t zfs_fh_lookup_nolock           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a> *&nbsp;</td>
          <td class="paramname"> <em>volp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *&nbsp;</td>
          <td class="paramname"> <em>dentryp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a> *&nbsp;</td>
          <td class="paramname"> <em>vdp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>delete_volume_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Find the internal file handle or virtual directory for zfs_fh FH and set *VOLP, *DENTRYP and VDP according to it. This function is similar to FH_LOOKUP but the big locks must be locked. If DELETE_VOLUME_P is true and the volume should be deleted do not lookup the file handle and delete the volume if there are no file handles locked on it. 
</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="f82c0c931b261e7dd78e0511fd95e7a7"></a><!-- doxytag: member="backup/fh.h::cleanup_dentry_thread" ref="f82c0c931b261e7dd78e0511fd95e7a7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_t <a class="el" href="fh_8h.html#f82c0c931b261e7dd78e0511fd95e7a7">cleanup_dentry_thread</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Thread ID of thread freeing file handles unused for a long time. 
</div>
</div><p>
<a class="anchor" name="14d4f0f064daf73042171a677db1d0e1"></a><!-- doxytag: member="backup/fh.h::cleanup_dentry_thread_in_syscall" ref="14d4f0f064daf73042171a677db1d0e1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_mutex_t <a class="el" href="fh_8h.html#14d4f0f064daf73042171a677db1d0e1">cleanup_dentry_thread_in_syscall</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This mutex is locked when cleanup fh thread is in sleep. 
</div>
</div><p>
<a class="anchor" name="50e9c7e5731f9c1ddd313dea77cff407"></a><!-- doxytag: member="backup/fh.h::dentry_htab" ref="50e9c7e5731f9c1ddd313dea77cff407" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structhtab__def.html">htab_t</a> <a class="el" href="fh_8h.html#50e9c7e5731f9c1ddd313dea77cff407">dentry_htab</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Hash table of used dentries, searched by fh-&gt;local_fh. 
</div>
</div><p>
<a class="anchor" name="6107d9eff35f5714a36635dcaa3198a2"></a><!-- doxytag: member="backup/fh.h::fh_mutex" ref="6107d9eff35f5714a36635dcaa3198a2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_mutex_t <a class="el" href="fh_8h.html#6107d9eff35f5714a36635dcaa3198a2">fh_mutex</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Mutes for file handles, dentries and virtual directories. 
</div>
</div><p>
<a class="anchor" name="aeaeb70a4389345c638f589b8357cb45"></a><!-- doxytag: member="backup/fh.h::root_fh" ref="aeaeb70a4389345c638f589b8357cb45" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> <a class="el" href="fh_8h.html#aeaeb70a4389345c638f589b8357cb45">root_fh</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
File handle of ZFS root. 
</div>
</div><p>
<a class="anchor" name="09f04f0b6d113df8eba9e2e215fa2b04"></a><!-- doxytag: member="backup/fh.h::undefined_fh" ref="09f04f0b6d113df8eba9e2e215fa2b04" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> <a class="el" href="fh_8h.html#09f04f0b6d113df8eba9e2e215fa2b04">undefined_fh</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Static undefined ZFS file handle. 
</div>
</div><p>
<a class="anchor" name="abf7a9cb87e4416067ef118ff1948e27"></a><!-- doxytag: member="backup/fh.h::vd_htab" ref="abf7a9cb87e4416067ef118ff1948e27" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structhtab__def.html">htab_t</a> <a class="el" href="fh_8h.html#abf7a9cb87e4416067ef118ff1948e27">vd_htab</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Hash table of virtual directories, searched by fh. 
</div>
</div><p>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Aug 6 00:37:40 2010 for zlomekFS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.2 </small></address>
</body>
</html>
