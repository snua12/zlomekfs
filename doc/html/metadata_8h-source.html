<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>zlomekFS: metadata.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul>
</div>
<div class="nav">
<a class="el" href="dir_21c430ab3b7001ae39034eae6f7edf71.html">zfsd</a></div>
<h1>metadata.h</h1><a href="metadata_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00004"></a>00004 <span class="comment">/* Copyright (C) 2003, 2004 Josef Zlomek</span>
<a name="l00005"></a>00005 <span class="comment"></span>
<a name="l00006"></a>00006 <span class="comment">   This file is part of ZFS.</span>
<a name="l00007"></a>00007 <span class="comment"></span>
<a name="l00008"></a>00008 <span class="comment">   ZFS is free software; you can redistribute it and/or modify it</span>
<a name="l00009"></a>00009 <span class="comment">   under the terms of the GNU General Public License as published by</span>
<a name="l00010"></a>00010 <span class="comment">   the Free Software Foundation; either version 2, or (at your option)</span>
<a name="l00011"></a>00011 <span class="comment">   any later version.</span>
<a name="l00012"></a>00012 <span class="comment"></span>
<a name="l00013"></a>00013 <span class="comment">   ZFS is distributed in the hope that it will be useful, but WITHOUT</span>
<a name="l00014"></a>00014 <span class="comment">   ANY WARRANTY; without even the implied warranty of MERCHANTABILITY</span>
<a name="l00015"></a>00015 <span class="comment">   or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public</span>
<a name="l00016"></a>00016 <span class="comment">   License for more details.</span>
<a name="l00017"></a>00017 <span class="comment"></span>
<a name="l00018"></a>00018 <span class="comment">   You should have received a copy of the GNU General Public License along with</span>
<a name="l00019"></a>00019 <span class="comment">   ZFS; see the file COPYING.  If not, write to the Free Software Foundation,</span>
<a name="l00020"></a>00020 <span class="comment">   59 Temple Place - Suite 330, Boston, MA 02111-1307, USA;</span>
<a name="l00021"></a>00021 <span class="comment">   or download it from http://www.gnu.org/licenses/gpl.html */</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#ifndef METADATA_H</span>
<a name="l00024"></a>00024 <span class="preprocessor"></span><span class="preprocessor">#define METADATA_H</span>
<a name="l00025"></a>00025 <span class="preprocessor"></span>
<a name="l00026"></a>00026 <span class="preprocessor">#include "<a class="code" href="system_8h.html" title="Environment definitions.">system.h</a>"</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;inttypes.h&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;sys/types.h&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;sys/stat.h&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;fcntl.h&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include "<a class="code" href="zfs-prot_8h.html" title="ZFS protocol.">zfs-prot.h</a>"</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include "<a class="code" href="hardlink-list_8h.html" title="Datatype for list of hardlinks.">hardlink-list.h</a>"</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include "<a class="code" href="journal_8h.html" title="Journal datatype.">journal.h</a>"</span>
<a name="l00034"></a>00034 
<a name="l00035"></a>00035 <span class="preprocessor">#if (S_IRWXU | S_IRWXG | S_IRWXO | S_ISUID | S_ISGID | S_ISVTX) &gt; 0xffffff</span>
<a name="l00036"></a>00036 <span class="preprocessor"></span><span class="preprocessor">#error access mode flags are too big</span>
<a name="l00037"></a>00037 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00038"></a>00038 <span class="preprocessor"></span>
<a name="l00040"></a><a class="code" href="metadata_8h.html#095c33a9fcfde0046d27a69844c0eeda">00040</a> <span class="preprocessor">#define GET_MODE(MODE) ((MODE) &amp; (S_IRWXU | S_IRWXG | S_IRWXO           \</span>
<a name="l00041"></a>00041 <span class="preprocessor">                                  | S_ISUID | S_ISGID | S_ISVTX))</span>
<a name="l00042"></a>00042 <span class="preprocessor"></span>
<a name="l00044"></a><a class="code" href="metadata_8h.html#cf011cf23f27e684a76676f4bc333208">00044</a> <span class="preprocessor">#define GET_MODETYPE(MODE, TYPE) (GET_MODE (MODE) | ((TYPE) &lt;&lt; 24))</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span>
<a name="l00047"></a><a class="code" href="metadata_8h.html#015d31621627a1bf93ba2aaa94b3c2d6">00047</a> <span class="preprocessor">#define GET_MODETYPE_MODE(MODETYPE) ((MODETYPE) &amp; UINT32_C (0xffffff))</span>
<a name="l00048"></a>00048 <span class="preprocessor"></span>
<a name="l00050"></a><a class="code" href="metadata_8h.html#89a4189397dab8d128153f4f8866e0f8">00050</a> <span class="preprocessor">#define GET_MODETYPE_TYPE(MODETYPE) ((MODETYPE) &gt;&gt; 24)</span>
<a name="l00051"></a>00051 <span class="preprocessor"></span>
<a name="l00053"></a>00053 <span class="keyword">extern</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="metadata_8c.html#0897dc5e6757cea8fad80b1c414dee72">metadata_tree_depth</a>;
<a name="l00054"></a>00054 
<a name="l00056"></a><a class="code" href="metadata_8h.html#2635928e587c14b40f00cfc01fa80a82">00056</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="metadata_8h.html#2635928e587c14b40f00cfc01fa80a82">metadata_type_def</a>
<a name="l00057"></a>00057 {
<a name="l00059"></a><a class="code" href="metadata_8h.html#2635928e587c14b40f00cfc01fa80a825d9755fb1135d285588030d1bb04c00e">00059</a>   <a class="code" href="metadata_8h.html#2635928e587c14b40f00cfc01fa80a825d9755fb1135d285588030d1bb04c00e">METADATA_TYPE_METADATA</a>,
<a name="l00060"></a>00060 
<a name="l00062"></a><a class="code" href="metadata_8h.html#2635928e587c14b40f00cfc01fa80a82dece6f2aab62dca93be6ccb804738968">00062</a>   <a class="code" href="metadata_8h.html#2635928e587c14b40f00cfc01fa80a82dece6f2aab62dca93be6ccb804738968">METADATA_TYPE_FH_MAPPING</a>,
<a name="l00063"></a>00063 
<a name="l00065"></a><a class="code" href="metadata_8h.html#2635928e587c14b40f00cfc01fa80a823ee820505cc54e6240312859f3b176e8">00065</a>   <a class="code" href="metadata_8h.html#2635928e587c14b40f00cfc01fa80a823ee820505cc54e6240312859f3b176e8">METADATA_TYPE_UPDATED</a>,
<a name="l00066"></a>00066 
<a name="l00068"></a><a class="code" href="metadata_8h.html#2635928e587c14b40f00cfc01fa80a827cfb55f7357c114ccd834bf3190ec425">00068</a>   <a class="code" href="metadata_8h.html#2635928e587c14b40f00cfc01fa80a827cfb55f7357c114ccd834bf3190ec425">METADATA_TYPE_MODIFIED</a>,
<a name="l00069"></a>00069 
<a name="l00071"></a><a class="code" href="metadata_8h.html#2635928e587c14b40f00cfc01fa80a8215cf88479b3c3c03330f9cd297b753eb">00071</a>   <a class="code" href="metadata_8h.html#2635928e587c14b40f00cfc01fa80a8215cf88479b3c3c03330f9cd297b753eb">METADATA_TYPE_HARDLINKS</a>,
<a name="l00072"></a>00072 
<a name="l00074"></a><a class="code" href="metadata_8h.html#2635928e587c14b40f00cfc01fa80a82e92a05e367e3c56e8a2817d66cf0f390">00074</a>   <a class="code" href="metadata_8h.html#2635928e587c14b40f00cfc01fa80a82e92a05e367e3c56e8a2817d66cf0f390">METADATA_TYPE_JOURNAL</a>,
<a name="l00075"></a>00075 
<a name="l00077"></a><a class="code" href="metadata_8h.html#2635928e587c14b40f00cfc01fa80a8240ae1725d2fc89da767e96d7161e26c6">00077</a>   <a class="code" href="metadata_8h.html#2635928e587c14b40f00cfc01fa80a8240ae1725d2fc89da767e96d7161e26c6">METADATA_TYPE_SHADOW</a>
<a name="l00078"></a>00078 } <a class="code" href="metadata_8h.html#548e14ed3091a841ff4c0eb02062d78e">metadata_type</a>;
<a name="l00079"></a>00079 
<a name="l00082"></a><a class="code" href="metadata_8h.html#a8aad131b2bdf5363ac23772a40b95cd">00082</a> <span class="preprocessor">#define METADATA_NAME_SIZE 52</span>
<a name="l00083"></a>00083 <span class="preprocessor"></span>
<a name="l00085"></a><a class="code" href="structmetadata__def.html">00085</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structmetadata__def.html" title="Metadata for file.">metadata_def</a>
<a name="l00086"></a>00086 {
<a name="l00087"></a><a class="code" href="structmetadata__def.html#0dda3704d12002b829d65e4047e52215">00087</a>   uint32_t <a class="code" href="structmetadata__def.html#0dda3704d12002b829d65e4047e52215">slot_status</a>;         
<a name="l00088"></a><a class="code" href="structmetadata__def.html#68fa697d26252b1f5ab713fd9adde32c">00088</a>   uint32_t <a class="code" href="structmetadata__def.html#68fa697d26252b1f5ab713fd9adde32c">flags</a>;               
<a name="l00089"></a><a class="code" href="structmetadata__def.html#3649802ccf231d944032f23a6c4922d7">00089</a>   uint32_t <a class="code" href="structmetadata__def.html#3649802ccf231d944032f23a6c4922d7">dev</a>;                 
<a name="l00090"></a><a class="code" href="structmetadata__def.html#6f8f419c6df905390a4982fc51fe97d2">00090</a>   uint32_t <a class="code" href="structmetadata__def.html#6f8f419c6df905390a4982fc51fe97d2">ino</a>;                 
<a name="l00091"></a><a class="code" href="structmetadata__def.html#1c1e1d7dd8c5dc3c26c6e13aff6c4b8a">00091</a>   uint32_t <a class="code" href="structmetadata__def.html#1c1e1d7dd8c5dc3c26c6e13aff6c4b8a">gen</a>;                 
<a name="l00092"></a><a class="code" href="structmetadata__def.html#9758f666ebf7e599bee43427cb373aef">00092</a>   <a class="code" href="structzfs__fh__def.html">zfs_fh</a> <a class="code" href="structmetadata__def.html#9758f666ebf7e599bee43427cb373aef">master_fh</a>;             
<a name="l00093"></a><a class="code" href="structmetadata__def.html#873ab7f8382f02b0d597dda3b69bd99c">00093</a>   uint64_t <a class="code" href="structmetadata__def.html#873ab7f8382f02b0d597dda3b69bd99c">local_version</a>;       
<a name="l00094"></a><a class="code" href="structmetadata__def.html#240fb93f2461f65620ffdebdf543c267">00094</a>   uint64_t <a class="code" href="structmetadata__def.html#240fb93f2461f65620ffdebdf543c267">master_version</a>;      
<a name="l00095"></a><a class="code" href="structmetadata__def.html#b92d13e81b30eeb0d3736845723160a6">00095</a>   uint32_t <a class="code" href="structmetadata__def.html#b92d13e81b30eeb0d3736845723160a6">modetype</a>;            
<a name="l00096"></a><a class="code" href="structmetadata__def.html#0ccf134ba580bd80065fdb7b637497ba">00096</a>   uint32_t <a class="code" href="structmetadata__def.html#0ccf134ba580bd80065fdb7b637497ba">uid</a>;                 
<a name="l00097"></a><a class="code" href="structmetadata__def.html#d184d7daab2875d8028f8c3710ec4ab5">00097</a>   uint32_t <a class="code" href="structmetadata__def.html#d184d7daab2875d8028f8c3710ec4ab5">gid</a>;                 
<a name="l00098"></a><a class="code" href="structmetadata__def.html#5aa29e625066e6b24ffd1bfda809627a">00098</a>   uint32_t <a class="code" href="structmetadata__def.html#5aa29e625066e6b24ffd1bfda809627a">parent_dev</a>;          
<a name="l00099"></a><a class="code" href="structmetadata__def.html#f3a3b4e74f8a7d24d5c5b065b6d1e79f">00099</a>   uint32_t <a class="code" href="structmetadata__def.html#f3a3b4e74f8a7d24d5c5b065b6d1e79f">parent_ino</a>;          
<a name="l00100"></a><a class="code" href="structmetadata__def.html#44389808da938a4a15b74a2494d2155a">00100</a>   <span class="keywordtype">char</span> <a class="code" href="structmetadata__def.html#44389808da938a4a15b74a2494d2155a">name</a>[<a class="code" href="metadata_8h.html#a8aad131b2bdf5363ac23772a40b95cd">METADATA_NAME_SIZE</a>];
<a name="l00101"></a>00101 } <a class="code" href="structmetadata__def.html" title="Metadata for file.">metadata</a>;
<a name="l00102"></a>00102 
<a name="l00104"></a><a class="code" href="structfh__mapping__def.html">00104</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structfh__mapping__def.html" title="File handle mapping.">fh_mapping_def</a>
<a name="l00105"></a>00105 {
<a name="l00106"></a><a class="code" href="structfh__mapping__def.html#fee695009bedf52d3254d896ecd553b6">00106</a>   uint32_t <a class="code" href="structfh__mapping__def.html#fee695009bedf52d3254d896ecd553b6">slot_status</a>;         
<a name="l00107"></a><a class="code" href="structfh__mapping__def.html#2a30084975e626aa12528db6b6c62d74">00107</a>   <a class="code" href="structzfs__fh__def.html">zfs_fh</a> <a class="code" href="structfh__mapping__def.html#2a30084975e626aa12528db6b6c62d74">master_fh</a>;             
<a name="l00108"></a><a class="code" href="structfh__mapping__def.html#e7ebb3a283c6b00af1322a8a08fd8430">00108</a>   <a class="code" href="structzfs__fh__def.html">zfs_fh</a> <a class="code" href="structfh__mapping__def.html#e7ebb3a283c6b00af1322a8a08fd8430">local_fh</a>;              
<a name="l00109"></a>00109 } <a class="code" href="structfh__mapping__def.html" title="File handle mapping.">fh_mapping</a>;
<a name="l00110"></a>00110 
<a name="l00111"></a><a class="code" href="metadata_8h.html#aa0b32aa8b3bfdc86dc151fcd869b2d4">00111</a> <span class="preprocessor">#define METADATA_COMPLETE       1       </span>
<a name="l00112"></a><a class="code" href="metadata_8h.html#030952713d33815180e319656797ffaf">00112</a> <span class="preprocessor">#define METADATA_UPDATED_TREE   2       </span>
<a name="l00113"></a><a class="code" href="metadata_8h.html#3a900fa19d9307f11b3962972c302389">00113</a> <span class="preprocessor">#define METADATA_MODIFIED_TREE  4       </span>
<a name="l00114"></a><a class="code" href="metadata_8h.html#8f16e74e7eb9aedcde017e5d1a0bcdd1">00114</a> <span class="preprocessor">#define METADATA_SHADOW         16      </span>
<a name="l00115"></a><a class="code" href="metadata_8h.html#af3ee99dc104bd261dd8d791f4b866fe">00115</a> <span class="preprocessor">#define METADATA_SHADOW_TREE    32      </span>
<a name="l00117"></a>00117 <span class="preprocessor">#include "volume.h"</span>
<a name="l00118"></a>00118 <span class="preprocessor"></span><span class="preprocessor">#include "<a class="code" href="fh_8h.html" title="File handle functions.">fh.h</a>"</span>
<a name="l00119"></a>00119 
<a name="l00120"></a>00120 <span class="keyword">extern</span> <a class="code" href="hashfile_8h.html#2d05e5049721cf3117dd6b34e20d4f65">hashval_t</a> <a class="code" href="metadata_8c.html#a2f8c98f291f07e359e54e823f6c711e">metadata_hash</a> (<span class="keyword">const</span> <span class="keywordtype">void</span> *x);
<a name="l00121"></a>00121 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="metadata_8c.html#546ae02aa9b6fa4eff2db0ffd01aaa54">metadata_eq</a> (<span class="keyword">const</span> <span class="keywordtype">void</span> *x, <span class="keyword">const</span> <span class="keywordtype">void</span> *y);
<a name="l00122"></a>00122 
<a name="l00123"></a>00123 <span class="preprocessor">#if BYTE_ORDER != LITTLE_ENDIAN</span>
<a name="l00124"></a>00124 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="metadata_8h.html#a8899553c6a058d838cf90a8c32a4d44">metadata_decode</a> (<span class="keywordtype">void</span> *x);
<a name="l00125"></a>00125 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="metadata_8h.html#b60df122c6463b5429697c66b04efd2e">metadata_encode</a> (<span class="keywordtype">void</span> *x);
<a name="l00126"></a>00126 <span class="preprocessor">#else</span>
<a name="l00127"></a><a class="code" href="metadata_8h.html#a8899553c6a058d838cf90a8c32a4d44">00127</a> <span class="preprocessor"></span><span class="preprocessor">#define metadata_decode NULL</span>
<a name="l00128"></a><a class="code" href="metadata_8h.html#b60df122c6463b5429697c66b04efd2e">00128</a> <span class="preprocessor"></span><span class="preprocessor">#define metadata_encode NULL</span>
<a name="l00129"></a>00129 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00130"></a>00130 <span class="preprocessor"></span>
<a name="l00131"></a>00131 <span class="keyword">extern</span> <a class="code" href="zfs-prot_8h.html#fd6f88a62c177fab51044d30a2bc4587">ftype</a> <a class="code" href="metadata_8c.html#cca3aa646269f83054c58b6ca1a53b7f">zfs_mode_to_ftype</a> (uint32_t mode);
<a name="l00132"></a>00132 <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="metadata_8c.html#1bd74b569275131df722d300d754e43b">init_volume_metadata</a> (<a class="code" href="structvolume__def.html" title="Volume description.">volume</a> vol);
<a name="l00133"></a>00133 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="metadata_8c.html#309a7771f53cdf846bf361559dd4774c">close_volume_metadata</a> (<a class="code" href="structvolume__def.html" title="Volume description.">volume</a> vol);
<a name="l00134"></a>00134 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="metadata_8c.html#7310c189acd2b5398864012f4fe8a48a">close_interval_file</a> (<a class="code" href="structinterval__tree__def.html" title="The interval tree.">interval_tree</a> tree);
<a name="l00135"></a>00135 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="metadata_8c.html#2dc9d9eea2254d262d8c98b3dfced2cd">close_journal_file</a> (<a class="code" href="structjournal__def.html" title="Journal datatype.">journal_t</a> journal);
<a name="l00136"></a>00136 <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="metadata_8c.html#acf9c322b0e516c9684f67d2daaed9d1">flush_interval_tree</a> (<a class="code" href="structvolume__def.html" title="Volume description.">volume</a> vol, <a class="code" href="structinternal__fh__def.html" title="Internal information about file handle.">internal_fh</a> fh,
<a name="l00137"></a>00137                                 <a class="code" href="metadata_8h.html#548e14ed3091a841ff4c0eb02062d78e">metadata_type</a> type);
<a name="l00138"></a>00138 <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="metadata_8c.html#65345a169c527832eb9533c81d419d3e">append_interval</a> (<a class="code" href="structvolume__def.html" title="Volume description.">volume</a> vol, <a class="code" href="structinternal__fh__def.html" title="Internal information about file handle.">internal_fh</a> fh,
<a name="l00139"></a>00139                              <a class="code" href="metadata_8h.html#548e14ed3091a841ff4c0eb02062d78e">metadata_type</a> type,
<a name="l00140"></a>00140                              uint64_t start, uint64_t end);
<a name="l00141"></a>00141 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="metadata_8c.html#9b5f2db967551a3e834b9b2aa973554f">set_attr_version</a> (<a class="code" href="structfattr__def.html">fattr</a> *attr, <a class="code" href="structmetadata__def.html" title="Metadata for file.">metadata</a> *meta);
<a name="l00142"></a>00142 <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="metadata_8c.html#a6db1869c9245582c4cad2ec5f3dfdbf">lookup_metadata</a> (<a class="code" href="structvolume__def.html" title="Volume description.">volume</a> vol, <a class="code" href="structzfs__fh__def.html">zfs_fh</a> *fh, <a class="code" href="structmetadata__def.html" title="Metadata for file.">metadata</a> *meta,
<a name="l00143"></a>00143                              <span class="keywordtype">bool</span> <a class="code" href="hashtab_8h.html#0643c315e50716d291891390d21527ea">insert</a>);
<a name="l00144"></a>00144 <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="metadata_8c.html#d2ea3c7de573fc6f1d7dc66a69d6fe83">get_metadata</a> (<a class="code" href="structvolume__def.html" title="Volume description.">volume</a> vol, <a class="code" href="structzfs__fh__def.html">zfs_fh</a> *fh, <a class="code" href="structmetadata__def.html" title="Metadata for file.">metadata</a> *meta);
<a name="l00145"></a>00145 <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="metadata_8c.html#443d6b92e7a0693e943650e0e276decf">get_fh_mapping_for_master_fh</a> (<a class="code" href="structvolume__def.html" title="Volume description.">volume</a> vol, <a class="code" href="structzfs__fh__def.html">zfs_fh</a> *master_fh,
<a name="l00146"></a>00146                                           <a class="code" href="structfh__mapping__def.html" title="File handle mapping.">fh_mapping</a> *map);
<a name="l00147"></a>00147 <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="metadata_8c.html#58f86881a12b09f757eff3241615ea2d">flush_metadata</a> (<a class="code" href="structvolume__def.html" title="Volume description.">volume</a> vol, <a class="code" href="structmetadata__def.html" title="Metadata for file.">metadata</a> *meta);
<a name="l00148"></a>00148 <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="metadata_8c.html#592bd1089b07aefa0a78331e28d15004">set_metadata</a> (<a class="code" href="structvolume__def.html" title="Volume description.">volume</a> vol, <a class="code" href="structinternal__fh__def.html" title="Internal information about file handle.">internal_fh</a> fh, uint32_t flags,
<a name="l00149"></a>00149                           uint64_t local_version, uint64_t master_version);
<a name="l00150"></a>00150 <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="metadata_8c.html#6f233b6f69a1cdcb8173d7bfbb2ccbab">set_metadata_flags</a> (<a class="code" href="structvolume__def.html" title="Volume description.">volume</a> vol, <a class="code" href="structinternal__fh__def.html" title="Internal information about file handle.">internal_fh</a> fh, uint32_t flags);
<a name="l00151"></a>00151 <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="metadata_8c.html#93fbef76cf9854a4544d6fb002cf29c0">set_metadata_master_fh</a> (<a class="code" href="structvolume__def.html" title="Volume description.">volume</a> vol, <a class="code" href="structinternal__fh__def.html" title="Internal information about file handle.">internal_fh</a> fh,
<a name="l00152"></a>00152                                     <a class="code" href="structzfs__fh__def.html">zfs_fh</a> *master_fh);
<a name="l00153"></a>00153 <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="metadata_8c.html#897bd01c8723d93be02c6b630a32c497">inc_local_version</a> (<a class="code" href="structvolume__def.html" title="Volume description.">volume</a> vol, <a class="code" href="structinternal__fh__def.html" title="Internal information about file handle.">internal_fh</a> fh);
<a name="l00154"></a>00154 <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="metadata_8c.html#a1cd65ebea4df0e0e9f4f9bc5fb3912c">inc_local_version_and_modified</a> (<a class="code" href="structvolume__def.html" title="Volume description.">volume</a> vol, <a class="code" href="structinternal__fh__def.html" title="Internal information about file handle.">internal_fh</a> fh);
<a name="l00155"></a>00155 <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="metadata_8c.html#85c5601fec008dc29019077393ec9506">delete_metadata</a> (<a class="code" href="structvolume__def.html" title="Volume description.">volume</a> vol, <a class="code" href="structmetadata__def.html" title="Metadata for file.">metadata</a> *meta, uint32_t dev,
<a name="l00156"></a>00156                              uint32_t ino, uint32_t parent_dev,
<a name="l00157"></a>00157                              uint32_t parent_ino, <span class="keywordtype">string</span> *name);
<a name="l00158"></a>00158 <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="metadata_8c.html#97aad1538e86290b320767a0d6480d19">delete_metadata_of_created_file</a> (<a class="code" href="structvolume__def.html" title="Volume description.">volume</a> vol, <a class="code" href="structzfs__fh__def.html">zfs_fh</a> *fh,
<a name="l00159"></a>00159                                              <a class="code" href="structmetadata__def.html" title="Metadata for file.">metadata</a> *meta);
<a name="l00160"></a>00160 <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="metadata_8c.html#976d00e136b8bd8d1a9649593a09c697">load_interval_trees</a> (<a class="code" href="structvolume__def.html" title="Volume description.">volume</a> vol, <a class="code" href="structinternal__fh__def.html" title="Internal information about file handle.">internal_fh</a> fh);
<a name="l00161"></a>00161 <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="metadata_8c.html#61e7d7f277cd3c4caf628287c8e508c2">save_interval_trees</a> (<a class="code" href="structvolume__def.html" title="Volume description.">volume</a> vol, <a class="code" href="structinternal__fh__def.html" title="Internal information about file handle.">internal_fh</a> fh);
<a name="l00162"></a>00162 <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="metadata_8h.html#3ade408acdb1b20b7599e7779a0c5b84">init_hardlinks</a> (<a class="code" href="structvolume__def.html" title="Volume description.">volume</a> vol, <a class="code" href="structzfs__fh__def.html">zfs_fh</a> *fh, <a class="code" href="structmetadata__def.html" title="Metadata for file.">metadata</a> *meta,
<a name="l00163"></a>00163                             <a class="code" href="structhardlink__list__def.html" title="A hashed variable-sized array.">hardlink_list</a> hl);
<a name="l00164"></a>00164 <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="metadata_8c.html#518c9b4dbad8f0c6a586a469148a10a3">read_hardlinks</a> (<a class="code" href="structvolume__def.html" title="Volume description.">volume</a> vol, <a class="code" href="structzfs__fh__def.html">zfs_fh</a> *fh, <a class="code" href="structmetadata__def.html" title="Metadata for file.">metadata</a> *meta,
<a name="l00165"></a>00165                             <a class="code" href="structhardlink__list__def.html" title="A hashed variable-sized array.">hardlink_list</a> hl);
<a name="l00166"></a>00166 <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="metadata_8c.html#24a97564272128df1634ba54c890c594">metadata_hardlink_insert</a> (<a class="code" href="structvolume__def.html" title="Volume description.">volume</a> vol, <a class="code" href="structzfs__fh__def.html">zfs_fh</a> *fh, <a class="code" href="structmetadata__def.html" title="Metadata for file.">metadata</a> *meta,
<a name="l00167"></a>00167                                       uint32_t parent_dev, uint32_t parent_ino,
<a name="l00168"></a>00168                                       <span class="keywordtype">string</span> *name);
<a name="l00169"></a>00169 <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="metadata_8c.html#9afd87ae1e63ab84565a636402d3ce87">metadata_hardlink_replace</a> (<a class="code" href="structvolume__def.html" title="Volume description.">volume</a> vol, <a class="code" href="structzfs__fh__def.html">zfs_fh</a> *fh, <a class="code" href="structmetadata__def.html" title="Metadata for file.">metadata</a> *meta,
<a name="l00170"></a>00170                                        uint32_t old_parent_dev,
<a name="l00171"></a>00171                                        uint32_t old_parent_ino,
<a name="l00172"></a>00172                                        <span class="keywordtype">string</span> *old_name,
<a name="l00173"></a>00173                                        uint32_t new_parent_dev,
<a name="l00174"></a>00174                                        uint32_t new_parent_ino,
<a name="l00175"></a>00175                                        <span class="keywordtype">string</span> *new_name, <span class="keywordtype">bool</span> shadow);
<a name="l00176"></a>00176 <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="metadata_8c.html#67f5457a19aa44cb6ef37dfc9b5af2af">metadata_hardlink_set</a> (<a class="code" href="structvolume__def.html" title="Volume description.">volume</a> vol, <a class="code" href="structzfs__fh__def.html">zfs_fh</a> *fh, <a class="code" href="structmetadata__def.html" title="Metadata for file.">metadata</a> *meta,
<a name="l00177"></a>00177                                    uint32_t parent_dev, uint32_t parent_ino,
<a name="l00178"></a>00178                                    <span class="keywordtype">string</span> *name);
<a name="l00179"></a>00179 <span class="keyword">extern</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="metadata_8c.html#8aa2d9597003dbf4b52e8df0acbb0d71">metadata_n_hardlinks</a> (<a class="code" href="structvolume__def.html" title="Volume description.">volume</a> vol, <a class="code" href="structzfs__fh__def.html">zfs_fh</a> *fh,
<a name="l00180"></a>00180                                           <a class="code" href="structmetadata__def.html" title="Metadata for file.">metadata</a> *meta);
<a name="l00181"></a>00181 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="metadata_8c.html#09c2cc02c843bcc92e776cf3f63f9ea5">get_local_path_from_metadata</a> (<span class="keywordtype">string</span> *path, <a class="code" href="structvolume__def.html" title="Volume description.">volume</a> vol, <a class="code" href="structzfs__fh__def.html">zfs_fh</a> *fh);
<a name="l00182"></a>00182 <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="metadata_8c.html#9785edb2815efbcd6f2a52169997151e">read_journal</a> (<a class="code" href="structvolume__def.html" title="Volume description.">volume</a> vol, <a class="code" href="structzfs__fh__def.html">zfs_fh</a> *fh, <a class="code" href="structjournal__def.html" title="Journal datatype.">journal_t</a> journal);
<a name="l00183"></a>00183 <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="metadata_8c.html#ef49d0ce915f8bc578649f4ece027342">write_journal</a> (<a class="code" href="structvolume__def.html" title="Volume description.">volume</a> vol, <a class="code" href="structzfs__fh__def.html">zfs_fh</a> *fh, <a class="code" href="structjournal__def.html" title="Journal datatype.">journal_t</a> journal);
<a name="l00184"></a>00184 <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="metadata_8c.html#31ca0ee68a26321afbe6dd39d1b2e117">add_journal_entry</a> (<a class="code" href="structvolume__def.html" title="Volume description.">volume</a> vol, <a class="code" href="structjournal__def.html" title="Journal datatype.">journal_t</a> journal, <a class="code" href="structzfs__fh__def.html">zfs_fh</a> *fh,
<a name="l00185"></a>00185                                <a class="code" href="structzfs__fh__def.html">zfs_fh</a> *local_fh, <a class="code" href="structzfs__fh__def.html">zfs_fh</a> *master_fh,
<a name="l00186"></a>00186                                uint64_t master_version, <span class="keywordtype">string</span> *name,
<a name="l00187"></a>00187                                <a class="code" href="journal_8h.html#1f70a09ba560f8046f05a1aed1521e0b">journal_operation_t</a> oper);
<a name="l00188"></a>00188 <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="metadata_8c.html#911d4e4e10147ecbf55f7d921d2f0d71">add_journal_entry_meta</a> (<a class="code" href="structvolume__def.html" title="Volume description.">volume</a> vol, <a class="code" href="structjournal__def.html" title="Journal datatype.">journal_t</a> journal, <a class="code" href="structzfs__fh__def.html">zfs_fh</a> *fh,
<a name="l00189"></a>00189                                     <a class="code" href="structmetadata__def.html" title="Metadata for file.">metadata</a> *meta, <span class="keywordtype">string</span> *name,
<a name="l00190"></a>00190                                     <a class="code" href="journal_8h.html#1f70a09ba560f8046f05a1aed1521e0b">journal_operation_t</a> oper);
<a name="l00191"></a>00191 <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="metadata_8c.html#bbb4ba5f042b5630bb1bb14735c8026f">create_shadow_path</a> (<span class="keywordtype">string</span> *path, <a class="code" href="structvolume__def.html" title="Volume description.">volume</a> vol, <a class="code" href="structzfs__fh__def.html">zfs_fh</a> *fh,
<a name="l00192"></a>00192                                 <span class="keywordtype">string</span> *name);
<a name="l00193"></a>00193 
<a name="l00194"></a>00194 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="metadata_8c.html#8409ce6494102bda76a0b2a2e1e210c0">initialize_metadata_c</a> (<span class="keywordtype">void</span>);
<a name="l00195"></a>00195 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="metadata_8c.html#3ada2ea3ac4856cb87415dbed528adc1">cleanup_metadata_c</a> (<span class="keywordtype">void</span>);
<a name="l00196"></a>00196 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="text-align: right;"><small>Generated on Fri Aug 6 00:39:37 2010 for zlomekFS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.2 </small></address>
</body>
</html>
