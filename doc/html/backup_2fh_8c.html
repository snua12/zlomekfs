<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>zlomekFS: fh.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul>
</div>
<div class="nav">
<a class="el" href="dir_21c430ab3b7001ae39034eae6f7edf71.html">zfsd</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_ac94841c51e61ddc7acc56e12a771012.html">backup</a></div>
<h1>backup/fh.c File Reference</h1>File handle functions. <a href="#_details">More...</a>
<p>
<code>#include &quot;<a class="el" href="backup_2system_8h-source.html">system.h</a>&quot;</code><br>
<code>#include &lt;inttypes.h&gt;</code><br>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;sys/types.h&gt;</code><br>
<code>#include &lt;sys/stat.h&gt;</code><br>
<code>#include &lt;unistd.h&gt;</code><br>
<code>#include &lt;time.h&gt;</code><br>
<code>#include &lt;errno.h&gt;</code><br>
<code>#include &quot;<a class="el" href="backup_2pthread-wrapper_8h-source.html">pthread-wrapper.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2fh_8h-source.html">fh.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2cap_8h-source.html">cap.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2alloc-pool_8h-source.html">alloc-pool.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2crc32_8h-source.html">crc32.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2hashtab_8h-source.html">hashtab.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2fibheap_8h-source.html">fibheap.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2log_8h-source.html">log.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2memory_8h-source.html">memory.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2network_8h-source.html">network.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2varray_8h-source.html">varray.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2journal_8h-source.html">journal.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2metadata_8h-source.html">metadata.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2zfs-prot_8h-source.html">zfs-prot.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2user-group_8h-source.html">user-group.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2dir_8h-source.html">dir.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2update_8h-source.html">update.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2config_8h-source.html">config.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2version_8h-source.html">version.h</a>&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#21f928ea5f1faff84b987c2d49bab654">INTERNAL_FH_HASH</a>(FH)&nbsp;&nbsp;&nbsp;(ZFS_FH_HASH (&amp;(FH)-&gt;local_fh))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#f5938db20a68786f3410b4c4f1a1fab3">VIRTUAL_DIR_HASH</a>(VD)&nbsp;&nbsp;&nbsp;(ZFS_FH_HASH (&amp;(VD)-&gt;fh))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#bce8453fa2be68bd5929718027fd3569">VIRTUAL_DIR_HASH_NAME</a>(VD)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#749b9136ff0a3c79d8c4290c5bbb889d">DENTRY_NEVER_CLEANUP</a>(DENTRY)</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#3d16b4e3f7afb2fef9e1ab7183b2ea60">make_space_in_conflict_dir</a> (<a class="el" href="structvolume__def.html">volume</a> *volp, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *conflictp, bool exists, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="fibheap_8h.html#2ba6cc2f89ceacb7feea163f4d66398e">fibheapkey_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#d956a6bcc8b248d323cb736260f8b6d5">dentry_key</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#34459c81e9db0c00f9415b8b83c7ca79">dentry_should_have_cleanup_node</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#ff0991aa880a2f20aef29dd9c5ba178d">dentry_update_cleanup_node</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#806ccaf2cf6428f4309a50c569a54c96">cleanup_unused_dentries_compare</a> (const void *p1, const void *p2)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#46fefc2be60e4beed2ad89ea7eb4a323">cleanup_unused_dentries</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#aba4eabd8344d82f242efad321c7832f">cleanup_dentry_thread_main</a> (ATTRIBUTE_UNUSED void *data)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="hashtab_8h.html#fb05a131363b0de134535fc5f7b01dc0">hash_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#94d7b3dd183c0c8d15a6daa1578c9319">internal_fh_hash</a> (const void *x)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="hashtab_8h.html#fb05a131363b0de134535fc5f7b01dc0">hash_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#12afc7840c334961dcd99885c2349bb8">internal_dentry_hash</a> (const void *x)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="hashtab_8h.html#fb05a131363b0de134535fc5f7b01dc0">hash_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#e8c2edd8e78fe4758567d62aec0e91e4">internal_dentry_hash_name</a> (const void *x)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#a3013c06d828e11c6d2b056a99f1c1ff">internal_fh_eq</a> (const void *xx, const void *yy)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#a48729af296248e632b8f240ac13be70">set_lock_info</a> (<a class="el" href="structlock__info__def.html">lock_info</a> *li)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#7832f918945215af7cd2de05fc6604a2">set_owned</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry, unsigned int level)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#2943c1912ed3d6805bf30d6310519939">clear_owned</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#ae9d3f778c30b82a1eb12ef16ba16ec7">is_owned</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#4dee56d1c8d410e4f595b77e61f988bb">get_level</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#21e035140629764ed1a3ed6c0de23bc3">internal_dentry_eq</a> (const void *xx, const void *yy)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#3cf4b0024d0e8cd29e57009986410a38">internal_dentry_eq_name</a> (const void *xx, const void *yy)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#56dd89ef05da03bb82b7ff2d02a3fae7">zfs_fh_lookup</a> (<a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh, <a class="el" href="structvolume__def.html">volume</a> *volp, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *dentryp, <a class="el" href="structvirtual__dir__def.html">virtual_dir</a> *vdp, bool delete_volume_p)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#4369b087b71e1339cff3184f4863590b">zfs_fh_lookup_nolock</a> (<a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh, <a class="el" href="structvolume__def.html">volume</a> *volp, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *dentryp, <a class="el" href="structvirtual__dir__def.html">virtual_dir</a> *vdp, bool delete_volume_p)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#d4f866d0e859ea5b309a0316c9ba82e6">acquire_dentry</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#dba0f21d712309394992dba07fac7f02">release_dentry</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#eaa5c46027cebc0eff43f4c7d3bfcc86">vd_lookup</a> (<a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#f995be6e56b3a839133217f0cc3ef181">vd_lookup_name_dirstamp</a> (<a class="el" href="structvirtual__dir__def.html">virtual_dir</a> parent, <a class="el" href="structstring__def.html">string</a> *name, time_t *dirstamp)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#c14e8d0673bcce8f066e26f32a6059ce">vd_lookup_name</a> (<a class="el" href="structvirtual__dir__def.html">virtual_dir</a> parent, <a class="el" href="structstring__def.html">string</a> *name)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#8cb3cbb2d678f4c5dd957860bef32010">dentry_lookup</a> (<a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#65ee5b84086c0e9c0328543d5094a6c5">dentry_lookup_name_nolock</a> (<a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> parent, <a class="el" href="structstring__def.html">string</a> *name)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#2314960b1bbbccdc9f5de556cba01ee5">dentry_lookup_name</a> (<a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> parent, <a class="el" href="structstring__def.html">string</a> *name)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#f01bb3357770c86fde4bbc8b2046a557">dentry_lookup_path</a> (<a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> start, <a class="el" href="structstring__def.html">string</a> *path)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#7deec7e5a0d5cfec15604654622c5261">dentry_lookup_local_path</a> (<a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structstring__def.html">string</a> *local_path)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#50a8ee91cf7279f7980d3274be239c38">internal_dentry_lock</a> (unsigned int level, <a class="el" href="structvolume__def.html">volume</a> *volp, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *dentryp, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *tmp_fh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#25399c7c011c8db17106e51083bfe291">internal_dentry_unlock</a> (<a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#da95c07b441d3eb404b765d35b06d266">internal_dentry_lock2</a> (unsigned int level1, unsigned int level2, <a class="el" href="structvolume__def.html">volume</a> *volp, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *dentry1p, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *dentry2p, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *tmp_fh1, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *tmp_fh2)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#004bcac5a4521260bca2e2af84972285">set_master_fh</a> (<a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structinternal__fh__def.html">internal_fh</a> fh, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *master_fh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#25ea349817dc9fdcffa0082254961c90">clear_meta</a> (<a class="el" href="structinternal__fh__def.html">internal_fh</a> fh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="structinternal__fh__def.html">internal_fh</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#861beb8fdd8e3dce3a30518f00fe78a0">internal_fh_create</a> (<a class="el" href="structzfs__fh__def.html">zfs_fh</a> *local_fh, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *master_fh, <a class="el" href="structfattr__def.html">fattr</a> *attr, <a class="el" href="structmetadata__def.html">metadata</a> *meta, <a class="el" href="structvolume__def.html">volume</a> vol, unsigned int level)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#dc6aae35ee275ee2fdca7a2de3389822">internal_fh_destroy_stage1</a> (<a class="el" href="structinternal__fh__def.html">internal_fh</a> fh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#0162de3b7747ebec6038cb55f58109e6">internal_fh_destroy_stage2</a> (<a class="el" href="structinternal__fh__def.html">internal_fh</a> fh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#d66e60c73dc9dad2c65d272496d9cd30">print_fh_htab</a> (FILE *f)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#36831320b72fcaf2ca2b169fbe126bf4">debug_fh_htab</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#25d627140eb6e87241af8459e1ec8ac8">print_subdentries</a> (FILE *f, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#0b5dd761ac09bd1c3e46ebab554c23d3">debug_subdentries</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#8154ba3eab219dc31be66331486de750">internal_dentry_add_to_dir</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> parent, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#0d1e01348fcb480a5dfdfc561dd78c07">internal_dentry_del_from_dir</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#5213532e8f0febb49ab91f7bfb9997b0">internal_dentry_create</a> (<a class="el" href="structzfs__fh__def.html">zfs_fh</a> *local_fh, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *master_fh, <a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> parent, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structfattr__def.html">fattr</a> *attr, <a class="el" href="structmetadata__def.html">metadata</a> *meta, unsigned int level)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#1e87a910684e1ba16db95f10db510d93">internal_dentry_create_ns</a> (<a class="el" href="structzfs__fh__def.html">zfs_fh</a> *local_fh, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *master_fh, <a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> parent, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structfattr__def.html">fattr</a> *attr, <a class="el" href="structmetadata__def.html">metadata</a> *meta, unsigned int level)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#090008bde0f42c0a0d0c7a3aad5f01ff">get_dentry</a> (<a class="el" href="structzfs__fh__def.html">zfs_fh</a> *local_fh, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *master_fh, <a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dir, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structfattr__def.html">fattr</a> *attr, <a class="el" href="structmetadata__def.html">metadata</a> *meta)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#98b93d3a61d62abf54b63d0ad69cee63">delete_dentry</a> (<a class="el" href="structvolume__def.html">volume</a> *volp, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *dirp, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *dir_fh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#7bfcf103cc9a1ffe0478066b25cf0535">internal_dentry_link</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> orig, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> parent, <a class="el" href="structstring__def.html">string</a> *name)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#53d039d599e7fe36af4474e9186ddeea">internal_dentry_move</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *from_dirp, <a class="el" href="structstring__def.html">string</a> *from_name, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *to_dirp, <a class="el" href="structstring__def.html">string</a> *to_name, <a class="el" href="structvolume__def.html">volume</a> *volp, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *from_fh, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *to_fh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#76e54c0d1e1c21fb9d57d24b13de05bd">internal_dentry_destroy_subdentries</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *tmp_fh, bool invalidate)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#7a37ecd8655e55cacfdefafc3c346559">internal_dentry_destroy</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry, bool clear_volume_root, bool invalidate, bool volume_root_p)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#175d40b2a7407b9f9937c30a4a5640f9">create_conflict</a> (<a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dir, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *local_fh, <a class="el" href="structfattr__def.html">fattr</a> *attr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#12fcabe197197159092dfb7e5a943e15">add_file_to_conflict_dir</a> (<a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> conflict, bool exists, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh, <a class="el" href="structfattr__def.html">fattr</a> *attr, <a class="el" href="structmetadata__def.html">metadata</a> *meta)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#85cabd83c7f7d5629cfe8ea0c7da612b">try_resolve_conflict</a> (<a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> conflict)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#b5baf7233d31eac450ce2da650d38a85">conflict_local_dentry</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> conflict)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#b679b32ae12335a0a19fab427730a97e">conflict_remote_dentry</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> conflict)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#55f852506029a7b69002e96b359881b8">conflict_other_dentry</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> conflict, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#fc78ab179298144b9f2f500110659c7d">cancel_conflict</a> (<a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> conflict)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="hashtab_8h.html#fb05a131363b0de134535fc5f7b01dc0">hash_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#87624e600d9a3ca05fc4130e8b3c546b">virtual_dir_hash</a> (const void *x)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="hashtab_8h.html#fb05a131363b0de134535fc5f7b01dc0">hash_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#3a1c524498023d344b0a50f61710e957">virtual_dir_hash_name</a> (const void *x)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#b647aa4a1c654412e939ea91669a8db8">virtual_dir_eq</a> (const void *xx, const void *yy)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#87000f4021aedad7eb6504817418543f">virtual_dir_eq_name</a> (const void *xx, const void *yy)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#7a251cf9ea14d69dcc4987c1fc0ccee8">virtual_dir_create</a> (<a class="el" href="structvirtual__dir__def.html">virtual_dir</a> parent, const char *name)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#16f9091ef5a42f2dc51d052efd3204e9">virtual_dir_destroy</a> (<a class="el" href="structvirtual__dir__def.html">virtual_dir</a> vd)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#1c2d9fd002758c3a3a569819f1deb9b7">virtual_root_create</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#29061344fcbe91649692f59872c1d9e6">virtual_root_destroy</a> (<a class="el" href="structvirtual__dir__def.html">virtual_dir</a> dir)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#2d82dccda4a8638279877471dea475fe">virtual_mountpoint_create</a> (<a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#b000229493a3fc66db907254aa7d8c09">virtual_mountpoint_destroy</a> (<a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#e73623d02e39544a31a39aa06761acd7">virtual_dir_set_fattr</a> (<a class="el" href="structvirtual__dir__def.html">virtual_dir</a> vd)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#ef5736581867cbf38ec49d9fcfee341c">print_virtual_tree_node</a> (FILE *f, <a class="el" href="structvirtual__dir__def.html">virtual_dir</a> vd, unsigned int indent)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#709d39f9778814c3335adc4939343cee">print_virtual_tree</a> (FILE *f)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#482816e87ac2a79cd4219eb86dd439e6">debug_virtual_tree</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#6c9c424d261a183cdf4bbe0e724b564a">initialize_fh_c</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#debe6f14d598f841f48955be99ebac0a">cleanup_fh_c</a> (void)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structzfs__fh__def.html">zfs_fh</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#aeaeb70a4389345c638f589b8357cb45">root_fh</a> = {NODE_NONE, VOLUME_ID_VIRTUAL, VIRTUAL_DEVICE, ROOT_INODE, 1}</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structzfs__fh__def.html">zfs_fh</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#09f04f0b6d113df8eba9e2e215fa2b04">undefined_fh</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="structvirtual__dir__def.html">virtual_dir</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#e4cac4bc0c5fa65508b79428d7395b36">root</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="structalloc__pool__def.html">alloc_pool</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#3f446354289ea5566a98f398c4c8aa66">fh_pool</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="structalloc__pool__def.html">alloc_pool</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#4cce6cf1cd42fc695a237dde2b47af2d">dentry_pool</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structhtab__def.html">htab_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#ac1621005b0a1563c7a740cbac2ef44d">fh_htab</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structhtab__def.html">htab_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#50e9c7e5731f9c1ddd313dea77cff407">dentry_htab</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structhtab__def.html">htab_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#cbd10c01cf3afda1d322fd1594896b68">dentry_htab_name</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="structalloc__pool__def.html">alloc_pool</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#569aa68ad0ee5c936992c199289051be">vd_pool</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structhtab__def.html">htab_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#abf7a9cb87e4416067ef118ff1948e27">vd_htab</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="structhtab__def.html">htab_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#373bb2598be9e8af97aa18694ec75350">vd_htab_name</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">pthread_mutex_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#6107d9eff35f5714a36635dcaa3198a2">fh_mutex</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static pthread_key_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#6474b29cdfa6d44d6e17c617e16f3a97">lock_info_key</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structfibheap__def.html">fibheap</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#d1800f7542d1b5ad7afd6f8f4e4c0607">cleanup_dentry_heap</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">pthread_mutex_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#f8dacdebeff6944a5d277435ba212944">cleanup_dentry_mutex</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">pthread_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#f82c0c931b261e7dd78e0511fd95e7a7">cleanup_dentry_thread</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">pthread_mutex_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2fh_8c.html#14d4f0f064daf73042171a677db1d0e1">cleanup_dentry_thread_in_syscall</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
File handle functions. 
<p>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="749b9136ff0a3c79d8c4290c5bbb889d"></a><!-- doxytag: member="backup/fh.c::DENTRY_NEVER_CLEANUP" ref="749b9136ff0a3c79d8c4290c5bbb889d" args="(DENTRY)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DENTRY_NEVER_CLEANUP          </td>
          <td>(</td>
          <td class="paramtype">DENTRY&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">((DENTRY)-&gt;next == (DENTRY)                                             \
   &amp;&amp; ((DENTRY)-&gt;fh-&gt;cap != NULL                                        \
       || (DENTRY)-&gt;fh-&gt;level != <a class="code" href="backup_2fh_8h.html#83bff87dfdf3d97dc7d9948c0355aa48">LEVEL_UNLOCKED</a>                         \
       || (DENTRY)-&gt;fh-&gt;reintegrating_sid != 0))
</pre></div>Dentries which should never be cleaned up. 
</div>
</div><p>
<a class="anchor" name="21f928ea5f1faff84b987c2d49bab654"></a><!-- doxytag: member="backup/fh.c::INTERNAL_FH_HASH" ref="21f928ea5f1faff84b987c2d49bab654" args="(FH)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INTERNAL_FH_HASH          </td>
          <td>(</td>
          <td class="paramtype">FH&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(ZFS_FH_HASH (&amp;(FH)-&gt;local_fh))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Hash function for internal file handle FH. 
</div>
</div><p>
<a class="anchor" name="f5938db20a68786f3410b4c4f1a1fab3"></a><!-- doxytag: member="backup/fh.c::VIRTUAL_DIR_HASH" ref="f5938db20a68786f3410b4c4f1a1fab3" args="(VD)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VIRTUAL_DIR_HASH          </td>
          <td>(</td>
          <td class="paramtype">VD&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(ZFS_FH_HASH (&amp;(VD)-&gt;fh))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Hash function for virtual_dir VD, computed from fh. 
</div>
</div><p>
<a class="anchor" name="bce8453fa2be68bd5929718027fd3569"></a><!-- doxytag: member="backup/fh.c::VIRTUAL_DIR_HASH_NAME" ref="bce8453fa2be68bd5929718027fd3569" args="(VD)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VIRTUAL_DIR_HASH_NAME          </td>
          <td>(</td>
          <td class="paramtype">VD&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">(<a class="code" href="backup_2crc32_8c.html#a4e5598af82ca76082574ea3e85bc84e">crc32_update</a> (<a class="code" href="backup_2crc32_8c.html#c8f920de0cb519e35ff1e3a4ada446ae">crc32_buffer</a> ((VD)-&gt;<a class="code" href="structnode__def.html#3030f2d6288572f0b13121800bc3dd6e">name</a>.<a class="code" href="structstring__def.html#4f661a640f55b3bda278bc4f1786b1ab">str</a>, (VD)-&gt;name.len),           \
                 &amp;(VD)-&gt;parent-&gt;fh, sizeof (<a class="code" href="structzfs__fh__def.html">zfs_fh</a>)))
</pre></div>Hash function for virtual_dir VD, computed from (parent-&gt;fh, name). 
</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="d4f866d0e859ea5b309a0316c9ba82e6"></a><!-- doxytag: member="backup/fh.c::acquire_dentry" ref="d4f866d0e859ea5b309a0316c9ba82e6" args="(internal_dentry dentry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void acquire_dentry           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Lock DENTRY and update time of last use. 
</div>
</div><p>
<a class="anchor" name="12fcabe197197159092dfb7e5a943e15"></a><!-- doxytag: member="backup/fh.c::add_file_to_conflict_dir" ref="12fcabe197197159092dfb7e5a943e15" args="(volume vol, internal_dentry conflict, bool exists, zfs_fh *fh, fattr *attr, metadata *meta)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> add_file_to_conflict_dir           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>conflict</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>exists</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfattr__def.html">fattr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmetadata__def.html">metadata</a> *&nbsp;</td>
          <td class="paramname"> <em>meta</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add a dentry to conflict dir CONFLICT on volume VOL. If EXISTS is true the file really exists so create a dentry with file handle FH, attributes ATTR and metadata META; otherwise create a virtual symlink representing non-existing file. 
</div>
</div><p>
<a class="anchor" name="fc78ab179298144b9f2f500110659c7d"></a><!-- doxytag: member="backup/fh.c::cancel_conflict" ref="fc78ab179298144b9f2f500110659c7d" args="(volume vol, internal_dentry conflict)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cancel_conflict           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>conflict</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Cancel the CONFLICT on volume VOL. 
</div>
</div><p>
<a class="anchor" name="aba4eabd8344d82f242efad321c7832f"></a><!-- doxytag: member="backup/fh.c::cleanup_dentry_thread_main" ref="aba4eabd8344d82f242efad321c7832f" args="(ATTRIBUTE_UNUSED void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void* cleanup_dentry_thread_main           </td>
          <td>(</td>
          <td class="paramtype">ATTRIBUTE_UNUSED void *&nbsp;</td>
          <td class="paramname"> <em>data</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Main function of thread freeing file handles unused for a long time. 
</div>
</div><p>
<a class="anchor" name="debe6f14d598f841f48955be99ebac0a"></a><!-- doxytag: member="backup/fh.c::cleanup_fh_c" ref="debe6f14d598f841f48955be99ebac0a" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cleanup_fh_c           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy data structures in FH.C. 
</div>
</div><p>
<a class="anchor" name="46fefc2be60e4beed2ad89ea7eb4a323"></a><!-- doxytag: member="backup/fh.c::cleanup_unused_dentries" ref="46fefc2be60e4beed2ad89ea7eb4a323" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void cleanup_unused_dentries           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Free internal dentries unused for at least MAX_INTERNAL_DENTRY_UNUSED_TIME seconds. 
</div>
</div><p>
<a class="anchor" name="806ccaf2cf6428f4309a50c569a54c96"></a><!-- doxytag: member="backup/fh.c::cleanup_unused_dentries_compare" ref="806ccaf2cf6428f4309a50c569a54c96" args="(const void *p1, const void *p2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int cleanup_unused_dentries_compare           </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>p1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>p2</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Compare the volume IDs of ZFS_FHs P1 and P2. 
</div>
</div><p>
<a class="anchor" name="25ea349817dc9fdcffa0082254961c90"></a><!-- doxytag: member="backup/fh.c::clear_meta" ref="25ea349817dc9fdcffa0082254961c90" args="(internal_fh fh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void clear_meta           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__fh__def.html">internal_fh</a>&nbsp;</td>
          <td class="paramname"> <em>fh</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Clear metadata in file handle FH. 
</div>
</div><p>
<a class="anchor" name="2943c1912ed3d6805bf30d6310519939"></a><!-- doxytag: member="backup/fh.c::clear_owned" ref="2943c1912ed3d6805bf30d6310519939" args="(internal_dentry dentry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void clear_owned           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Remove dentry DENTRY from list of dentries owned by current thread. 
</div>
</div><p>
<a class="anchor" name="b5baf7233d31eac450ce2da650d38a85"></a><!-- doxytag: member="backup/fh.c::conflict_local_dentry" ref="b5baf7233d31eac450ce2da650d38a85" args="(internal_dentry conflict)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> conflict_local_dentry           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>conflict</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the local dentry in conflict dir CONFLICT. 
</div>
</div><p>
<a class="anchor" name="55f852506029a7b69002e96b359881b8"></a><!-- doxytag: member="backup/fh.c::conflict_other_dentry" ref="55f852506029a7b69002e96b359881b8" args="(internal_dentry conflict, internal_dentry dentry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> conflict_other_dentry           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>conflict</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the other dentry in cronflict dir CONFLICT than DENTRY. 
</div>
</div><p>
<a class="anchor" name="b679b32ae12335a0a19fab427730a97e"></a><!-- doxytag: member="backup/fh.c::conflict_remote_dentry" ref="b679b32ae12335a0a19fab427730a97e" args="(internal_dentry conflict)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> conflict_remote_dentry           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>conflict</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the remote dentry in conflict dir CONFLICT. 
</div>
</div><p>
<a class="anchor" name="175d40b2a7407b9f9937c30a4a5640f9"></a><!-- doxytag: member="backup/fh.c::create_conflict" ref="175d40b2a7407b9f9937c30a4a5640f9" args="(volume vol, internal_dentry dir, string *name, zfs_fh *local_fh, fattr *attr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> create_conflict           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>local_fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfattr__def.html">fattr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create conflict directory for local file handle LOCAL_FH with attributes according to ATTR and name NAME in directory DIR on volume VOL. If such conflict directory already exists update the local file handle and attributes and return it. 
</div>
</div><p>
<a class="anchor" name="36831320b72fcaf2ca2b169fbe126bf4"></a><!-- doxytag: member="backup/fh.c::debug_fh_htab" ref="36831320b72fcaf2ca2b169fbe126bf4" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void debug_fh_htab           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Print the contents of hash table of filehandles HTAB to STDERR. 
</div>
</div><p>
<a class="anchor" name="0b5dd761ac09bd1c3e46ebab554c23d3"></a><!-- doxytag: member="backup/fh.c::debug_subdentries" ref="0b5dd761ac09bd1c3e46ebab554c23d3" args="(internal_dentry dentry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void debug_subdentries           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Print subdentries of dentry DENTRY to STDERR. 
</div>
</div><p>
<a class="anchor" name="482816e87ac2a79cd4219eb86dd439e6"></a><!-- doxytag: member="backup/fh.c::debug_virtual_tree" ref="482816e87ac2a79cd4219eb86dd439e6" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void debug_virtual_tree           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Print the virtual tree to STDERR. 
</div>
</div><p>
<a class="anchor" name="98b93d3a61d62abf54b63d0ad69cee63"></a><!-- doxytag: member="backup/fh.c::delete_dentry" ref="98b93d3a61d62abf54b63d0ad69cee63" args="(volume *volp, internal_dentry *dirp, string *name, zfs_fh *dir_fh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void delete_dentry           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a> *&nbsp;</td>
          <td class="paramname"> <em>volp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *&nbsp;</td>
          <td class="paramname"> <em>dirp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>dir_fh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy dentry NAME in directory DIR (whose file handle is DIR_FH) on volume VOL. 
</div>
</div><p>
<a class="anchor" name="d956a6bcc8b248d323cb736260f8b6d5"></a><!-- doxytag: member="backup/fh.c::dentry_key" ref="d956a6bcc8b248d323cb736260f8b6d5" args="(internal_dentry dentry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="fibheap_8h.html#2ba6cc2f89ceacb7feea163f4d66398e">fibheapkey_t</a> dentry_key           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the fibheap key for dentry DENTRY. 
</div>
</div><p>
<a class="anchor" name="8cb3cbb2d678f4c5dd957860bef32010"></a><!-- doxytag: member="backup/fh.c::dentry_lookup" ref="8cb3cbb2d678f4c5dd957860bef32010" args="(zfs_fh *fh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry_lookup           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the internal dentry for file handle FH. 
</div>
</div><p>
<a class="anchor" name="7deec7e5a0d5cfec15604654622c5261"></a><!-- doxytag: member="backup/fh.c::dentry_lookup_local_path" ref="7deec7e5a0d5cfec15604654622c5261" args="(volume vol, string *local_path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry_lookup_local_path           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>local_path</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the internal dentry for LOCAL_PATH on volume VOL. 
</div>
</div><p>
<a class="anchor" name="2314960b1bbbccdc9f5de556cba01ee5"></a><!-- doxytag: member="backup/fh.c::dentry_lookup_name" ref="2314960b1bbbccdc9f5de556cba01ee5" args="(volume vol, internal_dentry parent, string *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry_lookup_name           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Lookup the internal dentry by name and lock it. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>vol</em>&nbsp;</td><td>Volume whose root is returned if parent == NULL. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>parent</em>&nbsp;</td><td>Directory in which the dentry is being looked up. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>Name of the dentry. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="65ee5b84086c0e9c0328543d5094a6c5"></a><!-- doxytag: member="backup/fh.c::dentry_lookup_name_nolock" ref="65ee5b84086c0e9c0328543d5094a6c5" args="(volume vol, internal_dentry parent, string *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry_lookup_name_nolock           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Lookup the internal dentry by name but do not lock it. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>vol</em>&nbsp;</td><td>Volume whose root is returned if parent == NULL. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>parent</em>&nbsp;</td><td>Directory in which the dentry is being looked up. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>Name of the dentry. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="f01bb3357770c86fde4bbc8b2046a557"></a><!-- doxytag: member="backup/fh.c::dentry_lookup_path" ref="f01bb3357770c86fde4bbc8b2046a557" args="(volume vol, internal_dentry start, string *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry_lookup_path           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>path</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the internal dentry for PATH from directory START or from the volume root of volume VOL if START is NULL. 
</div>
</div><p>
<a class="anchor" name="34459c81e9db0c00f9415b8b83c7ca79"></a><!-- doxytag: member="backup/fh.c::dentry_should_have_cleanup_node" ref="34459c81e9db0c00f9415b8b83c7ca79" args="(internal_dentry dentry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool dentry_should_have_cleanup_node           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return true if dentry DENTRY should have a node in CLEANUP_DENTRY_HEAP. 
</div>
</div><p>
<a class="anchor" name="ff0991aa880a2f20aef29dd9c5ba178d"></a><!-- doxytag: member="backup/fh.c::dentry_update_cleanup_node" ref="ff0991aa880a2f20aef29dd9c5ba178d" args="(internal_dentry dentry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void dentry_update_cleanup_node           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Update the cleanup node of dentry DENTRY. 
</div>
</div><p>
<a class="anchor" name="090008bde0f42c0a0d0c7a3aad5f01ff"></a><!-- doxytag: member="backup/fh.c::get_dentry" ref="090008bde0f42c0a0d0c7a3aad5f01ff" args="(zfs_fh *local_fh, zfs_fh *master_fh, volume vol, internal_dentry dir, string *name, fattr *attr, metadata *meta)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> get_dentry           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>local_fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>master_fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfattr__def.html">fattr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmetadata__def.html">metadata</a> *&nbsp;</td>
          <td class="paramname"> <em>meta</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return dentry for file NAME in directory DIR on volume VOL. If it does not exist create it. Update its local file handle to LOCAL_FH, master file handle to MASTER_FH and attributes to ATTR. 
</div>
</div><p>
<a class="anchor" name="4dee56d1c8d410e4f595b77e61f988bb"></a><!-- doxytag: member="backup/fh.c::get_level" ref="4dee56d1c8d410e4f595b77e61f988bb" args="(internal_dentry dentry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned int get_level           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the level which dentry DENTRY is locked by current thread. 
</div>
</div><p>
<a class="anchor" name="6c9c424d261a183cdf4bbe0e724b564a"></a><!-- doxytag: member="backup/fh.c::initialize_fh_c" ref="6c9c424d261a183cdf4bbe0e724b564a" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initialize_fh_c           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize data structures in FH.C. 
</div>
</div><p>
<a class="anchor" name="8154ba3eab219dc31be66331486de750"></a><!-- doxytag: member="backup/fh.c::internal_dentry_add_to_dir" ref="8154ba3eab219dc31be66331486de750" args="(internal_dentry parent, internal_dentry dentry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void internal_dentry_add_to_dir           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add DENTRY to list of dentries of PARENT. 
</div>
</div><p>
<a class="anchor" name="5213532e8f0febb49ab91f7bfb9997b0"></a><!-- doxytag: member="backup/fh.c::internal_dentry_create" ref="5213532e8f0febb49ab91f7bfb9997b0" args="(zfs_fh *local_fh, zfs_fh *master_fh, volume vol, internal_dentry parent, string *name, fattr *attr, metadata *meta, unsigned int level)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> internal_dentry_create           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>local_fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>master_fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfattr__def.html">fattr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmetadata__def.html">metadata</a> *&nbsp;</td>
          <td class="paramname"> <em>meta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>level</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a new internal dentry NAME in directory PARENT on volume VOL and internal file handle for local file handle LOCAL_FH and master file handle MASTER_FH with attributes ATTR and store it to hash tables. Lock the newly created file handle to level LEVEL. 
</div>
</div><p>
<a class="anchor" name="1e87a910684e1ba16db95f10db510d93"></a><!-- doxytag: member="backup/fh.c::internal_dentry_create_ns" ref="1e87a910684e1ba16db95f10db510d93" args="(zfs_fh *local_fh, zfs_fh *master_fh, volume vol, internal_dentry parent, string *name, fattr *attr, metadata *meta, unsigned int level)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> internal_dentry_create_ns           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>local_fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>master_fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfattr__def.html">fattr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmetadata__def.html">metadata</a> *&nbsp;</td>
          <td class="paramname"> <em>meta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>level</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="0d1e01348fcb480a5dfdfc561dd78c07"></a><!-- doxytag: member="backup/fh.c::internal_dentry_del_from_dir" ref="0d1e01348fcb480a5dfdfc561dd78c07" args="(internal_dentry dentry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void internal_dentry_del_from_dir           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Delete DENTRY from the list of dentries of its parent. 
</div>
</div><p>
<a class="anchor" name="7a37ecd8655e55cacfdefafc3c346559"></a><!-- doxytag: member="backup/fh.c::internal_dentry_destroy" ref="7a37ecd8655e55cacfdefafc3c346559" args="(internal_dentry dentry, bool clear_volume_root, bool invalidate, bool volume_root_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void internal_dentry_destroy           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>clear_volume_root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>invalidate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>volume_root_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy internal dentry. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dentry</em>&nbsp;</td><td>Dentry which shall be destroyed. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>clear_volume_root</em>&nbsp;</td><td>Flag whether the volume root shall be cleared. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>invalidate</em>&nbsp;</td><td>Flag whether the dentry shall be invalidated. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>volume_root_p</em>&nbsp;</td><td>Flag whether the dentry was the volume root. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="76e54c0d1e1c21fb9d57d24b13de05bd"></a><!-- doxytag: member="backup/fh.c::internal_dentry_destroy_subdentries" ref="76e54c0d1e1c21fb9d57d24b13de05bd" args="(internal_dentry dentry, zfs_fh *tmp_fh, bool invalidate)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool internal_dentry_destroy_subdentries           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>tmp_fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>invalidate</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy subdentries of dentry DENTRY. Invalidate the dentries in kernel if INVALIDATE. Return true if DENTRY still exists. 
</div>
</div><p>
<a class="anchor" name="21e035140629764ed1a3ed6c0de23bc3"></a><!-- doxytag: member="backup/fh.c::internal_dentry_eq" ref="21e035140629764ed1a3ed6c0de23bc3" args="(const void *xx, const void *yy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int internal_dentry_eq           </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>xx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>yy</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Compare an internal file handle XX with client's file handle YY. 
</div>
</div><p>
<a class="anchor" name="3cf4b0024d0e8cd29e57009986410a38"></a><!-- doxytag: member="backup/fh.c::internal_dentry_eq_name" ref="3cf4b0024d0e8cd29e57009986410a38" args="(const void *xx, const void *yy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int internal_dentry_eq_name           </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>xx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>yy</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Compare two internal file handles XX and YY whether they have same parent and file name. 
</div>
</div><p>
<a class="anchor" name="12afc7840c334961dcd99885c2349bb8"></a><!-- doxytag: member="backup/fh.c::internal_dentry_hash" ref="12afc7840c334961dcd99885c2349bb8" args="(const void *x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="hashtab_8h.html#fb05a131363b0de134535fc5f7b01dc0">hash_t</a> internal_dentry_hash           </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>x</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Hash function for internal dentry X, computed from fh-&gt;local_fh. 
</div>
</div><p>
<a class="anchor" name="e8c2edd8e78fe4758567d62aec0e91e4"></a><!-- doxytag: member="backup/fh.c::internal_dentry_hash_name" ref="e8c2edd8e78fe4758567d62aec0e91e4" args="(const void *x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="hashtab_8h.html#fb05a131363b0de134535fc5f7b01dc0">hash_t</a> internal_dentry_hash_name           </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>x</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Hash function for internal dentry X, computed from parent-&gt;fh and name. 
</div>
</div><p>
<a class="anchor" name="7bfcf103cc9a1ffe0478066b25cf0535"></a><!-- doxytag: member="backup/fh.c::internal_dentry_link" ref="7bfcf103cc9a1ffe0478066b25cf0535" args="(internal_dentry orig, internal_dentry parent, string *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> internal_dentry_link           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>orig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a new internal dentry NAME in directory PARENT on volume VOL for file DENTRY. 
</div>
</div><p>
<a class="anchor" name="50a8ee91cf7279f7980d3274be239c38"></a><!-- doxytag: member="backup/fh.c::internal_dentry_lock" ref="50a8ee91cf7279f7980d3274be239c38" args="(unsigned int level, volume *volp, internal_dentry *dentryp, zfs_fh *tmp_fh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t internal_dentry_lock           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a> *&nbsp;</td>
          <td class="paramname"> <em>volp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *&nbsp;</td>
          <td class="paramname"> <em>dentryp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>tmp_fh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Lock dentry *DENTRYP on volume *VOLP to level LEVEL. Store the local ZFS file handle to TMP_FH. 
</div>
</div><p>
<a class="anchor" name="da95c07b441d3eb404b765d35b06d266"></a><!-- doxytag: member="backup/fh.c::internal_dentry_lock2" ref="da95c07b441d3eb404b765d35b06d266" args="(unsigned int level1, unsigned int level2, volume *volp, internal_dentry *dentry1p, internal_dentry *dentry2p, zfs_fh *tmp_fh1, zfs_fh *tmp_fh2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t internal_dentry_lock2           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>level1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>level2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a> *&nbsp;</td>
          <td class="paramname"> <em>volp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *&nbsp;</td>
          <td class="paramname"> <em>dentry1p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *&nbsp;</td>
          <td class="paramname"> <em>dentry2p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>tmp_fh1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>tmp_fh2</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Lock 2 dentries on volume *VOLP, lock *DENTRY1P to level LEVEL1 and DENTRY2P to level LEVEL2. Use TMP_FH1 and TMP_FH2 to lookup them. 
</div>
</div><p>
<a class="anchor" name="53d039d599e7fe36af4474e9186ddeea"></a><!-- doxytag: member="backup/fh.c::internal_dentry_move" ref="53d039d599e7fe36af4474e9186ddeea" args="(internal_dentry *from_dirp, string *from_name, internal_dentry *to_dirp, string *to_name, volume *volp, zfs_fh *from_fh, zfs_fh *to_fh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void internal_dentry_move           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *&nbsp;</td>
          <td class="paramname"> <em>from_dirp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>from_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *&nbsp;</td>
          <td class="paramname"> <em>to_dirp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>to_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a> *&nbsp;</td>
          <td class="paramname"> <em>volp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>from_fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>to_fh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Move internal dentry for file FROM_NAME in *FROM_DIRP to be a subdentry of *TO_DIRP with name TO_NAME on volume *VOLP. 
</div>
</div><p>
<a class="anchor" name="25399c7c011c8db17106e51083bfe291"></a><!-- doxytag: member="backup/fh.c::internal_dentry_unlock" ref="25399c7c011c8db17106e51083bfe291" args="(volume vol, internal_dentry dentry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void internal_dentry_unlock           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Unlock dentry DENTRY. 
</div>
</div><p>
<a class="anchor" name="861beb8fdd8e3dce3a30518f00fe78a0"></a><!-- doxytag: member="backup/fh.c::internal_fh_create" ref="861beb8fdd8e3dce3a30518f00fe78a0" args="(zfs_fh *local_fh, zfs_fh *master_fh, fattr *attr, metadata *meta, volume vol, unsigned int level)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structinternal__fh__def.html">internal_fh</a> internal_fh_create           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>local_fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>master_fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfattr__def.html">fattr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmetadata__def.html">metadata</a> *&nbsp;</td>
          <td class="paramname"> <em>meta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>level</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a new internal file handle on volume VOL with local file handle LOCAL_FH, remote file handle MASTER_FH, attributes ATTR, lock it to level LEVEL and store it to hash tables. 
</div>
</div><p>
<a class="anchor" name="dc6aae35ee275ee2fdca7a2de3389822"></a><!-- doxytag: member="backup/fh.c::internal_fh_destroy_stage1" ref="dc6aae35ee275ee2fdca7a2de3389822" args="(internal_fh fh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void internal_fh_destroy_stage1           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__fh__def.html">internal_fh</a>&nbsp;</td>
          <td class="paramname"> <em>fh</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy almost everything of the internal file handle FH except mutex and file handle itself. 
</div>
</div><p>
<a class="anchor" name="0162de3b7747ebec6038cb55f58109e6"></a><!-- doxytag: member="backup/fh.c::internal_fh_destroy_stage2" ref="0162de3b7747ebec6038cb55f58109e6" args="(internal_fh fh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void internal_fh_destroy_stage2           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__fh__def.html">internal_fh</a>&nbsp;</td>
          <td class="paramname"> <em>fh</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy the rest of the internal file handle FH, i.e. the mutex and file handle itself. 
</div>
</div><p>
<a class="anchor" name="a3013c06d828e11c6d2b056a99f1c1ff"></a><!-- doxytag: member="backup/fh.c::internal_fh_eq" ref="a3013c06d828e11c6d2b056a99f1c1ff" args="(const void *xx, const void *yy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int internal_fh_eq           </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>xx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>yy</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Compare an internal file handle XX with client's file handle YY. 
</div>
</div><p>
<a class="anchor" name="94d7b3dd183c0c8d15a6daa1578c9319"></a><!-- doxytag: member="backup/fh.c::internal_fh_hash" ref="94d7b3dd183c0c8d15a6daa1578c9319" args="(const void *x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="hashtab_8h.html#fb05a131363b0de134535fc5f7b01dc0">hash_t</a> internal_fh_hash           </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>x</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Hash function for internal file handle X. 
</div>
</div><p>
<a class="anchor" name="ae9d3f778c30b82a1eb12ef16ba16ec7"></a><!-- doxytag: member="backup/fh.c::is_owned" ref="ae9d3f778c30b82a1eb12ef16ba16ec7" args="(internal_dentry dentry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool is_owned           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return true if dentry DENTRY is owned by current thread. 
</div>
</div><p>
<a class="anchor" name="3d16b4e3f7afb2fef9e1ab7183b2ea60"></a><!-- doxytag: member="backup/fh.c::make_space_in_conflict_dir" ref="3d16b4e3f7afb2fef9e1ab7183b2ea60" args="(volume *volp, internal_dentry *conflictp, bool exists, zfs_fh *fh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> make_space_in_conflict_dir           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a> *&nbsp;</td>
          <td class="paramname"> <em>volp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *&nbsp;</td>
          <td class="paramname"> <em>conflictp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>exists</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
If there is a dentry in place for file FH in conflict directory CONFLICT on volume VOL delete it and return NULL. If FH is already there return its dentry. 
</div>
</div><p>
<a class="anchor" name="d66e60c73dc9dad2c65d272496d9cd30"></a><!-- doxytag: member="backup/fh.c::print_fh_htab" ref="d66e60c73dc9dad2c65d272496d9cd30" args="(FILE *f)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void print_fh_htab           </td>
          <td>(</td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>f</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Print the contents of hash table HTAB to file F. 
</div>
</div><p>
<a class="anchor" name="25d627140eb6e87241af8459e1ec8ac8"></a><!-- doxytag: member="backup/fh.c::print_subdentries" ref="25d627140eb6e87241af8459e1ec8ac8" args="(FILE *f, internal_dentry dentry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void print_subdentries           </td>
          <td>(</td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Print subdentries of dentry DENTRY to file F. 
</div>
</div><p>
<a class="anchor" name="709d39f9778814c3335adc4939343cee"></a><!-- doxytag: member="backup/fh.c::print_virtual_tree" ref="709d39f9778814c3335adc4939343cee" args="(FILE *f)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void print_virtual_tree           </td>
          <td>(</td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>f</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Print the virtual tree to file F. 
</div>
</div><p>
<a class="anchor" name="ef5736581867cbf38ec49d9fcfee341c"></a><!-- doxytag: member="backup/fh.c::print_virtual_tree_node" ref="ef5736581867cbf38ec49d9fcfee341c" args="(FILE *f, virtual_dir vd, unsigned int indent)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void print_virtual_tree_node           </td>
          <td>(</td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a>&nbsp;</td>
          <td class="paramname"> <em>vd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>indent</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Print the virtual directory VD and its subdirectories to file F indented by INDENT spaces. 
</div>
</div><p>
<a class="anchor" name="dba0f21d712309394992dba07fac7f02"></a><!-- doxytag: member="backup/fh.c::release_dentry" ref="dba0f21d712309394992dba07fac7f02" args="(internal_dentry dentry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void release_dentry           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Update time of last use of DENTRY and unlock it. 
</div>
</div><p>
<a class="anchor" name="a48729af296248e632b8f240ac13be70"></a><!-- doxytag: member="backup/fh.c::set_lock_info" ref="a48729af296248e632b8f240ac13be70" args="(lock_info *li)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_lock_info           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlock__info__def.html">lock_info</a> *&nbsp;</td>
          <td class="paramname"> <em>li</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set array of lock info for current thread to LI. 
</div>
</div><p>
<a class="anchor" name="004bcac5a4521260bca2e2af84972285"></a><!-- doxytag: member="backup/fh.c::set_master_fh" ref="004bcac5a4521260bca2e2af84972285" args="(volume vol, internal_fh fh, zfs_fh *master_fh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool set_master_fh           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__fh__def.html">internal_fh</a>&nbsp;</td>
          <td class="paramname"> <em>fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>master_fh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set master file handle of file handle FH on volume VOL to MASTER_FH. 
</div>
</div><p>
<a class="anchor" name="7832f918945215af7cd2de05fc6604a2"></a><!-- doxytag: member="backup/fh.c::set_owned" ref="7832f918945215af7cd2de05fc6604a2" args="(internal_dentry dentry, unsigned int level)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_owned           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>level</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add dentry DENTRY locked to level LEVEL to list of dentries owned by current thread. 
</div>
</div><p>
<a class="anchor" name="85cabd83c7f7d5629cfe8ea0c7da612b"></a><!-- doxytag: member="backup/fh.c::try_resolve_conflict" ref="85cabd83c7f7d5629cfe8ea0c7da612b" args="(volume vol, internal_dentry conflict)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool try_resolve_conflict           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>conflict</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Try resolve CONFLICT on volume VOL, return true if it was resolved. 
</div>
</div><p>
<a class="anchor" name="eaa5c46027cebc0eff43f4c7d3bfcc86"></a><!-- doxytag: member="backup/fh.c::vd_lookup" ref="eaa5c46027cebc0eff43f4c7d3bfcc86" args="(zfs_fh *fh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a> vd_lookup           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return virtual directory for file handle FH. 
</div>
</div><p>
<a class="anchor" name="c14e8d0673bcce8f066e26f32a6059ce"></a><!-- doxytag: member="backup/fh.c::vd_lookup_name" ref="c14e8d0673bcce8f066e26f32a6059ce" args="(virtual_dir parent, string *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a> vd_lookup_name           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a>&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the virtual directory for NAME in virtual directory PARENT. 
</div>
</div><p>
<a class="anchor" name="f995be6e56b3a839133217f0cc3ef181"></a><!-- doxytag: member="backup/fh.c::vd_lookup_name_dirstamp" ref="f995be6e56b3a839133217f0cc3ef181" args="(virtual_dir parent, string *name, time_t *dirstamp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a> vd_lookup_name_dirstamp           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a>&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t *&nbsp;</td>
          <td class="paramname"> <em>dirstamp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="7a251cf9ea14d69dcc4987c1fc0ccee8"></a><!-- doxytag: member="backup/fh.c::virtual_dir_create" ref="7a251cf9ea14d69dcc4987c1fc0ccee8" args="(virtual_dir parent, const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a> virtual_dir_create           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a>&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a new virtual directory NAME in virtual directory PARENT. 
</div>
</div><p>
<a class="anchor" name="16f9091ef5a42f2dc51d052efd3204e9"></a><!-- doxytag: member="backup/fh.c::virtual_dir_destroy" ref="16f9091ef5a42f2dc51d052efd3204e9" args="(virtual_dir vd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void virtual_dir_destroy           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a>&nbsp;</td>
          <td class="paramname"> <em>vd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Delete a virtual directory VD from all hash tables and free it. 
</div>
</div><p>
<a class="anchor" name="b647aa4a1c654412e939ea91669a8db8"></a><!-- doxytag: member="backup/fh.c::virtual_dir_eq" ref="b647aa4a1c654412e939ea91669a8db8" args="(const void *xx, const void *yy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int virtual_dir_eq           </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>xx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>yy</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Compare a virtual directory XX with client's file handle YY. 
</div>
</div><p>
<a class="anchor" name="87000f4021aedad7eb6504817418543f"></a><!-- doxytag: member="backup/fh.c::virtual_dir_eq_name" ref="87000f4021aedad7eb6504817418543f" args="(const void *xx, const void *yy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int virtual_dir_eq_name           </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>xx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>yy</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Compare two virtual directories XX and YY whether they have same parent and file name. 
</div>
</div><p>
<a class="anchor" name="87624e600d9a3ca05fc4130e8b3c546b"></a><!-- doxytag: member="backup/fh.c::virtual_dir_hash" ref="87624e600d9a3ca05fc4130e8b3c546b" args="(const void *x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="hashtab_8h.html#fb05a131363b0de134535fc5f7b01dc0">hash_t</a> virtual_dir_hash           </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>x</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Hash function for virtual_dir X, computed from FH. 
</div>
</div><p>
<a class="anchor" name="3a1c524498023d344b0a50f61710e957"></a><!-- doxytag: member="backup/fh.c::virtual_dir_hash_name" ref="3a1c524498023d344b0a50f61710e957" args="(const void *x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="hashtab_8h.html#fb05a131363b0de134535fc5f7b01dc0">hash_t</a> virtual_dir_hash_name           </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>x</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Hash function for virtual_dir X, computed from (PARENT-&gt;FH, NAME). 
</div>
</div><p>
<a class="anchor" name="e73623d02e39544a31a39aa06761acd7"></a><!-- doxytag: member="backup/fh.c::virtual_dir_set_fattr" ref="e73623d02e39544a31a39aa06761acd7" args="(virtual_dir vd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void virtual_dir_set_fattr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a>&nbsp;</td>
          <td class="paramname"> <em>vd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the file attributes of virtual directory VD. 
</div>
</div><p>
<a class="anchor" name="2d82dccda4a8638279877471dea475fe"></a><!-- doxytag: member="backup/fh.c::virtual_mountpoint_create" ref="2d82dccda4a8638279877471dea475fe" args="(volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a> virtual_mountpoint_create           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create the virtual mountpoint for volume VOL. 
</div>
</div><p>
<a class="anchor" name="b000229493a3fc66db907254aa7d8c09"></a><!-- doxytag: member="backup/fh.c::virtual_mountpoint_destroy" ref="b000229493a3fc66db907254aa7d8c09" args="(volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void virtual_mountpoint_destroy           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy the virtual mountpoint of volume VOL. 
</div>
</div><p>
<a class="anchor" name="1c2d9fd002758c3a3a569819f1deb9b7"></a><!-- doxytag: member="backup/fh.c::virtual_root_create" ref="1c2d9fd002758c3a3a569819f1deb9b7" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a> virtual_root_create           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create the virtual root directory. 
</div>
</div><p>
<a class="anchor" name="29061344fcbe91649692f59872c1d9e6"></a><!-- doxytag: member="backup/fh.c::virtual_root_destroy" ref="29061344fcbe91649692f59872c1d9e6" args="(virtual_dir dir)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void virtual_root_destroy           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a>&nbsp;</td>
          <td class="paramname"> <em>dir</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy virtual root directory. 
</div>
</div><p>
<a class="anchor" name="56dd89ef05da03bb82b7ff2d02a3fae7"></a><!-- doxytag: member="backup/fh.c::zfs_fh_lookup" ref="56dd89ef05da03bb82b7ff2d02a3fae7" args="(zfs_fh *fh, volume *volp, internal_dentry *dentryp, virtual_dir *vdp, bool delete_volume_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t zfs_fh_lookup           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a> *&nbsp;</td>
          <td class="paramname"> <em>volp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *&nbsp;</td>
          <td class="paramname"> <em>dentryp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a> *&nbsp;</td>
          <td class="paramname"> <em>vdp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>delete_volume_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Find the internal file handle or virtual directory for zfs_fh FH and set *VOLP, *DENTRYP and VDP according to it. If DELETE_VOLUME_P is true and the volume should be deleted do not lookup the file handle and delete the volume if there are no file handles locked on it. 
</div>
</div><p>
<a class="anchor" name="4369b087b71e1339cff3184f4863590b"></a><!-- doxytag: member="backup/fh.c::zfs_fh_lookup_nolock" ref="4369b087b71e1339cff3184f4863590b" args="(zfs_fh *fh, volume *volp, internal_dentry *dentryp, virtual_dir *vdp, bool delete_volume_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t zfs_fh_lookup_nolock           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a> *&nbsp;</td>
          <td class="paramname"> <em>volp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *&nbsp;</td>
          <td class="paramname"> <em>dentryp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a> *&nbsp;</td>
          <td class="paramname"> <em>vdp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>delete_volume_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Find the internal file handle or virtual directory for zfs_fh FH and set *VOLP, *DENTRYP and VDP according to it. This function is similar to FH_LOOKUP but the big locks must be locked. If DELETE_VOLUME_P is true and the volume should be deleted do not lookup the file handle and delete the volume if there are no file handles locked on it. 
</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="d1800f7542d1b5ad7afd6f8f4e4c0607"></a><!-- doxytag: member="backup/fh.c::cleanup_dentry_heap" ref="d1800f7542d1b5ad7afd6f8f4e4c0607" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfibheap__def.html">fibheap</a> <a class="el" href="fh_8c.html#d1800f7542d1b5ad7afd6f8f4e4c0607">cleanup_dentry_heap</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Heap holding internal file handles will be automatically freed when unused for a long time. 
</div>
</div><p>
<a class="anchor" name="f8dacdebeff6944a5d277435ba212944"></a><!-- doxytag: member="backup/fh.c::cleanup_dentry_mutex" ref="f8dacdebeff6944a5d277435ba212944" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_mutex_t <a class="el" href="fh_8c.html#f8dacdebeff6944a5d277435ba212944">cleanup_dentry_mutex</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Mutex protecting CLEANUP_FH_*. 
</div>
</div><p>
<a class="anchor" name="f82c0c931b261e7dd78e0511fd95e7a7"></a><!-- doxytag: member="backup/fh.c::cleanup_dentry_thread" ref="f82c0c931b261e7dd78e0511fd95e7a7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_t <a class="el" href="fh_8h.html#f82c0c931b261e7dd78e0511fd95e7a7">cleanup_dentry_thread</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Thread ID of thread freeing file handles unused for a long time. 
</div>
</div><p>
<a class="anchor" name="14d4f0f064daf73042171a677db1d0e1"></a><!-- doxytag: member="backup/fh.c::cleanup_dentry_thread_in_syscall" ref="14d4f0f064daf73042171a677db1d0e1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_mutex_t <a class="el" href="fh_8h.html#14d4f0f064daf73042171a677db1d0e1">cleanup_dentry_thread_in_syscall</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This mutex is locked when cleanup fh thread is in sleep. 
</div>
</div><p>
<a class="anchor" name="50e9c7e5731f9c1ddd313dea77cff407"></a><!-- doxytag: member="backup/fh.c::dentry_htab" ref="50e9c7e5731f9c1ddd313dea77cff407" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structhtab__def.html">htab_t</a> <a class="el" href="fh_8h.html#50e9c7e5731f9c1ddd313dea77cff407">dentry_htab</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Hash table of used dentries, searched by fh-&gt;local_fh. 
</div>
</div><p>
<a class="anchor" name="cbd10c01cf3afda1d322fd1594896b68"></a><!-- doxytag: member="backup/fh.c::dentry_htab_name" ref="cbd10c01cf3afda1d322fd1594896b68" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structhtab__def.html">htab_t</a> <a class="el" href="fh_8c.html#cbd10c01cf3afda1d322fd1594896b68">dentry_htab_name</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Hash table of used dentries, searched by (parent-&gt;fh-&gt;local_fh, name). 
</div>
</div><p>
<a class="anchor" name="4cce6cf1cd42fc695a237dde2b47af2d"></a><!-- doxytag: member="backup/fh.c::dentry_pool" ref="4cce6cf1cd42fc695a237dde2b47af2d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structalloc__pool__def.html">alloc_pool</a> <a class="el" href="fh_8c.html#4cce6cf1cd42fc695a237dde2b47af2d">dentry_pool</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Allocation pool for dentries. 
</div>
</div><p>
<a class="anchor" name="ac1621005b0a1563c7a740cbac2ef44d"></a><!-- doxytag: member="backup/fh.c::fh_htab" ref="ac1621005b0a1563c7a740cbac2ef44d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structhtab__def.html">htab_t</a> <a class="el" href="fh_8c.html#ac1621005b0a1563c7a740cbac2ef44d">fh_htab</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Hash table of used file handles, searched by local_fh. 
</div>
</div><p>
<a class="anchor" name="6107d9eff35f5714a36635dcaa3198a2"></a><!-- doxytag: member="backup/fh.c::fh_mutex" ref="6107d9eff35f5714a36635dcaa3198a2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_mutex_t <a class="el" href="fh_8h.html#6107d9eff35f5714a36635dcaa3198a2">fh_mutex</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Mutes for file handles, dentries and virtual directories. 
</div>
</div><p>
<a class="anchor" name="3f446354289ea5566a98f398c4c8aa66"></a><!-- doxytag: member="backup/fh.c::fh_pool" ref="3f446354289ea5566a98f398c4c8aa66" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structalloc__pool__def.html">alloc_pool</a> <a class="el" href="fh_8c.html#3f446354289ea5566a98f398c4c8aa66">fh_pool</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Allocation pool for file handles. 
</div>
</div><p>
<a class="anchor" name="6474b29cdfa6d44d6e17c617e16f3a97"></a><!-- doxytag: member="backup/fh.c::lock_info_key" ref="6474b29cdfa6d44d6e17c617e16f3a97" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_key_t <a class="el" href="fh_8c.html#6474b29cdfa6d44d6e17c617e16f3a97">lock_info_key</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Key for array of locked file handles. 
</div>
</div><p>
<a class="anchor" name="e4cac4bc0c5fa65508b79428d7395b36"></a><!-- doxytag: member="backup/fh.c::root" ref="e4cac4bc0c5fa65508b79428d7395b36" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a> <a class="el" href="fh_8c.html#e4cac4bc0c5fa65508b79428d7395b36">root</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The virtual directory root. 
</div>
</div><p>
<a class="anchor" name="aeaeb70a4389345c638f589b8357cb45"></a><!-- doxytag: member="backup/fh.c::root_fh" ref="aeaeb70a4389345c638f589b8357cb45" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> <a class="el" href="fh_8h.html#aeaeb70a4389345c638f589b8357cb45">root_fh</a> = {NODE_NONE, VOLUME_ID_VIRTUAL, VIRTUAL_DEVICE, ROOT_INODE, 1}          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
File handle of ZFS root. 
</div>
</div><p>
<a class="anchor" name="09f04f0b6d113df8eba9e2e215fa2b04"></a><!-- doxytag: member="backup/fh.c::undefined_fh" ref="09f04f0b6d113df8eba9e2e215fa2b04" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> <a class="el" href="fh_8h.html#09f04f0b6d113df8eba9e2e215fa2b04">undefined_fh</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Static undefined ZFS file handle. 
</div>
</div><p>
<a class="anchor" name="abf7a9cb87e4416067ef118ff1948e27"></a><!-- doxytag: member="backup/fh.c::vd_htab" ref="abf7a9cb87e4416067ef118ff1948e27" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structhtab__def.html">htab_t</a> <a class="el" href="fh_8h.html#abf7a9cb87e4416067ef118ff1948e27">vd_htab</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Hash table of virtual directories, searched by fh. 
</div>
</div><p>
<a class="anchor" name="373bb2598be9e8af97aa18694ec75350"></a><!-- doxytag: member="backup/fh.c::vd_htab_name" ref="373bb2598be9e8af97aa18694ec75350" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structhtab__def.html">htab_t</a> <a class="el" href="fh_8c.html#373bb2598be9e8af97aa18694ec75350">vd_htab_name</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Hash table of virtual directories, searched by (parent-&gt;fh, name). 
</div>
</div><p>
<a class="anchor" name="569aa68ad0ee5c936992c199289051be"></a><!-- doxytag: member="backup/fh.c::vd_pool" ref="569aa68ad0ee5c936992c199289051be" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structalloc__pool__def.html">alloc_pool</a> <a class="el" href="fh_8c.html#569aa68ad0ee5c936992c199289051be">vd_pool</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Allocation pool for virtual directories ("mountpoints"). 
</div>
</div><p>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Aug 6 00:37:40 2010 for zlomekFS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.2 </small></address>
</body>
</html>
