<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>zlomekFS: dir.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul>
</div>
<div class="nav">
<a class="el" href="dir_21c430ab3b7001ae39034eae6f7edf71.html">zfsd</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_ac94841c51e61ddc7acc56e12a771012.html">backup</a></div>
<h1>backup/dir.c File Reference</h1>Directory operations. <a href="#_details">More...</a>
<p>
<code>#include &quot;<a class="el" href="backup_2system_8h-source.html">system.h</a>&quot;</code><br>
<code>#include &lt;inttypes.h&gt;</code><br>
<code>#include &lt;sys/types.h&gt;</code><br>
<code>#include &lt;sys/stat.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;unistd.h&gt;</code><br>
<code>#include &lt;dirent.h&gt;</code><br>
<code>#include &lt;fcntl.h&gt;</code><br>
<code>#include &lt;utime.h&gt;</code><br>
<code>#include &lt;errno.h&gt;</code><br>
<code>#include &quot;<a class="el" href="backup_2pthread-wrapper_8h-source.html">pthread-wrapper.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2log_8h-source.html">log.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2memory_8h-source.html">memory.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2fh_8h-source.html">fh.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2dir_8h-source.html">dir.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2file_8h-source.html">file.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2config_8h-source.html">config.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2thread_8h-source.html">thread.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2varray_8h-source.html">varray.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2data-coding_8h-source.html">data-coding.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2volume_8h-source.html">volume.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2network_8h-source.html">network.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2kernel_8h-source.html">kernel.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2zfs-prot_8h-source.html">zfs-prot.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2user-group_8h-source.html">user-group.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2update_8h-source.html">update.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2version_8h-source.html">version.h</a>&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#4c68cfd887f4c15d7704613217f75c6a">move_to_shadow_base</a> (<a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh, <a class="el" href="structstring__def.html">string</a> *path, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *dir_fh, bool journal)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#1ab13e92ad99af7afeb4d2fa1bcd670d">build_local_path</a> (<a class="el" href="structstring__def.html">string</a> *dst, <a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#cf0c0eb1d80f0c287f1c120df737f96e">build_local_path_name_dirstamp</a> (<a class="el" href="structstring__def.html">string</a> *dst, <a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry, <a class="el" href="structstring__def.html">string</a> *name, time_t *dirstamp)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#9969c6013023932e4b999a86e3310692">build_local_path_name</a> (<a class="el" href="structstring__def.html">string</a> *dst, <a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry, <a class="el" href="structstring__def.html">string</a> *name)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#6224a3683a7c98202c94b702994cad47">build_relative_path</a> (<a class="el" href="structstring__def.html">string</a> *dst, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#c6187160837c89b46bef165a25464e02">build_relative_path_name</a> (<a class="el" href="structstring__def.html">string</a> *dst, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry, <a class="el" href="structstring__def.html">string</a> *name)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#b96a9ac7b4a9ca22d02e7ef155a59325">local_path_to_relative_path</a> (<a class="el" href="structstring__def.html">string</a> *dst, <a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structstring__def.html">string</a> *path)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#104dae74d09aed56df0dec3b5b872aa3">file_name_from_path</a> (<a class="el" href="structstring__def.html">string</a> *dst, <a class="el" href="structstring__def.html">string</a> *path)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#079483c1196a3c0b50e6338aded67881">parent_exists</a> (<a class="el" href="structstring__def.html">string</a> *path, struct stat *st)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#17f55cc22437fe017949dfd4a319d7a8">inc_local_version_fh</a> (<a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#cec84d5d3871a0605c5cac45288d3fbf">recursive_unlink_itself</a> (<a class="el" href="structmetadata__def.html">metadata</a> *meta, <a class="el" href="structstring__def.html">string</a> *path, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *parent_fh, <a class="el" href="structjournal__def.html">journal_t</a> journal, bool destroy_dentry, bool inc_version_p, bool move_to_shadow_p)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#d82d30c4b969b34f0cfbfd8445cb0628">recursive_unlink_contents</a> (<a class="el" href="structmetadata__def.html">metadata</a> *meta, <a class="el" href="structstring__def.html">string</a> *path, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *parent_fh, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh, bool destroy_dentry, bool journal_p, bool inc_version_p, bool move_to_shadow_p)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#a73e611c875cc652d0152117523c981f">recursive_unlink_start</a> (<a class="el" href="structmetadata__def.html">metadata</a> *meta, <a class="el" href="structstring__def.html">string</a> *path, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *parent_fh, bool destroy_dentry, bool journal_p, bool inc_version_p, bool move_to_shadow_p)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#2a93962a13067e0eb1e411c1327414ef">recursive_unlink</a> (<a class="el" href="structstring__def.html">string</a> *path, uint32_t vid, bool destroy_dentry, bool journal_p, bool move_to_shadow_p)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#5eac22536a3b27b4810e08647fbea30c">validate_operation_on_virtual_directory</a> (<a class="el" href="structvirtual__dir__def.html">virtual_dir</a> pvd, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *dir, uint32_t conflict_error)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#e8f7c2141a5ba11e71d977a991cfce9e">validate_operation_on_zfs_fh</a> (<a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh, uint32_t conflict_error, uint32_t non_exist_error)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#c52461e8beedcfe65316cc69a3a832a6">validate_operation_on_volume_root</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry, uint32_t conflict_error)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#d0344d5b06b02fb7158200039b210c0a">fattr_from_struct_stat</a> (<a class="el" href="structfattr__def.html">fattr</a> *attr, struct stat *st)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#064b8639d98bef50168284ed831de022">get_volume_root_local</a> (<a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *local_fh, <a class="el" href="structfattr__def.html">fattr</a> *attr, <a class="el" href="structmetadata__def.html">metadata</a> *meta)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#850c7ab23a1301507afcd9a2d3a073b3">get_volume_root_remote</a> (<a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *remote_fh, <a class="el" href="structfattr__def.html">fattr</a> *attr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#53560757accbb4af3cd943361103195c">get_volume_root_dentry</a> (<a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *dentryp, bool unlock_fh_mutex)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#47b50faa9e4d7745b90ec5e12830a1fe">zfs_volume_root</a> (<a class="el" href="structdir__op__res__def.html">dir_op_res</a> *res, uint32_t vid)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#32cccd93fd6fb9cbbb0b9dae02cf5c03">local_getattr_path</a> (<a class="el" href="structfattr__def.html">fattr</a> *attr, <a class="el" href="structstring__def.html">string</a> *path)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#78b8ea10baeb929521bfc8da75025ea6">local_getattr_path_ns</a> (<a class="el" href="structfattr__def.html">fattr</a> *attr, <a class="el" href="structstring__def.html">string</a> *path)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#9380aa451a1e90652d8bb7ef34259c87">local_getattr</a> (<a class="el" href="structfattr__def.html">fattr</a> *attr, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry, <a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#29033fa55fb908fa17812d9c4016f0e7">remote_getattr</a> (<a class="el" href="structfattr__def.html">fattr</a> *attr, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry, <a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#d503b494ba50471b58166aab42580140">zfs_getattr</a> (<a class="el" href="structfattr__def.html">fattr</a> *fa, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#e8c4aaa943bfa7d93fc4f0e5f49b5df1">local_setattr_path</a> (<a class="el" href="structfattr__def.html">fattr</a> *fa, <a class="el" href="structstring__def.html">string</a> *path, <a class="el" href="structsattr__def.html">sattr</a> *sa)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#3355272936b38ac2977ffd8af218eaa5">local_setattr</a> (<a class="el" href="structfattr__def.html">fattr</a> *fa, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry, <a class="el" href="structsattr__def.html">sattr</a> *sa, <a class="el" href="structvolume__def.html">volume</a> vol, bool should_version)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#d1ab84e954366b3f15c9df15022a38e5">remote_setattr</a> (<a class="el" href="structfattr__def.html">fattr</a> *fa, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry, <a class="el" href="structsattr__def.html">sattr</a> *sa, <a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#4aa8b595d431678ee39bbe8d502fe6ce">zfs_setattr</a> (<a class="el" href="structfattr__def.html">fattr</a> *fa, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh, <a class="el" href="structsattr__def.html">sattr</a> *sa, bool should_version)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#6c800d8c2531248f5a381a30098e1de1">zfs_extended_lookup</a> (<a class="el" href="structdir__op__res__def.html">dir_op_res</a> *res, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *dir, char *path)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#f9ea09ae211be76b787d0275eb3bc517">local_lookup_dirstamp</a> (<a class="el" href="structdir__op__res__def.html">dir_op_res</a> *res, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dir, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structmetadata__def.html">metadata</a> *meta, time_t *dirstamp)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#e7a1d6fa38d4f06debf13dd89fff27c5">local_lookup</a> (<a class="el" href="structdir__op__res__def.html">dir_op_res</a> *res, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dir, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structmetadata__def.html">metadata</a> *meta)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#3f31241831f3bb09b2958d2dc916bf21">remote_lookup</a> (<a class="el" href="structdir__op__res__def.html">dir_op_res</a> *res, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dir, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#f60f588dd254f28b367f457d6b6ed5e9">remote_lookup_zfs_fh</a> (<a class="el" href="structdir__op__res__def.html">dir_op_res</a> *res, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *dir, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#23b076c102a87814d63256a6078cb4d8">zfs_lookup</a> (<a class="el" href="structdir__op__res__def.html">dir_op_res</a> *res, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *dir, <a class="el" href="structstring__def.html">string</a> *name)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#df5a1123e169a16c95505cde53f68045">local_mkdir</a> (<a class="el" href="structdir__op__res__def.html">dir_op_res</a> *res, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dir, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structsattr__def.html">sattr</a> *attr, <a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structmetadata__def.html">metadata</a> *meta)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#137136877adac6798fd2a38e60aeb99a">remote_mkdir</a> (<a class="el" href="structdir__op__res__def.html">dir_op_res</a> *res, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dir, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structsattr__def.html">sattr</a> *attr, <a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#3f64d05b27d13814e649a3260cebdeb5">zfs_mkdir</a> (<a class="el" href="structdir__op__res__def.html">dir_op_res</a> *res, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *dir, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structsattr__def.html">sattr</a> *attr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#3e0f55b6bfa9910e96ca95f70c5124a8">local_rmdir</a> (<a class="el" href="structmetadata__def.html">metadata</a> *meta, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dir, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#c55b8eaef390821de3c36bf791286f25">remote_rmdir</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dir, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#df3a608fc237ed562be2dd6c78de1b50">zfs_rmdir</a> (<a class="el" href="structzfs__fh__def.html">zfs_fh</a> *dir, <a class="el" href="structstring__def.html">string</a> *name)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#b61ae69e9c0cf892452a25b4d1922066">local_rename_base</a> (<a class="el" href="structmetadata__def.html">metadata</a> *meta_old, <a class="el" href="structmetadata__def.html">metadata</a> *meta_new, <a class="el" href="structstring__def.html">string</a> *from_path, <a class="el" href="structstring__def.html">string</a> *to_path, <a class="el" href="structvolume__def.html">volume</a> vol, bool shadow, bool should_version)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#56aef10f599a4f382ae49d319046c086">local_rename</a> (<a class="el" href="structmetadata__def.html">metadata</a> *meta_old, <a class="el" href="structmetadata__def.html">metadata</a> *meta_new, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> from_dir, <a class="el" href="structstring__def.html">string</a> *from_name, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> to_dir, <a class="el" href="structstring__def.html">string</a> *to_name, <a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#2be05bbb8af5ce78cec828e6750b6206">remote_rename</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> from_dir, <a class="el" href="structstring__def.html">string</a> *from_name, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> to_dir, <a class="el" href="structstring__def.html">string</a> *to_name, <a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#65b799b7f49e3da6ac63d93330e6347d">zfs_rename_journal</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> from_dir, <a class="el" href="structstring__def.html">string</a> *from_name, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> to_dir, <a class="el" href="structstring__def.html">string</a> *to_name, <a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structmetadata__def.html">metadata</a> *meta_old, <a class="el" href="structmetadata__def.html">metadata</a> *meta_new)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#dc227f5833ebbacb7190bf871ca2e078">zfs_rename</a> (<a class="el" href="structzfs__fh__def.html">zfs_fh</a> *from_dir, <a class="el" href="structstring__def.html">string</a> *from_name, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *to_dir, <a class="el" href="structstring__def.html">string</a> *to_name)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#b1a7b5ff496661d953749fcb55fc4049">local_link_base</a> (<a class="el" href="structmetadata__def.html">metadata</a> *meta, <a class="el" href="structstring__def.html">string</a> *from_path, <a class="el" href="structstring__def.html">string</a> *to_path, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#bd7973fafe6808c4df40ecb540fdf6f4">local_link</a> (<a class="el" href="structmetadata__def.html">metadata</a> *meta, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> from, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dir, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#f3d5ea81893a05ac6a450b160e3f29df">remote_link</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> from, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dir, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#191daa5f54591b92e7f73e4ec1d2f84f">zfs_link_journal</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dir, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structmetadata__def.html">metadata</a> *meta)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#91b61222dc5d4740e0295c86862f8a49">zfs_link</a> (<a class="el" href="structzfs__fh__def.html">zfs_fh</a> *from, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *dir, <a class="el" href="structstring__def.html">string</a> *name)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#7dc84316d909cb4bdc4f62b50682ae46">local_unlink</a> (<a class="el" href="structmetadata__def.html">metadata</a> *meta, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dir, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#64ef8f8643e957a56f34e3263558439c">remote_unlink</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dir, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#a9acfda8b68908e86b62f7b4c2bb318a">zfs_unlink</a> (<a class="el" href="structzfs__fh__def.html">zfs_fh</a> *dir, <a class="el" href="structstring__def.html">string</a> *name)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#851ae5358f5ce98651c4ec33012f7956">local_readlink</a> (<a class="el" href="structread__link__res__def.html">read_link_res</a> *res, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> file, <a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#39ac9a4449a031763f16a018eb43aaff">local_readlink_name</a> (<a class="el" href="structread__link__res__def.html">read_link_res</a> *res, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dir, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#9c58b1014190a13f06c8e8543250b75c">remote_readlink</a> (<a class="el" href="structread__link__res__def.html">read_link_res</a> *res, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> file, <a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#9f434aaabaf11bf8c3f2d659ee370ff4">remote_readlink_zfs_fh</a> (<a class="el" href="structread__link__res__def.html">read_link_res</a> *res, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh, <a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#61d17edd5f4f7d4ea3a5b17439233446">zfs_readlink</a> (<a class="el" href="structread__link__res__def.html">read_link_res</a> *res, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#0f37dae9e1b5a423c5e3a98b6f163139">local_symlink</a> (<a class="el" href="structdir__op__res__def.html">dir_op_res</a> *res, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dir, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structstring__def.html">string</a> *to, <a class="el" href="structsattr__def.html">sattr</a> *attr, <a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structmetadata__def.html">metadata</a> *meta)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#66a1cca7cf863e7430a1cd27d2c6b2b4">remote_symlink</a> (<a class="el" href="structdir__op__res__def.html">dir_op_res</a> *res, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dir, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structstring__def.html">string</a> *to, <a class="el" href="structsattr__def.html">sattr</a> *attr, <a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#5cd3939547181a6018317e522a76278a">zfs_symlink</a> (<a class="el" href="structdir__op__res__def.html">dir_op_res</a> *res, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *dir, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structstring__def.html">string</a> *to, <a class="el" href="structsattr__def.html">sattr</a> *attr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#e20ebe4a832ff897e3e5a486bad1cb33">local_mknod</a> (<a class="el" href="structdir__op__res__def.html">dir_op_res</a> *res, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dir, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structsattr__def.html">sattr</a> *attr, <a class="el" href="zfs-prot_8h.html#fd6f88a62c177fab51044d30a2bc4587">ftype</a> type, uint32_t rdev, <a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structmetadata__def.html">metadata</a> *meta)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#2057dbc57390be8960e2f66d1d2f0610">remote_mknod</a> (<a class="el" href="structdir__op__res__def.html">dir_op_res</a> *res, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dir, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structsattr__def.html">sattr</a> *attr, <a class="el" href="zfs-prot_8h.html#fd6f88a62c177fab51044d30a2bc4587">ftype</a> type, uint32_t rdev, <a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#6f431daf781852b2b57ece618145345a">zfs_mknod</a> (<a class="el" href="structdir__op__res__def.html">dir_op_res</a> *res, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *dir, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structsattr__def.html">sattr</a> *attr, <a class="el" href="zfs-prot_8h.html#fd6f88a62c177fab51044d30a2bc4587">ftype</a> type, uint32_t rdev)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#bfad5cba0ead5fbccb09840db4235210">local_file_info</a> (<a class="el" href="structfile__info__res__def.html">file_info_res</a> *res, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh, <a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#736d8c33ebf4ca64a88d7b70b4dc7ec0">remote_file_info</a> (<a class="el" href="structfile__info__res__def.html">file_info_res</a> *res, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh, <a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#3ca50568c08035d7709da2032dd7fd96">zfs_file_info</a> (<a class="el" href="structfile__info__res__def.html">file_info_res</a> *res, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#34475c6731126953143b262aea08863f">move_from_shadow</a> (<a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dir, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *dir_fh, bool journal)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#bf6ca0291d67388d4bb61f0a7ad6118e">move_to_shadow</a> (<a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dir, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *dir_fh, bool journal)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#0c1394ce5ab3a359f498b0be66754c4b">local_reintegrate</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry, char status)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#625590e10eb55837aeef8d96aeeceb3b">remote_reintegrate</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry, char status, <a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#d16711e95bf872a7b4c50b9c1385f409">zfs_reintegrate</a> (<a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh, char status)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#e5229cfc22e43e2461749087c7422a87">local_reintegrate_add</a> (<a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dir, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *dir_fh, bool journal)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#005e797ebdabfc88e5c4ba9c5cfff7ff">remote_reintegrate_add</a> (<a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dir, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *dir_fh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#c60f35e14032efb01d3586e6465f8c67">zfs_reintegrate_add</a> (<a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *dir, <a class="el" href="structstring__def.html">string</a> *name)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#b47b12e4edc577f1a86d1f5365eaa0c5">local_reintegrate_del_fh</a> (<a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#1ea3c230de158d01ad8d518c2b8249bf">local_reintegrate_del_base</a> (<a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh, <a class="el" href="structstring__def.html">string</a> *name, bool destroy_p, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *dir_fh, bool journal)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#4335699bf0aafee5b53d8758a1b9f8b2">local_reintegrate_del</a> (<a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dir, <a class="el" href="structstring__def.html">string</a> *name, bool destroy_p, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *dir_fh, bool journal)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#31aa929706709be89b7f0749db52663e">remote_reintegrate_del_fh</a> (<a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#f9682447dfa8dd2817f3ce7163c36e92">remote_reintegrate_del</a> (<a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh, <a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dir, <a class="el" href="structstring__def.html">string</a> *name, bool destroy_p, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *dir_fh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#f56fde72d1747882abbda95df28a9008">remote_reintegrate_del_zfs_fh</a> (<a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *dir, <a class="el" href="structstring__def.html">string</a> *name, bool destroy_p)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#48e73d04687df6980fab878e7149afec">zfs_reintegrate_del</a> (<a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *dir, <a class="el" href="structstring__def.html">string</a> *name, bool destroy_p)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#e621af2672afd9937e53cb3e472e7fd1">local_reintegrate_ver</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry, uint64_t version_inc, <a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#daccd251bab14eb9064119df13928b4f">remote_reintegrate_ver</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry, uint64_t version_inc, <a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh, <a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#6aa6ac491411f6d39da7e96bd5eac75a">zfs_reintegrate_ver</a> (<a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh, uint64_t version_inc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#2e356ce418c68adbbf70305d891088cd">local_invalidate_fh</a> (<a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#62f8f3b4fce6e34fd68efd0b71148d8a">local_invalidate</a> (<a class="el" href="structinternal__dentry__def.html">internal_dentry</a> dentry, bool volume_root_p)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2dir_8c.html#70b6fbf968676c72a47d38e4ad580270">refresh_fh</a> (<a class="el" href="structzfs__fh__def.html">zfs_fh</a> *fh)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Directory operations. 
<p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="1ab13e92ad99af7afeb4d2fa1bcd670d"></a><!-- doxytag: member="backup/dir.c::build_local_path" ref="1ab13e92ad99af7afeb4d2fa1bcd670d" args="(string *dst, volume vol, internal_dentry dentry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void build_local_path           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the local path of file for dentry DENTRY on volume VOL. 
</div>
</div><p>
<a class="anchor" name="9969c6013023932e4b999a86e3310692"></a><!-- doxytag: member="backup/dir.c::build_local_path_name" ref="9969c6013023932e4b999a86e3310692" args="(string *dst, volume vol, internal_dentry dentry, string *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t build_local_path_name           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the local path of file NAME in directory DENTRY on volume VOL. 
</div>
</div><p>
<a class="anchor" name="cf0c0eb1d80f0c287f1c120df737f96e"></a><!-- doxytag: member="backup/dir.c::build_local_path_name_dirstamp" ref="cf0c0eb1d80f0c287f1c120df737f96e" args="(string *dst, volume vol, internal_dentry dentry, string *name, time_t *dirstamp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t build_local_path_name_dirstamp           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t *&nbsp;</td>
          <td class="paramname"> <em>dirstamp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="6224a3683a7c98202c94b702994cad47"></a><!-- doxytag: member="backup/dir.c::build_relative_path" ref="6224a3683a7c98202c94b702994cad47" args="(string *dst, internal_dentry dentry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void build_relative_path           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return a path of file for dentry DENTRY relative to volume root. 
</div>
</div><p>
<a class="anchor" name="c6187160837c89b46bef165a25464e02"></a><!-- doxytag: member="backup/dir.c::build_relative_path_name" ref="c6187160837c89b46bef165a25464e02" args="(string *dst, internal_dentry dentry, string *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void build_relative_path_name           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return a path of file NAME in directory DENTRY relative to volume root. 
</div>
</div><p>
<a class="anchor" name="d0344d5b06b02fb7158200039b210c0a"></a><!-- doxytag: member="backup/dir.c::fattr_from_struct_stat" ref="d0344d5b06b02fb7158200039b210c0a" args="(fattr *attr, struct stat *st)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void fattr_from_struct_stat           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfattr__def.html">fattr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct stat *&nbsp;</td>
          <td class="paramname"> <em>st</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Convert attributes from STRUCT STAT ST to FATTR ATTR. 
</div>
</div><p>
<a class="anchor" name="104dae74d09aed56df0dec3b5b872aa3"></a><!-- doxytag: member="backup/dir.c::file_name_from_path" ref="104dae74d09aed56df0dec3b5b872aa3" args="(string *dst, string *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void file_name_from_path           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>path</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return short file name from the path PATH. 
</div>
</div><p>
<a class="anchor" name="53560757accbb4af3cd943361103195c"></a><!-- doxytag: member="backup/dir.c::get_volume_root_dentry" ref="53560757accbb4af3cd943361103195c" args="(volume vol, internal_dentry *dentryp, bool unlock_fh_mutex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t get_volume_root_dentry           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *&nbsp;</td>
          <td class="paramname"> <em>dentryp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>unlock_fh_mutex</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Update root of volume VOL, create an internal file handle for it and store it to IFH. On return, fh_mutex is unlocked on failure or if (unlock_fh_mutex). 
</div>
</div><p>
<a class="anchor" name="064b8639d98bef50168284ed831de022"></a><!-- doxytag: member="backup/dir.c::get_volume_root_local" ref="064b8639d98bef50168284ed831de022" args="(volume vol, zfs_fh *local_fh, fattr *attr, metadata *meta)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t get_volume_root_local           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>local_fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfattr__def.html">fattr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmetadata__def.html">metadata</a> *&nbsp;</td>
          <td class="paramname"> <em>meta</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Store the local file handle of root of volume VOL to LOCAL_FH and its attributes to ATTR. 
</div>
</div><p>
<a class="anchor" name="850c7ab23a1301507afcd9a2d3a073b3"></a><!-- doxytag: member="backup/dir.c::get_volume_root_remote" ref="850c7ab23a1301507afcd9a2d3a073b3" args="(volume vol, zfs_fh *remote_fh, fattr *attr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t get_volume_root_remote           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>remote_fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfattr__def.html">fattr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Store the remote file handle of root of volume VOL to REMOTE_FH and its attributes to ATTR. 
</div>
</div><p>
<a class="anchor" name="17f55cc22437fe017949dfd4a319d7a8"></a><!-- doxytag: member="backup/dir.c::inc_local_version_fh" ref="17f55cc22437fe017949dfd4a319d7a8" args="(zfs_fh *fh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool inc_local_version_fh           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Increase the local version of a file handle. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fh</em>&nbsp;</td><td>ZFS file handle whose version will be increased. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="bfad5cba0ead5fbccb09840db4235210"></a><!-- doxytag: member="backup/dir.c::local_file_info" ref="bfad5cba0ead5fbccb09840db4235210" args="(file_info_res *res, zfs_fh *fh, volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t local_file_info           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfile__info__res__def.html">file_info_res</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Check whether local file FH on volume VOL exists. 
</div>
</div><p>
<a class="anchor" name="9380aa451a1e90652d8bb7ef34259c87"></a><!-- doxytag: member="backup/dir.c::local_getattr" ref="9380aa451a1e90652d8bb7ef34259c87" args="(fattr *attr, internal_dentry dentry, volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t local_getattr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfattr__def.html">fattr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get attributes of local file DENTRY on volume VOL and store them to ATTR. 
</div>
</div><p>
<a class="anchor" name="32cccd93fd6fb9cbbb0b9dae02cf5c03"></a><!-- doxytag: member="backup/dir.c::local_getattr_path" ref="32cccd93fd6fb9cbbb0b9dae02cf5c03" args="(fattr *attr, string *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t local_getattr_path           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfattr__def.html">fattr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>path</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get attributes of local file PATH and store them to ATTR. 
</div>
</div><p>
<a class="anchor" name="78b8ea10baeb929521bfc8da75025ea6"></a><!-- doxytag: member="backup/dir.c::local_getattr_path_ns" ref="78b8ea10baeb929521bfc8da75025ea6" args="(fattr *attr, string *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t local_getattr_path_ns           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfattr__def.html">fattr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>path</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="62f8f3b4fce6e34fd68efd0b71148d8a"></a><!-- doxytag: member="backup/dir.c::local_invalidate" ref="62f8f3b4fce6e34fd68efd0b71148d8a" args="(internal_dentry dentry, bool volume_root_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t local_invalidate           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>volume_root_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Invalidate dentry DENTRY in kernel dentry cache. 
</div>
</div><p>
<a class="anchor" name="2e356ce418c68adbbf70305d891088cd"></a><!-- doxytag: member="backup/dir.c::local_invalidate_fh" ref="2e356ce418c68adbbf70305d891088cd" args="(zfs_fh *fh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t local_invalidate_fh           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Invalidate file handle DENTRY in kernel dentry cache. 
</div>
</div><p>
<a class="anchor" name="bd7973fafe6808c4df40ecb540fdf6f4"></a><!-- doxytag: member="backup/dir.c::local_link" ref="bd7973fafe6808c4df40ecb540fdf6f4" args="(metadata *meta, internal_dentry from, internal_dentry dir, string *name, volume vol, zfs_fh *fh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t local_link           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmetadata__def.html">metadata</a> *&nbsp;</td>
          <td class="paramname"> <em>meta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Link local file FROM with file handle FH to be a file with NAME in directory DIR on volume VOL. Store the metadata to META. 
</div>
</div><p>
<a class="anchor" name="b1a7b5ff496661d953749fcb55fc4049"></a><!-- doxytag: member="backup/dir.c::local_link_base" ref="b1a7b5ff496661d953749fcb55fc4049" args="(metadata *meta, string *from_path, string *to_path, zfs_fh *fh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t local_link_base           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmetadata__def.html">metadata</a> *&nbsp;</td>
          <td class="paramname"> <em>meta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>from_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>to_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Link local file FROM_PATH with file handle FH to TO_PATH. Use the metadata META for adding a metadata hardlink. 
</div>
</div><p>
<a class="anchor" name="e7a1d6fa38d4f06debf13dd89fff27c5"></a><!-- doxytag: member="backup/dir.c::local_lookup" ref="e7a1d6fa38d4f06debf13dd89fff27c5" args="(dir_op_res *res, internal_dentry dir, string *name, volume vol, metadata *meta)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t local_lookup           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdir__op__res__def.html">dir_op_res</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmetadata__def.html">metadata</a> *&nbsp;</td>
          <td class="paramname"> <em>meta</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Lookup local file NAME in directory DIR on volume VOL and store its file handle and attributes to RES. 
</div>
</div><p>
<a class="anchor" name="f9ea09ae211be76b787d0275eb3bc517"></a><!-- doxytag: member="backup/dir.c::local_lookup_dirstamp" ref="f9ea09ae211be76b787d0275eb3bc517" args="(dir_op_res *res, internal_dentry dir, string *name, volume vol, metadata *meta, time_t *dirstamp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t local_lookup_dirstamp           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdir__op__res__def.html">dir_op_res</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmetadata__def.html">metadata</a> *&nbsp;</td>
          <td class="paramname"> <em>meta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t *&nbsp;</td>
          <td class="paramname"> <em>dirstamp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="df5a1123e169a16c95505cde53f68045"></a><!-- doxytag: member="backup/dir.c::local_mkdir" ref="df5a1123e169a16c95505cde53f68045" args="(dir_op_res *res, internal_dentry dir, string *name, sattr *attr, volume vol, metadata *meta)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t local_mkdir           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdir__op__res__def.html">dir_op_res</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsattr__def.html">sattr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmetadata__def.html">metadata</a> *&nbsp;</td>
          <td class="paramname"> <em>meta</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create directory NAME in local directory DIR on volume VOL, set owner, group and permitions according to ATTR. 
</div>
</div><p>
<a class="anchor" name="e20ebe4a832ff897e3e5a486bad1cb33"></a><!-- doxytag: member="backup/dir.c::local_mknod" ref="e20ebe4a832ff897e3e5a486bad1cb33" args="(dir_op_res *res, internal_dentry dir, string *name, sattr *attr, ftype type, uint32_t rdev, volume vol, metadata *meta)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t local_mknod           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdir__op__res__def.html">dir_op_res</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsattr__def.html">sattr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zfs-prot_8h.html#fd6f88a62c177fab51044d30a2bc4587">ftype</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>rdev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmetadata__def.html">metadata</a> *&nbsp;</td>
          <td class="paramname"> <em>meta</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create local special file NAME of type TYPE in directory DIR, set the attributes according to ATTR. If device is being created RDEV is its number. 
</div>
</div><p>
<a class="anchor" name="b96a9ac7b4a9ca22d02e7ef155a59325"></a><!-- doxytag: member="backup/dir.c::local_path_to_relative_path" ref="b96a9ac7b4a9ca22d02e7ef155a59325" args="(string *dst, volume vol, string *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void local_path_to_relative_path           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>path</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return a pointer into PATH where path relative to volume root starts. 
</div>
</div><p>
<a class="anchor" name="851ae5358f5ce98651c4ec33012f7956"></a><!-- doxytag: member="backup/dir.c::local_readlink" ref="851ae5358f5ce98651c4ec33012f7956" args="(read_link_res *res, internal_dentry file, volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t local_readlink           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structread__link__res__def.html">read_link_res</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read local symlink FILE on volume VOL. 
</div>
</div><p>
<a class="anchor" name="39ac9a4449a031763f16a018eb43aaff"></a><!-- doxytag: member="backup/dir.c::local_readlink_name" ref="39ac9a4449a031763f16a018eb43aaff" args="(read_link_res *res, internal_dentry dir, string *name, volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t local_readlink_name           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structread__link__res__def.html">read_link_res</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read local symlink NAME in directroy DIR on volume VOL. 
</div>
</div><p>
<a class="anchor" name="0c1394ce5ab3a359f498b0be66754c4b"></a><!-- doxytag: member="backup/dir.c::local_reintegrate" ref="0c1394ce5ab3a359f498b0be66754c4b" args="(internal_dentry dentry, char status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t local_reintegrate           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>status</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Acquire (STATUS != 0) or release (STATUS == 0) the privilege to reintegrate local file DENTRY. 
</div>
</div><p>
<a class="anchor" name="e5229cfc22e43e2461749087c7422a87"></a><!-- doxytag: member="backup/dir.c::local_reintegrate_add" ref="e5229cfc22e43e2461749087c7422a87" args="(volume vol, internal_dentry dir, string *name, zfs_fh *fh, zfs_fh *dir_fh, bool journal)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t local_reintegrate_add           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>dir_fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>journal</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Name the local file handle FH as NAME in directory DIR with file handle DIR_FH on volume VOL by moving the file or linking it. 
</div>
</div><p>
<a class="anchor" name="4335699bf0aafee5b53d8758a1b9f8b2"></a><!-- doxytag: member="backup/dir.c::local_reintegrate_del" ref="4335699bf0aafee5b53d8758a1b9f8b2" args="(volume vol, zfs_fh *fh, internal_dentry dir, string *name, bool destroy_p, zfs_fh *dir_fh, bool journal)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t local_reintegrate_del           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>destroy_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>dir_fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>journal</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
If DESTROY_P delete local file NAME and its subtree from directory DIR with file handle DIR_FH on volume VOL, otherwise move it to shadow. Add a record to journal if JOURNAL. 
</div>
</div><p>
<a class="anchor" name="1ea3c230de158d01ad8d518c2b8249bf"></a><!-- doxytag: member="backup/dir.c::local_reintegrate_del_base" ref="1ea3c230de158d01ad8d518c2b8249bf" args="(zfs_fh *fh, string *name, bool destroy_p, zfs_fh *dir_fh, bool journal)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t local_reintegrate_del_base           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>destroy_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>dir_fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>journal</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
If DESTROY_P delete local file NAME with file handle FH and its subtree from directory DIR_FH, otherwise move it to shadow. Add a record to journal if JOURNAL. 
</div>
</div><p>
<a class="anchor" name="b47b12e4edc577f1a86d1f5365eaa0c5"></a><!-- doxytag: member="backup/dir.c::local_reintegrate_del_fh" ref="b47b12e4edc577f1a86d1f5365eaa0c5" args="(zfs_fh *fh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t local_reintegrate_del_fh           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Delete local file FH from shadow. 
</div>
</div><p>
<a class="anchor" name="e621af2672afd9937e53cb3e472e7fd1"></a><!-- doxytag: member="backup/dir.c::local_reintegrate_ver" ref="e621af2672afd9937e53cb3e472e7fd1" args="(internal_dentry dentry, uint64_t version_inc, volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t local_reintegrate_ver           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>version_inc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Increase version of local file DENTRY on volume VOL by VERSION_INC. 
</div>
</div><p>
<a class="anchor" name="56aef10f599a4f382ae49d319046c086"></a><!-- doxytag: member="backup/dir.c::local_rename" ref="56aef10f599a4f382ae49d319046c086" args="(metadata *meta_old, metadata *meta_new, internal_dentry from_dir, string *from_name, internal_dentry to_dir, string *to_name, volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t local_rename           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmetadata__def.html">metadata</a> *&nbsp;</td>
          <td class="paramname"> <em>meta_old</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmetadata__def.html">metadata</a> *&nbsp;</td>
          <td class="paramname"> <em>meta_new</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>from_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>from_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>to_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>to_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Rename local file FROM_NAME in directory FROM_DIR to file TO_NAME in directory TO_DIR on volume VOL. Store the metadata of original file TO_NAME to META_OLD and the metadata of the new file TO_NAME to META_NEW. 
</div>
</div><p>
<a class="anchor" name="b61ae69e9c0cf892452a25b4d1922066"></a><!-- doxytag: member="backup/dir.c::local_rename_base" ref="b61ae69e9c0cf892452a25b4d1922066" args="(metadata *meta_old, metadata *meta_new, string *from_path, string *to_path, volume vol, bool shadow, bool should_version)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t local_rename_base           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmetadata__def.html">metadata</a> *&nbsp;</td>
          <td class="paramname"> <em>meta_old</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmetadata__def.html">metadata</a> *&nbsp;</td>
          <td class="paramname"> <em>meta_new</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>from_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>to_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>shadow</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>should_version</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Rename local file FROM_PATH to TO_PATH on volume VOL. Store the metadata of original file TO_PATH to META_OLD and the metadata of the new file TO_PATH to META_NEW. If SHADOW is true the file will be in shadow. 
</div>
</div><p>
<a class="anchor" name="3e0f55b6bfa9910e96ca95f70c5124a8"></a><!-- doxytag: member="backup/dir.c::local_rmdir" ref="3e0f55b6bfa9910e96ca95f70c5124a8" args="(metadata *meta, internal_dentry dir, string *name, volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t local_rmdir           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmetadata__def.html">metadata</a> *&nbsp;</td>
          <td class="paramname"> <em>meta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Remove local directory NAME from directory DIR on volume VOL, store the metadata of the directory to META. 
</div>
</div><p>
<a class="anchor" name="3355272936b38ac2977ffd8af218eaa5"></a><!-- doxytag: member="backup/dir.c::local_setattr" ref="3355272936b38ac2977ffd8af218eaa5" args="(fattr *fa, internal_dentry dentry, sattr *sa, volume vol, bool should_version)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t local_setattr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfattr__def.html">fattr</a> *&nbsp;</td>
          <td class="paramname"> <em>fa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsattr__def.html">sattr</a> *&nbsp;</td>
          <td class="paramname"> <em>sa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>should_version</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set attributes of local file DENTRY on volume VOL according to SA, reget attributes and store them to FA. 
</div>
</div><p>
<a class="anchor" name="e8c4aaa943bfa7d93fc4f0e5f49b5df1"></a><!-- doxytag: member="backup/dir.c::local_setattr_path" ref="e8c4aaa943bfa7d93fc4f0e5f49b5df1" args="(fattr *fa, string *path, sattr *sa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t local_setattr_path           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfattr__def.html">fattr</a> *&nbsp;</td>
          <td class="paramname"> <em>fa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsattr__def.html">sattr</a> *&nbsp;</td>
          <td class="paramname"> <em>sa</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set attributes of local file PATH according to SA, reget attributes and store them to FA. 
</div>
</div><p>
<a class="anchor" name="0f37dae9e1b5a423c5e3a98b6f163139"></a><!-- doxytag: member="backup/dir.c::local_symlink" ref="0f37dae9e1b5a423c5e3a98b6f163139" args="(dir_op_res *res, internal_dentry dir, string *name, string *to, sattr *attr, volume vol, metadata *meta)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t local_symlink           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdir__op__res__def.html">dir_op_res</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsattr__def.html">sattr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmetadata__def.html">metadata</a> *&nbsp;</td>
          <td class="paramname"> <em>meta</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create local symlink NAME in directory DIR on volume VOL pointing to TO, set its attributes according to ATTR. 
</div>
</div><p>
<a class="anchor" name="7dc84316d909cb4bdc4f62b50682ae46"></a><!-- doxytag: member="backup/dir.c::local_unlink" ref="7dc84316d909cb4bdc4f62b50682ae46" args="(metadata *meta, internal_dentry dir, string *name, volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t local_unlink           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmetadata__def.html">metadata</a> *&nbsp;</td>
          <td class="paramname"> <em>meta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Delete local file NAME from directory DIR on volume VOL. Store the metadata of the file to META. 
</div>
</div><p>
<a class="anchor" name="34475c6731126953143b262aea08863f"></a><!-- doxytag: member="backup/dir.c::move_from_shadow" ref="34475c6731126953143b262aea08863f" args="(volume vol, zfs_fh *fh, internal_dentry dir, string *name, zfs_fh *dir_fh, bool journal)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool move_from_shadow           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>dir_fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>journal</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Move file FH from shadow on volume VOL to file NAME in directory DIR. 
</div>
</div><p>
<a class="anchor" name="bf6ca0291d67388d4bb61f0a7ad6118e"></a><!-- doxytag: member="backup/dir.c::move_to_shadow" ref="bf6ca0291d67388d4bb61f0a7ad6118e" args="(volume vol, zfs_fh *fh, internal_dentry dir, string *name, zfs_fh *dir_fh, bool journal)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool move_to_shadow           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>dir_fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>journal</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Move file NAME with file handle FH in directory DIR on volume VOL to shadow. Add journal entries if JOURNAL. 
</div>
</div><p>
<a class="anchor" name="4c68cfd887f4c15d7704613217f75c6a"></a><!-- doxytag: member="backup/dir.c::move_to_shadow_base" ref="4c68cfd887f4c15d7704613217f75c6a" args="(volume vol, zfs_fh *fh, string *path, string *name, zfs_fh *dir_fh, bool journal)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool move_to_shadow_base           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>dir_fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>journal</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Move file NAME with file handle FH and path PATH from directory DIR_FH on volume VOL to shadow. Add journal entries if JOURNAL. 
</div>
</div><p>
<a class="anchor" name="079483c1196a3c0b50e6338aded67881"></a><!-- doxytag: member="backup/dir.c::parent_exists" ref="079483c1196a3c0b50e6338aded67881" args="(string *path, struct stat *st)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t parent_exists           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct stat *&nbsp;</td>
          <td class="paramname"> <em>st</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Check whether parent of file PATH exists and return ESTALE if it does not exist. 
</div>
</div><p>
<a class="anchor" name="2a93962a13067e0eb1e411c1327414ef"></a><!-- doxytag: member="backup/dir.c::recursive_unlink" ref="2a93962a13067e0eb1e411c1327414ef" args="(string *path, uint32_t vid, bool destroy_dentry, bool journal_p, bool move_to_shadow_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t recursive_unlink           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>vid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>destroy_dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>journal_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>move_to_shadow_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Recursivelly unlink the file PATH on volume with ID == VID. If JOURNAL_P add a journal entries to appropriate journals. Destroy the dentries of the deleted files if DESTROY_DENTRY. 
</div>
</div><p>
<a class="anchor" name="d82d30c4b969b34f0cfbfd8445cb0628"></a><!-- doxytag: member="backup/dir.c::recursive_unlink_contents" ref="d82d30c4b969b34f0cfbfd8445cb0628" args="(metadata *meta, string *path, zfs_fh *parent_fh, zfs_fh *fh, bool destroy_dentry, bool journal_p, bool inc_version_p, bool move_to_shadow_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t recursive_unlink_contents           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmetadata__def.html">metadata</a> *&nbsp;</td>
          <td class="paramname"> <em>meta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>parent_fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>destroy_dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>journal_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>inc_version_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>move_to_shadow_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Delete the contents of directory PATH with file handle FH and parent PARENT_FH. Use META for reading and deleting metadata. If JOURNAL_P, add a journal entry to journal for the directory. Destroy the dentries of the deleted files if DESTROY_DENTRY. 
</div>
</div><p>
<a class="anchor" name="cec84d5d3871a0605c5cac45288d3fbf"></a><!-- doxytag: member="backup/dir.c::recursive_unlink_itself" ref="cec84d5d3871a0605c5cac45288d3fbf" args="(metadata *meta, string *path, string *name, volume vol, zfs_fh *parent_fh, journal_t journal, bool destroy_dentry, bool inc_version_p, bool move_to_shadow_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t recursive_unlink_itself           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmetadata__def.html">metadata</a> *&nbsp;</td>
          <td class="paramname"> <em>meta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>parent_fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjournal__def.html">journal_t</a>&nbsp;</td>
          <td class="paramname"> <em>journal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>destroy_dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>inc_version_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>move_to_shadow_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Delete a generic file. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>meta</em>&nbsp;</td><td>Buffer for metadata. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>Path to the file. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>Name of the file. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>vol</em>&nbsp;</td><td>Volume that the file is on, if any. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>parent_fh</em>&nbsp;</td><td>File handle of parent directory. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>journal</em>&nbsp;</td><td>Journal to which a del entry should be added. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>destroy_dentry</em>&nbsp;</td><td>Destroy corresponding dentry. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>inc_version_p</em>&nbsp;</td><td>Increase the version of parent directory. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>move_to_shadow_p</em>&nbsp;</td><td>Move the file to shadow if necessary. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="a73e611c875cc652d0152117523c981f"></a><!-- doxytag: member="backup/dir.c::recursive_unlink_start" ref="a73e611c875cc652d0152117523c981f" args="(metadata *meta, string *path, string *name, zfs_fh *parent_fh, bool destroy_dentry, bool journal_p, bool inc_version_p, bool move_to_shadow_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t recursive_unlink_start           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmetadata__def.html">metadata</a> *&nbsp;</td>
          <td class="paramname"> <em>meta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>parent_fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>destroy_dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>journal_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>inc_version_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>move_to_shadow_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Recursively delete generic file NAME with path PATH in directory PARENT_FH on volume VOL. Use META for reading and deleting metadata. If JOURNAL_P add a journal entry to journal for the directory PARENT_FH. Destroy the dentries of the deleted files if DESTROY_DENTRY. 
</div>
</div><p>
<a class="anchor" name="70b6fbf968676c72a47d38e4ad580270"></a><!-- doxytag: member="backup/dir.c::refresh_fh" ref="70b6fbf968676c72a47d38e4ad580270" args="(zfs_fh *fh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t refresh_fh           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Refresh file handle FH. 
</div>
</div><p>
<a class="anchor" name="736d8c33ebf4ca64a88d7b70b4dc7ec0"></a><!-- doxytag: member="backup/dir.c::remote_file_info" ref="736d8c33ebf4ca64a88d7b70b4dc7ec0" args="(file_info_res *res, zfs_fh *fh, volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t remote_file_info           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfile__info__res__def.html">file_info_res</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Check whether remote file for FH on volume VOL exists. 
</div>
</div><p>
<a class="anchor" name="29033fa55fb908fa17812d9c4016f0e7"></a><!-- doxytag: member="backup/dir.c::remote_getattr" ref="29033fa55fb908fa17812d9c4016f0e7" args="(fattr *attr, internal_dentry dentry, volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t remote_getattr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfattr__def.html">fattr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get attributes of remote file DENTRY on volume VOL and store them to ATTR. 
</div>
</div><p>
<a class="anchor" name="f3d5ea81893a05ac6a450b160e3f29df"></a><!-- doxytag: member="backup/dir.c::remote_link" ref="f3d5ea81893a05ac6a450b160e3f29df" args="(internal_dentry from, internal_dentry dir, string *name, volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t remote_link           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Link remote file FROM to be a file with NAME in directory DIR on volume VOL. 
</div>
</div><p>
<a class="anchor" name="3f31241831f3bb09b2958d2dc916bf21"></a><!-- doxytag: member="backup/dir.c::remote_lookup" ref="3f31241831f3bb09b2958d2dc916bf21" args="(dir_op_res *res, internal_dentry dir, string *name, volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t remote_lookup           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdir__op__res__def.html">dir_op_res</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Lookup remote file NAME in directory DIR on volume VOL and store its file handle and attributes to RES. 
</div>
</div><p>
<a class="anchor" name="f60f588dd254f28b367f457d6b6ed5e9"></a><!-- doxytag: member="backup/dir.c::remote_lookup_zfs_fh" ref="f60f588dd254f28b367f457d6b6ed5e9" args="(dir_op_res *res, zfs_fh *dir, string *name, volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t remote_lookup_zfs_fh           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdir__op__res__def.html">dir_op_res</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Lookup remote file NAME in directory DIR on volume VOL and store its file handle and attributes to RES. 
</div>
</div><p>
<a class="anchor" name="137136877adac6798fd2a38e60aeb99a"></a><!-- doxytag: member="backup/dir.c::remote_mkdir" ref="137136877adac6798fd2a38e60aeb99a" args="(dir_op_res *res, internal_dentry dir, string *name, sattr *attr, volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t remote_mkdir           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdir__op__res__def.html">dir_op_res</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsattr__def.html">sattr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create directory NAME in remote directory DIR on volume VOL, set owner, group and permitions according to ATTR. 
</div>
</div><p>
<a class="anchor" name="2057dbc57390be8960e2f66d1d2f0610"></a><!-- doxytag: member="backup/dir.c::remote_mknod" ref="2057dbc57390be8960e2f66d1d2f0610" args="(dir_op_res *res, internal_dentry dir, string *name, sattr *attr, ftype type, uint32_t rdev, volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t remote_mknod           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdir__op__res__def.html">dir_op_res</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsattr__def.html">sattr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zfs-prot_8h.html#fd6f88a62c177fab51044d30a2bc4587">ftype</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>rdev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create remote special file NAME of type TYPE in directory DIR, set the attributes according to ATTR. If device is being created RDEV is its number. 
</div>
</div><p>
<a class="anchor" name="9c58b1014190a13f06c8e8543250b75c"></a><!-- doxytag: member="backup/dir.c::remote_readlink" ref="9c58b1014190a13f06c8e8543250b75c" args="(read_link_res *res, internal_dentry file, volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t remote_readlink           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structread__link__res__def.html">read_link_res</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read remote symlink FILE on volume VOL. 
</div>
</div><p>
<a class="anchor" name="9f434aaabaf11bf8c3f2d659ee370ff4"></a><!-- doxytag: member="backup/dir.c::remote_readlink_zfs_fh" ref="9f434aaabaf11bf8c3f2d659ee370ff4" args="(read_link_res *res, zfs_fh *fh, volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t remote_readlink_zfs_fh           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structread__link__res__def.html">read_link_res</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read remote symlink FH on volume VOL. 
</div>
</div><p>
<a class="anchor" name="625590e10eb55837aeef8d96aeeceb3b"></a><!-- doxytag: member="backup/dir.c::remote_reintegrate" ref="625590e10eb55837aeef8d96aeeceb3b" args="(internal_dentry dentry, char status, volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t remote_reintegrate           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Acquire (STATUS != 0) or release (STATUS == 0) the privilege to reintegrate remote file DENTRY on volume VOL. 
</div>
</div><p>
<a class="anchor" name="005e797ebdabfc88e5c4ba9c5cfff7ff"></a><!-- doxytag: member="backup/dir.c::remote_reintegrate_add" ref="005e797ebdabfc88e5c4ba9c5cfff7ff" args="(volume vol, internal_dentry dir, string *name, zfs_fh *fh, zfs_fh *dir_fh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t remote_reintegrate_add           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>dir_fh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Name the remote file handle FH as NAME in directory DIR on volume VOL by moving the file or linking it. 
</div>
</div><p>
<a class="anchor" name="f9682447dfa8dd2817f3ce7163c36e92"></a><!-- doxytag: member="backup/dir.c::remote_reintegrate_del" ref="f9682447dfa8dd2817f3ce7163c36e92" args="(volume vol, zfs_fh *fh, internal_dentry dir, string *name, bool destroy_p, zfs_fh *dir_fh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t remote_reintegrate_del           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>destroy_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>dir_fh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
If DESTROY_P delete remote file NAME and its subtree from directory DIR with file handle DIR_FH, otherwise move it to shadow. 
</div>
</div><p>
<a class="anchor" name="31aa929706709be89b7f0749db52663e"></a><!-- doxytag: member="backup/dir.c::remote_reintegrate_del_fh" ref="31aa929706709be89b7f0749db52663e" args="(zfs_fh *fh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t remote_reintegrate_del_fh           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Delete remote file FH from shadow. 
</div>
</div><p>
<a class="anchor" name="f56fde72d1747882abbda95df28a9008"></a><!-- doxytag: member="backup/dir.c::remote_reintegrate_del_zfs_fh" ref="f56fde72d1747882abbda95df28a9008" args="(volume vol, zfs_fh *fh, zfs_fh *dir, string *name, bool destroy_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t remote_reintegrate_del_zfs_fh           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>destroy_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
If DESTROY_P delete remote file NAME and its subtree from directory DIR, otherwise move it to shadow. 
</div>
</div><p>
<a class="anchor" name="daccd251bab14eb9064119df13928b4f"></a><!-- doxytag: member="backup/dir.c::remote_reintegrate_ver" ref="daccd251bab14eb9064119df13928b4f" args="(internal_dentry dentry, uint64_t version_inc, zfs_fh *fh, volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t remote_reintegrate_ver           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>version_inc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Increase version of remote file handle FH with dentry DENTRY on volume VOL by VERSION_INC. 
</div>
</div><p>
<a class="anchor" name="2be05bbb8af5ce78cec828e6750b6206"></a><!-- doxytag: member="backup/dir.c::remote_rename" ref="2be05bbb8af5ce78cec828e6750b6206" args="(internal_dentry from_dir, string *from_name, internal_dentry to_dir, string *to_name, volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t remote_rename           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>from_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>from_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>to_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>to_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Rename remote file FROM_NAME in directory FROM_DIR to file TO_NAME in directory TO_DIR on volume VOL. 
</div>
</div><p>
<a class="anchor" name="c55b8eaef390821de3c36bf791286f25"></a><!-- doxytag: member="backup/dir.c::remote_rmdir" ref="c55b8eaef390821de3c36bf791286f25" args="(internal_dentry dir, string *name, volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t remote_rmdir           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Remove remote directory NAME from directory DIR on volume VOL. 
</div>
</div><p>
<a class="anchor" name="d1ab84e954366b3f15c9df15022a38e5"></a><!-- doxytag: member="backup/dir.c::remote_setattr" ref="d1ab84e954366b3f15c9df15022a38e5" args="(fattr *fa, internal_dentry dentry, sattr *sa, volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t remote_setattr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfattr__def.html">fattr</a> *&nbsp;</td>
          <td class="paramname"> <em>fa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsattr__def.html">sattr</a> *&nbsp;</td>
          <td class="paramname"> <em>sa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set attributes of remote file DENTRY on volume VOL according to SA, reget attributes and store them to FA. 
</div>
</div><p>
<a class="anchor" name="66a1cca7cf863e7430a1cd27d2c6b2b4"></a><!-- doxytag: member="backup/dir.c::remote_symlink" ref="66a1cca7cf863e7430a1cd27d2c6b2b4" args="(dir_op_res *res, internal_dentry dir, string *name, string *to, sattr *attr, volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t remote_symlink           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdir__op__res__def.html">dir_op_res</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsattr__def.html">sattr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create remote symlink NAME in directory DIR on volume VOL pointing to TO, set its attributes according to ATTR. 
</div>
</div><p>
<a class="anchor" name="64ef8f8643e957a56f34e3263558439c"></a><!-- doxytag: member="backup/dir.c::remote_unlink" ref="64ef8f8643e957a56f34e3263558439c" args="(internal_dentry dir, string *name, volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t remote_unlink           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Delete remote file NAME from directory DIR on volume VOL. 
</div>
</div><p>
<a class="anchor" name="5eac22536a3b27b4810e08647fbea30c"></a><!-- doxytag: member="backup/dir.c::validate_operation_on_virtual_directory" ref="5eac22536a3b27b4810e08647fbea30c" args="(virtual_dir pvd, string *name, internal_dentry *dir, uint32_t conflict_error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t validate_operation_on_virtual_directory           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvirtual__dir__def.html">virtual_dir</a>&nbsp;</td>
          <td class="paramname"> <em>pvd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a> *&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>conflict_error</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Check whether we can perform file system change operation on NAME in virtual directory PVD. Resolve whether the is a volume mapped on PVD whose mounpoint name is not NAME and if so return ZFS_OK and store the internal dentry of the root of volume to DIR. If there is a volume mapped on PVD and its root is a conflict directory we can't do a file system change operation. 
</div>
</div><p>
<a class="anchor" name="c52461e8beedcfe65316cc69a3a832a6"></a><!-- doxytag: member="backup/dir.c::validate_operation_on_volume_root" ref="c52461e8beedcfe65316cc69a3a832a6" args="(internal_dentry dentry, uint32_t conflict_error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t validate_operation_on_volume_root           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>conflict_error</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Check whether we can perform operation on volume root DENTRY. If DENTRY is a conflict directory return EINVAL if request came from network and CONFLICT_ERROR if request came from kernel. 
</div>
</div><p>
<a class="anchor" name="e8f7c2141a5ba11e71d977a991cfce9e"></a><!-- doxytag: member="backup/dir.c::validate_operation_on_zfs_fh" ref="e8f7c2141a5ba11e71d977a991cfce9e" args="(zfs_fh *fh, uint32_t conflict_error, uint32_t non_exist_error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t validate_operation_on_zfs_fh           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>conflict_error</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>non_exist_error</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Check whether we can perform operation on ZFS file handle FH. If request came from network return EINVAL for special file handles. Otherwise return CONFLICT_ERROR for conflict directory and NON_EXIST_ERROR for non-existing file. 
</div>
</div><p>
<a class="anchor" name="6c800d8c2531248f5a381a30098e1de1"></a><!-- doxytag: member="backup/dir.c::zfs_extended_lookup" ref="6c800d8c2531248f5a381a30098e1de1" args="(dir_op_res *res, zfs_fh *dir, char *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t zfs_extended_lookup           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdir__op__res__def.html">dir_op_res</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>path</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Lookup path PATH from directory DIR and store the dir_op_res of the last component to RES. Skip conflict directories. 
</div>
</div><p>
<a class="anchor" name="3ca50568c08035d7709da2032dd7fd96"></a><!-- doxytag: member="backup/dir.c::zfs_file_info" ref="3ca50568c08035d7709da2032dd7fd96" args="(file_info_res *res, zfs_fh *fh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t zfs_file_info           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfile__info__res__def.html">file_info_res</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Check whether local file FH exists. 
</div>
</div><p>
<a class="anchor" name="d503b494ba50471b58166aab42580140"></a><!-- doxytag: member="backup/dir.c::zfs_getattr" ref="d503b494ba50471b58166aab42580140" args="(fattr *fa, zfs_fh *fh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t zfs_getattr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfattr__def.html">fattr</a> *&nbsp;</td>
          <td class="paramname"> <em>fa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get attributes for file with handle FH and store them to FA. 
</div>
</div><p>
<a class="anchor" name="91b61222dc5d4740e0295c86862f8a49"></a><!-- doxytag: member="backup/dir.c::zfs_link" ref="91b61222dc5d4740e0295c86862f8a49" args="(zfs_fh *from, zfs_fh *dir, string *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t zfs_link           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Link file FROM to be a file with NAME in directory DIR. 
</div>
</div><p>
<a class="anchor" name="191daa5f54591b92e7f73e4ec1d2f84f"></a><!-- doxytag: member="backup/dir.c::zfs_link_journal" ref="191daa5f54591b92e7f73e4ec1d2f84f" args="(internal_dentry dir, string *name, volume vol, metadata *meta)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void zfs_link_journal           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmetadata__def.html">metadata</a> *&nbsp;</td>
          <td class="paramname"> <em>meta</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add a journal entry for a new dentry NAME in DIR on volume VOL accoring to metadata META and increase version of DIR. 
</div>
</div><p>
<a class="anchor" name="23b076c102a87814d63256a6078cb4d8"></a><!-- doxytag: member="backup/dir.c::zfs_lookup" ref="23b076c102a87814d63256a6078cb4d8" args="(dir_op_res *res, zfs_fh *dir, string *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t zfs_lookup           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdir__op__res__def.html">dir_op_res</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Lookup file NAME in directory DIR and store its file handle and attributes to RES. 
</div>
</div><p>
<a class="anchor" name="3f64d05b27d13814e649a3260cebdeb5"></a><!-- doxytag: member="backup/dir.c::zfs_mkdir" ref="3f64d05b27d13814e649a3260cebdeb5" args="(dir_op_res *res, zfs_fh *dir, string *name, sattr *attr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t zfs_mkdir           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdir__op__res__def.html">dir_op_res</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsattr__def.html">sattr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create directory NAME in directory DIR, set owner, group and permitions according to ATTR. 
</div>
</div><p>
<a class="anchor" name="6f431daf781852b2b57ece618145345a"></a><!-- doxytag: member="backup/dir.c::zfs_mknod" ref="6f431daf781852b2b57ece618145345a" args="(dir_op_res *res, zfs_fh *dir, string *name, sattr *attr, ftype type, uint32_t rdev)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t zfs_mknod           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdir__op__res__def.html">dir_op_res</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsattr__def.html">sattr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zfs-prot_8h.html#fd6f88a62c177fab51044d30a2bc4587">ftype</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>rdev</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create special file NAME of type TYPE in directory DIR, set the attributes according to ATTR. If device is being created RDEV is its number. 
</div>
</div><p>
<a class="anchor" name="61d17edd5f4f7d4ea3a5b17439233446"></a><!-- doxytag: member="backup/dir.c::zfs_readlink" ref="61d17edd5f4f7d4ea3a5b17439233446" args="(read_link_res *res, zfs_fh *fh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t zfs_readlink           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structread__link__res__def.html">read_link_res</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read symlink FH. 
</div>
</div><p>
<a class="anchor" name="d16711e95bf872a7b4c50b9c1385f409"></a><!-- doxytag: member="backup/dir.c::zfs_reintegrate" ref="d16711e95bf872a7b4c50b9c1385f409" args="(zfs_fh *fh, char status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t zfs_reintegrate           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>status</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Acquire (STATUS != 0) or release (STATUS == 0) the privilege to reintegrate file FH. 
</div>
</div><p>
<a class="anchor" name="c60f35e14032efb01d3586e6465f8c67"></a><!-- doxytag: member="backup/dir.c::zfs_reintegrate_add" ref="c60f35e14032efb01d3586e6465f8c67" args="(zfs_fh *fh, zfs_fh *dir, string *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t zfs_reintegrate_add           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Name the file handle FH as NAME in directory DIR by moving the file or linking it. 
</div>
</div><p>
<a class="anchor" name="48e73d04687df6980fab878e7149afec"></a><!-- doxytag: member="backup/dir.c::zfs_reintegrate_del" ref="48e73d04687df6980fab878e7149afec" args="(zfs_fh *fh, zfs_fh *dir, string *name, bool destroy_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t zfs_reintegrate_del           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>destroy_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
If DESTROY_P delete file NAME and its subtree from directory DIR, otherwise move it to shadow. 
</div>
</div><p>
<a class="anchor" name="6aa6ac491411f6d39da7e96bd5eac75a"></a><!-- doxytag: member="backup/dir.c::zfs_reintegrate_ver" ref="6aa6ac491411f6d39da7e96bd5eac75a" args="(zfs_fh *fh, uint64_t version_inc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t zfs_reintegrate_ver           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>version_inc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Increase version of file handle FH by VERSION_INC. 
</div>
</div><p>
<a class="anchor" name="dc227f5833ebbacb7190bf871ca2e078"></a><!-- doxytag: member="backup/dir.c::zfs_rename" ref="dc227f5833ebbacb7190bf871ca2e078" args="(zfs_fh *from_dir, string *from_name, zfs_fh *to_dir, string *to_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t zfs_rename           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>from_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>from_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>to_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>to_name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Rename file FROM_NAME in directory FROM_DIR to file TO_NAME in directory TO_DIR. 
</div>
</div><p>
<a class="anchor" name="65b799b7f49e3da6ac63d93330e6347d"></a><!-- doxytag: member="backup/dir.c::zfs_rename_journal" ref="65b799b7f49e3da6ac63d93330e6347d" args="(internal_dentry from_dir, string *from_name, internal_dentry to_dir, string *to_name, volume vol, metadata *meta_old, metadata *meta_new)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void zfs_rename_journal           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>from_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>from_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinternal__dentry__def.html">internal_dentry</a>&nbsp;</td>
          <td class="paramname"> <em>to_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>to_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmetadata__def.html">metadata</a> *&nbsp;</td>
          <td class="paramname"> <em>meta_old</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmetadata__def.html">metadata</a> *&nbsp;</td>
          <td class="paramname"> <em>meta_new</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add the journal dentries for the move of file FROM_NAME in FROM_DIR to TO_NAME in TO_DIR and increase versions of dirs. META_OLD is the metadata of overwritten file, METADATA_NEW is the metadata of the moved file. 
</div>
</div><p>
<a class="anchor" name="df3a608fc237ed562be2dd6c78de1b50"></a><!-- doxytag: member="backup/dir.c::zfs_rmdir" ref="df3a608fc237ed562be2dd6c78de1b50" args="(zfs_fh *dir, string *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t zfs_rmdir           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Remove directory NAME from directory DIR. 
</div>
</div><p>
<a class="anchor" name="4aa8b595d431678ee39bbe8d502fe6ce"></a><!-- doxytag: member="backup/dir.c::zfs_setattr" ref="4aa8b595d431678ee39bbe8d502fe6ce" args="(fattr *fa, zfs_fh *fh, sattr *sa, bool should_version)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t zfs_setattr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfattr__def.html">fattr</a> *&nbsp;</td>
          <td class="paramname"> <em>fa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>fh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsattr__def.html">sattr</a> *&nbsp;</td>
          <td class="paramname"> <em>sa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>should_version</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set attributes of file with handle FH according to SA, reget attributes and store them to FA. 
</div>
</div><p>
<a class="anchor" name="5cd3939547181a6018317e522a76278a"></a><!-- doxytag: member="backup/dir.c::zfs_symlink" ref="5cd3939547181a6018317e522a76278a" args="(dir_op_res *res, zfs_fh *dir, string *name, string *to, sattr *attr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t zfs_symlink           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdir__op__res__def.html">dir_op_res</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsattr__def.html">sattr</a> *&nbsp;</td>
          <td class="paramname"> <em>attr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create symlink NAME in directory DIR pointing to TO, set its attributes according to ATTR. 
</div>
</div><p>
<a class="anchor" name="a9acfda8b68908e86b62f7b4c2bb318a"></a><!-- doxytag: member="backup/dir.c::zfs_unlink" ref="a9acfda8b68908e86b62f7b4c2bb318a" args="(zfs_fh *dir, string *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t zfs_unlink           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structzfs__fh__def.html">zfs_fh</a> *&nbsp;</td>
          <td class="paramname"> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Remove directory NAME from directory DIR. 
</div>
</div><p>
<a class="anchor" name="47b50faa9e4d7745b90ec5e12830a1fe"></a><!-- doxytag: member="backup/dir.c::zfs_volume_root" ref="47b50faa9e4d7745b90ec5e12830a1fe" args="(dir_op_res *res, uint32_t vid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t zfs_volume_root           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdir__op__res__def.html">dir_op_res</a> *&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>vid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return file handle and attributes of root of volume VID. 
</div>
</div><p>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Aug 6 00:37:40 2010 for zlomekFS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.2 </small></address>
</body>
</html>
