<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>zlomekFS: zfsd.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul>
</div>
<div class="nav">
<a class="el" href="dir_21c430ab3b7001ae39034eae6f7edf71.html">zfsd</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_ac94841c51e61ddc7acc56e12a771012.html">backup</a></div>
<h1>backup/zfsd.c File Reference</h1>ZFS daemon. <a href="#_details">More...</a>
<p>
<code>#include &quot;<a class="el" href="backup_2system_8h-source.html">system.h</a>&quot;</code><br>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;unistd.h&gt;</code><br>
<code>#include &lt;limits.h&gt;</code><br>
<code>#include &lt;errno.h&gt;</code><br>
<code>#include &lt;sys/mman.h&gt;</code><br>
<code>#include &lt;signal.h&gt;</code><br>
<code>#include &lt;ucontext.h&gt;</code><br>
<code>#include &quot;<a class="el" href="backup_2pthread-wrapper_8h-source.html">pthread-wrapper.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2zfsd_8h-source.html">zfsd.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2memory_8h-source.html">memory.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2semaphore_8h-source.html">semaphore.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2hardlink-list_8h-source.html">hardlink-list.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2journal_8h-source.html">journal.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2config_8h-source.html">config.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2thread_8h-source.html">thread.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2kernel_8h-source.html">kernel.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2network_8h-source.html">network.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2random_8h-source.html">random.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2queue_8h-source.html">queue.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2fh_8h-source.html">fh.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2cap_8h-source.html">cap.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2file_8h-source.html">file.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2node_8h-source.html">node.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2volume_8h-source.html">volume.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2zfs-prot_8h-source.html">zfs-prot.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2metadata_8h-source.html">metadata.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2user-group_8h-source.html">user-group.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2update_8h-source.html">update.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2log_8h-source.html">log.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2dbus-provider_8h-source.html">dbus-provider.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2dbus-zfsd-service_8h-source.html">dbus-zfsd-service.h</a>&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structzfs__opts.html">zfs_opts</a></td></tr>

<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2zfsd_8c.html#99dcbea4efc5d58278f142a42fd0a39b">SI_FROMKERNEL</a>(siptr)&nbsp;&nbsp;&nbsp;((siptr)-&gt;si_code &gt; 0)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2zfsd_8c.html#0e35731059e990ab9b8383ec2f7e185b">ZFS_OPT</a>(t, p, v)&nbsp;&nbsp;&nbsp;{ t, offsetof (struct <a class="el" href="structzfs__opts.html">zfs_opts</a>, p), v }</td></tr>

<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="backup_2zfsd_8c.html#bc6126af1d45847bc59afa0aa3216b043a0297603315832ffae9a70c8e2e27e1">OPTION_HELP</a>, 
<a class="el" href="backup_2zfsd_8c.html#bc6126af1d45847bc59afa0aa3216b04fe6b54762d8578bdba577d1bb9fee63f">OPTION_VERSION</a>
 }</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2zfsd_8c.html#f73e76bbdf549448045be811ba64dcfd">exit_sighandler</a> (ATTRIBUTE_UNUSED int signum)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2zfsd_8c.html#60e9360d81ba9dae355adad131810a6d">fatal_sigaction</a> (int signum, siginfo_t *info, void *data)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2zfsd_8c.html#151c250ce49e5c3c48cf434b10eb35b8">hup_sighandler</a> (ATTRIBUTE_UNUSED int signum)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2zfsd_8c.html#4f06c61057aa88cf49d406fff77585a7">dummy_sighandler</a> (ATTRIBUTE_UNUSED int signum)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2zfsd_8c.html#2ee018f90aa74a781d92c53f72bd8350">init_sig_handlers</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2zfsd_8c.html#7f1626da1fbb5ac3101cee4dc0a0e01c">disable_sig_handlers</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2zfsd_8c.html#e8605e2b78cd4a81b6c6b5c30cb7366a">usage</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void ATTRIBUTE_NORETURN&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2zfsd_8c.html#f15fc3650cb27cda1695b5c27419ce67">version</a> (int exitcode)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2zfsd_8c.html#6154399298dddf458cca9029d21721f2">handle_one_argument</a> (ATTRIBUTE_UNUSED void *data, const char *arg, int key, ATTRIBUTE_UNUSED struct fuse_args *outargs)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2zfsd_8c.html#e5a67156b440ec26b6e11d1f11a8213e">process_arguments</a> (int argc, char **argv)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2zfsd_8c.html#5354b26c0e92bc241bbaf8daedc5a28c">terminate</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void ATTRIBUTE_NORETURN&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2zfsd_8c.html#41c3e83bacc63f4409e3aa663f1786a0">die</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2zfsd_8c.html#5904b4f16d6ceef0b30cfb8e75c35f50">initialize_data_structures</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2zfsd_8c.html#8a56f29c89bdb347000406b5e4a36fa4">cleanup_data_structures</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2zfsd_8c.html#0dabd02148a561a0bb3437379da3e0ce">daemon_mode</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2zfsd_8c.html#4be48a49b4dbf38e7a4031544ae8d35b">init_dbus</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2zfsd_8c.html#3c04138a5bfe5d72780bb7e82a18e627">main</a> (int argc, char **argv)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">pthread_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2zfsd_8c.html#5761c2f355ee358ef6f379d658ccb382">main_thread</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="backup_2dbus-service-descriptors_8h.html#610f467f5548cdf7d2073867ea336e5d">zfsd_state_e</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2zfsd_8c.html#44301d82503c7b500f2e0ac7e80cd617">zfsd_state</a> = ZFSD_STATE_STARTING</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2zfsd_8c.html#c269be8b91ae4b24df48de5d8ad7e7a7">config_file</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static struct fuse_opt&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2zfsd_8c.html#5f43baaccbe58ded0076720010eab5bd">main_options</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structdbus__state__holder__def.html">dbus_state_holder_def</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2zfsd_8c.html#e3c6fa7d93df05da04363eac383f264b">dbus_provider</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
ZFS daemon. 
<p>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="99dcbea4efc5d58278f142a42fd0a39b"></a><!-- doxytag: member="backup/zfsd.c::SI_FROMKERNEL" ref="99dcbea4efc5d58278f142a42fd0a39b" args="(siptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SI_FROMKERNEL          </td>
          <td>(</td>
          <td class="paramtype">siptr&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;((siptr)-&gt;si_code &gt; 0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="0e35731059e990ab9b8383ec2f7e185b"></a><!-- doxytag: member="backup/zfsd.c::ZFS_OPT" ref="0e35731059e990ab9b8383ec2f7e185b" args="(t, p, v)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ZFS_OPT          </td>
          <td>(</td>
          <td class="paramtype">t,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">v&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;{ t, offsetof (struct <a class="el" href="structzfs__opts.html">zfs_opts</a>, p), v }</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="bc6126af1d45847bc59afa0aa3216b04"></a><!-- doxytag: member="backup/zfsd.c::@3" ref="bc6126af1d45847bc59afa0aa3216b04" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
For long options that have no equivalent short option, use a non-character as a pseudo short option, starting with CHAR_MAX + 1. <dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="bc6126af1d45847bc59afa0aa3216b043a0297603315832ffae9a70c8e2e27e1"></a><!-- doxytag: member="OPTION_HELP" ref="bc6126af1d45847bc59afa0aa3216b043a0297603315832ffae9a70c8e2e27e1" args="" -->OPTION_HELP</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="bc6126af1d45847bc59afa0aa3216b04fe6b54762d8578bdba577d1bb9fee63f"></a><!-- doxytag: member="OPTION_VERSION" ref="bc6126af1d45847bc59afa0aa3216b04fe6b54762d8578bdba577d1bb9fee63f" args="" -->OPTION_VERSION</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="8a56f29c89bdb347000406b5e4a36fa4"></a><!-- doxytag: member="backup/zfsd.c::cleanup_data_structures" ref="8a56f29c89bdb347000406b5e4a36fa4" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cleanup_data_structures           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy data structures. 
</div>
</div><p>
<a class="anchor" name="0dabd02148a561a0bb3437379da3e0ce"></a><!-- doxytag: member="backup/zfsd.c::daemon_mode" ref="0dabd02148a561a0bb3437379da3e0ce" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void daemon_mode           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="41c3e83bacc63f4409e3aa663f1786a0"></a><!-- doxytag: member="backup/zfsd.c::die" ref="41c3e83bacc63f4409e3aa663f1786a0" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ATTRIBUTE_NORETURN die           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Write a message and exit. 
</div>
</div><p>
<a class="anchor" name="7f1626da1fbb5ac3101cee4dc0a0e01c"></a><!-- doxytag: member="backup/zfsd.c::disable_sig_handlers" ref="7f1626da1fbb5ac3101cee4dc0a0e01c" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void disable_sig_handlers           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set default sighandlers. 
</div>
</div><p>
<a class="anchor" name="4f06c61057aa88cf49d406fff77585a7"></a><!-- doxytag: member="backup/zfsd.c::dummy_sighandler" ref="4f06c61057aa88cf49d406fff77585a7" args="(ATTRIBUTE_UNUSED int signum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void dummy_sighandler           </td>
          <td>(</td>
          <td class="paramtype">ATTRIBUTE_UNUSED int&nbsp;</td>
          <td class="paramname"> <em>signum</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Empty signal handler, used to break poll and other syscalls. 
</div>
</div><p>
<a class="anchor" name="f73e76bbdf549448045be811ba64dcfd"></a><!-- doxytag: member="backup/zfsd.c::exit_sighandler" ref="f73e76bbdf549448045be811ba64dcfd" args="(ATTRIBUTE_UNUSED int signum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void exit_sighandler           </td>
          <td>(</td>
          <td class="paramtype">ATTRIBUTE_UNUSED int&nbsp;</td>
          <td class="paramname"> <em>signum</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Signal handler for terminating zfsd. 
</div>
</div><p>
<a class="anchor" name="60e9360d81ba9dae355adad131810a6d"></a><!-- doxytag: member="backup/zfsd.c::fatal_sigaction" ref="60e9360d81ba9dae355adad131810a6d" args="(int signum, siginfo_t *info, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void fatal_sigaction           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>signum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">siginfo_t *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Report the fatal signal. 
</div>
</div><p>
<a class="anchor" name="6154399298dddf458cca9029d21721f2"></a><!-- doxytag: member="backup/zfsd.c::handle_one_argument" ref="6154399298dddf458cca9029d21721f2" args="(ATTRIBUTE_UNUSED void *data, const char *arg, int key, ATTRIBUTE_UNUSED struct fuse_args *outargs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_one_argument           </td>
          <td>(</td>
          <td class="paramtype">ATTRIBUTE_UNUSED void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ATTRIBUTE_UNUSED struct fuse_args *&nbsp;</td>
          <td class="paramname"> <em>outargs</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Process command line arguments. 
</div>
</div><p>
<a class="anchor" name="151c250ce49e5c3c48cf434b10eb35b8"></a><!-- doxytag: member="backup/zfsd.c::hup_sighandler" ref="151c250ce49e5c3c48cf434b10eb35b8" args="(ATTRIBUTE_UNUSED int signum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void hup_sighandler           </td>
          <td>(</td>
          <td class="paramtype">ATTRIBUTE_UNUSED int&nbsp;</td>
          <td class="paramname"> <em>signum</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Signal handler for SIGHUP. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>signum</em>&nbsp;</td><td>Number of the received signal. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="4be48a49b4dbf38e7a4031544ae8d35b"></a><!-- doxytag: member="backup/zfsd.c::init_dbus" ref="4be48a49b4dbf38e7a4031544ae8d35b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_dbus           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="2ee018f90aa74a781d92c53f72bd8350"></a><!-- doxytag: member="backup/zfsd.c::init_sig_handlers" ref="2ee018f90aa74a781d92c53f72bd8350" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void init_sig_handlers           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize signal handlers. 
</div>
</div><p>
<a class="anchor" name="5904b4f16d6ceef0b30cfb8e75c35f50"></a><!-- doxytag: member="backup/zfsd.c::initialize_data_structures" ref="5904b4f16d6ceef0b30cfb8e75c35f50" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool initialize_data_structures           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize various data structures needed by ZFSD. 
</div>
</div><p>
<a class="anchor" name="3c04138a5bfe5d72780bb7e82a18e627"></a><!-- doxytag: member="backup/zfsd.c::main" ref="3c04138a5bfe5d72780bb7e82a18e627" args="(int argc, char **argv)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&nbsp;</td>
          <td class="paramname"> <em>argv</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Entry point of ZFS daemon. 
</div>
</div><p>
<a class="anchor" name="e5a67156b440ec26b6e11d1f11a8213e"></a><!-- doxytag: member="backup/zfsd.c::process_arguments" ref="e5a67156b440ec26b6e11d1f11a8213e" args="(int argc, char **argv)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void process_arguments           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&nbsp;</td>
          <td class="paramname"> <em>argv</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="5354b26c0e92bc241bbaf8daedc5a28c"></a><!-- doxytag: member="backup/zfsd.c::terminate" ref="5354b26c0e92bc241bbaf8daedc5a28c" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void terminate           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Make zfsd to terminate. 
</div>
</div><p>
<a class="anchor" name="e8605e2b78cd4a81b6c6b5c30cb7366a"></a><!-- doxytag: member="backup/zfsd.c::usage" ref="e8605e2b78cd4a81b6c6b5c30cb7366a" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void usage           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Display the usage and arguments. 
</div>
</div><p>
<a class="anchor" name="f15fc3650cb27cda1695b5c27419ce67"></a><!-- doxytag: member="backup/zfsd.c::version" ref="f15fc3650cb27cda1695b5c27419ce67" args="(int exitcode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ATTRIBUTE_NORETURN version           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>exitcode</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Display the version, exit the program with exit code EXITCODE. 
</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="c269be8b91ae4b24df48de5d8ad7e7a7"></a><!-- doxytag: member="backup/zfsd.c::config_file" ref="c269be8b91ae4b24df48de5d8ad7e7a7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="zfsd_8c.html#c269be8b91ae4b24df48de5d8ad7e7a7">config_file</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Name of the configuration file. 
</div>
</div><p>
<a class="anchor" name="e3c6fa7d93df05da04363eac383f264b"></a><!-- doxytag: member="backup/zfsd.c::dbus_provider" ref="e3c6fa7d93df05da04363eac383f264b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdbus__state__holder__def.html">dbus_state_holder_def</a> <a class="el" href="zfsd_8c.html#e3c6fa7d93df05da04363eac383f264b">dbus_provider</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="5f43baaccbe58ded0076720010eab5bd"></a><!-- doxytag: member="backup/zfsd.c::main_options" ref="5f43baaccbe58ded0076720010eab5bd" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct fuse_opt <a class="el" href="zfsd_8c.html#5f43baaccbe58ded0076720010eab5bd">main_options</a>[]<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
  <a class="code" href="backup_2zfsd_8c.html#0e35731059e990ab9b8383ec2f7e185b">ZFS_OPT</a> (<span class="stringliteral">"config=%s"</span>, config, 0),
  <a class="code" href="backup_2zfsd_8c.html#0e35731059e990ab9b8383ec2f7e185b">ZFS_OPT</a> (<span class="stringliteral">"node=%s"</span>, <a class="code" href="structnode__def.html" title="Node description.">node</a>, 0),
  <a class="code" href="backup_2zfsd_8c.html#0e35731059e990ab9b8383ec2f7e185b">ZFS_OPT</a> (<span class="stringliteral">"loglevel=%u"</span>, loglevel, DEFAULT_LOG_LEVEL),

  <a class="code" href="backup_2zfsd_8c.html#0e35731059e990ab9b8383ec2f7e185b">ZFS_OPT</a> (<span class="stringliteral">"versioning"</span>, <a class="code" href="backup_2config_8c.html#9bf49dfe14c6b79d001964cea203e64c">versioning</a>, <span class="keyword">true</span>),
  <a class="code" href="backup_2zfsd_8c.html#0e35731059e990ab9b8383ec2f7e185b">ZFS_OPT</a> (<span class="stringliteral">"verdisplay"</span>, <a class="code" href="backup_2config_8c.html#3b4c427a38f04df445e25e0c85b8f307">verdisplay</a>, <span class="keyword">true</span>),
  <a class="code" href="backup_2zfsd_8c.html#0e35731059e990ab9b8383ec2f7e185b">ZFS_OPT</a> (<span class="stringliteral">"veragemin=%d"</span>, <a class="code" href="backup_2config_8c.html#2d7d7a80b0694f337ab94f96b49924c5">retention_age_min</a>, -1),
  <a class="code" href="backup_2zfsd_8c.html#0e35731059e990ab9b8383ec2f7e185b">ZFS_OPT</a> (<span class="stringliteral">"veragemax=%d"</span>, <a class="code" href="backup_2config_8c.html#67a1e214b95c07b7a7bd645f1391cf29">retention_age_max</a>, -1),
  <a class="code" href="backup_2zfsd_8c.html#0e35731059e990ab9b8383ec2f7e185b">ZFS_OPT</a> (<span class="stringliteral">"vernummin=%d"</span>, <a class="code" href="backup_2config_8c.html#5810add3e4bcfd110153a10bdb556d4a">retention_num_min</a>, -1),
  <a class="code" href="backup_2zfsd_8c.html#0e35731059e990ab9b8383ec2f7e185b">ZFS_OPT</a> (<span class="stringliteral">"vernummax=%d"</span>, <a class="code" href="backup_2config_8c.html#a543eb8d217beae417fb4976484cefd1">retention_num_max</a>, -1),

  FUSE_OPT_KEY (<span class="stringliteral">"--help"</span>, <a class="code" href="backup_2zfsd_8c.html#bc6126af1d45847bc59afa0aa3216b043a0297603315832ffae9a70c8e2e27e1">OPTION_HELP</a>),
  FUSE_OPT_KEY (<span class="stringliteral">"--version"</span>, <a class="code" href="backup_2zfsd_8c.html#bc6126af1d45847bc59afa0aa3216b04fe6b54762d8578bdba577d1bb9fee63f">OPTION_VERSION</a>),
  FUSE_OPT_END
}
</pre></div>
</div>
</div><p>
<a class="anchor" name="5761c2f355ee358ef6f379d658ccb382"></a><!-- doxytag: member="backup/zfsd.c::main_thread" ref="5761c2f355ee358ef6f379d658ccb382" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_t <a class="el" href="zfsd_8h.html#5761c2f355ee358ef6f379d658ccb382">main_thread</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Thread ID of the main thread. 
</div>
</div><p>
<a class="anchor" name="44301d82503c7b500f2e0ac7e80cd617"></a><!-- doxytag: member="backup/zfsd.c::zfsd_state" ref="44301d82503c7b500f2e0ac7e80cd617" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="backup_2dbus-service-descriptors_8h.html#610f467f5548cdf7d2073867ea336e5d">zfsd_state_e</a> <a class="el" href="zfsd_8h.html#44301d82503c7b500f2e0ac7e80cd617">zfsd_state</a> = ZFSD_STATE_STARTING          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Aug 6 00:37:42 2010 for zlomekFS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.2 </small></address>
</body>
</html>
