<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>zlomekFS: volume.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul>
</div>
<div class="nav">
<a class="el" href="dir_21c430ab3b7001ae39034eae6f7edf71.html">zfsd</a></div>
<h1>volume.c File Reference</h1>Volume functions. <a href="#_details">More...</a>
<p>
<code>#include &quot;<a class="el" href="system_8h-source.html">system.h</a>&quot;</code><br>
<code>#include &lt;inttypes.h&gt;</code><br>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &quot;<a class="el" href="pthread-wrapper_8h-source.html">pthread-wrapper.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="fh_8h-source.html">fh.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="hashtab_8h-source.html">hashtab.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="hashfile_8h-source.html">hashfile.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="memory_8h-source.html">memory.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="volume_8h-source.html">volume.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="network_8h-source.html">network.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="metadata_8h-source.html">metadata.h</a>&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#d0186aa4b18b15d7ff5609d6623784b3">HASH_VOLUME_ID</a>(ID)&nbsp;&nbsp;&nbsp;(ID)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#6916004d52858a22d92d88224365ceb0">VOLUME_HASH</a>(V)&nbsp;&nbsp;&nbsp;((V)-&gt;id)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#42aee25b4a624f1e21e3c3f11dd34f69">HASH_VOLUME_NAME</a>(NAME)&nbsp;&nbsp;&nbsp;crc32_buffer ((NAME).str, (NAME).len)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#db9360c37dd4127e52052defdf952ea7">VOLUME_HASH_NAME</a>(V)&nbsp;&nbsp;&nbsp;HASH_VOLUME_NAME ((V)-&gt;name)</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="hashtab_8h.html#fb05a131363b0de134535fc5f7b01dc0">hash_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#17a011cc3f1d5aa4efce97cb82dbf7bb">volume_hash</a> (const void *x)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="hashtab_8h.html#fb05a131363b0de134535fc5f7b01dc0">hash_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#f6e59e344a182f33feccb2d53cc915f3">volume_hash_name</a> (const void *x)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#98998b9291c4b9fa1991d5e16e72ce8b">volume_eq</a> (const void *x, const void *y)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#9a389c6eaba5c1c4db15ef75cd2daabb">volume_eq_name</a> (const void *x, const void *y)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#f44196fe505490754d836a290343758d">volume_lookup</a> (uint32_t id)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#15a420ea311c052c2ff74466f77078c4">volume_lookup_nolock</a> (uint32_t id)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#ad0913dbd2b64fc9c776d79cc730a2ff">volume_lookup_name</a> (<a class="el" href="structstring__def.html">string</a> *name)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#4409ba5284d5b5e8d95834c4f6e00da6">volume_create</a> (uint32_t id)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#75013820f58de099cc90ff9c7964040c">volume_destroy</a> (<a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#dc4b39c1a76f36c1204acb3711fb845d">volume_delete</a> (<a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#9c55277aace6ada1895214c30641f579">volume_set_common_info</a> (<a class="el" href="structvolume__def.html">volume</a> vol, <a class="el" href="structstring__def.html">string</a> *name, <a class="el" href="structstring__def.html">string</a> *mountpoint, <a class="el" href="structnode__def.html">node</a> master)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#05602bea4bbb2a7c7c33aa785d6ceafe">volume_set_common_info_wrapper</a> (<a class="el" href="structvolume__def.html">volume</a> vol, char *name, char *mountpoint, <a class="el" href="structnode__def.html">node</a> master)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#28057b4d94fe9d94733d0bea549835d9">volume_set_local_info</a> (<a class="el" href="structvolume__def.html">volume</a> *volp, <a class="el" href="structstring__def.html">string</a> *local_path, uint64_t size_limit)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#8a10ec910d49b5316d2c5096c27314a6">volume_set_local_info_wrapper</a> (<a class="el" href="structvolume__def.html">volume</a> *volp, char *local_path, uint64_t size_limit)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#b02f6e686967c62c9f3ed4bcb61c36a1">print_volume</a> (FILE *f, <a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#1f36c8e3e91277adee16634051ab7e6c">print_volumes</a> (FILE *f)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#36f9857d096006262cd82840ee1a8108">debug_volume</a> (<a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#411b075894e34132f3580d8753bbcb0a">debug_volumes</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#a1310151f7efc01e28346cc656b5e15f">mark_all_volumes</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#ff14115666f2068fd980be18d391c9dc">delete_dentries_of_marked_volume</a> (<a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#a48cbdbf2ea763c5424a8c10f02ff8dc">delete_dentries_of_marked_volumes</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#00079f80b84474d3b6dc1b2f0ff59803">destroy_marked_volume_1</a> (<a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#fb4196ed458f962b411850e4f26c5aa2">destroy_marked_volume</a> (uint32_t vid)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#20369883caf42604941821cb0568544d">destroy_marked_volumes</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#b30ce0a069c7edf1d2277431c2dc8e19">destroy_all_volumes</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#9314da618430ff531d3d6396007fc167">initialize_volume_c</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#0fcb27c8d16afa1b86ef9f9acbe15df7">cleanup_volume_c</a> (void)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="structhtab__def.html">htab_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#7a55cc4cde3dae9a1428f9f4610667d8">volume_htab</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="structhtab__def.html">htab_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#cdaf67302453c0d371ec78075433fac6">volume_htab_name</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">pthread_mutex_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="volume_8c.html#ab8b51fe27048d972cd06b1dec470875">volume_mutex</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Volume functions. 
<p>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="d0186aa4b18b15d7ff5609d6623784b3"></a><!-- doxytag: member="volume.c::HASH_VOLUME_ID" ref="d0186aa4b18b15d7ff5609d6623784b3" args="(ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HASH_VOLUME_ID          </td>
          <td>(</td>
          <td class="paramtype">ID&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(ID)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Hash function for volume ID ID. 
</div>
</div><p>
<a class="anchor" name="42aee25b4a624f1e21e3c3f11dd34f69"></a><!-- doxytag: member="volume.c::HASH_VOLUME_NAME" ref="42aee25b4a624f1e21e3c3f11dd34f69" args="(NAME)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HASH_VOLUME_NAME          </td>
          <td>(</td>
          <td class="paramtype">NAME&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;crc32_buffer ((NAME).str, (NAME).len)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Hash function for volume name NAME. 
</div>
</div><p>
<a class="anchor" name="6916004d52858a22d92d88224365ceb0"></a><!-- doxytag: member="volume.c::VOLUME_HASH" ref="6916004d52858a22d92d88224365ceb0" args="(V)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VOLUME_HASH          </td>
          <td>(</td>
          <td class="paramtype">V&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;((V)-&gt;id)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Hash function for volume N. 
</div>
</div><p>
<a class="anchor" name="db9360c37dd4127e52052defdf952ea7"></a><!-- doxytag: member="volume.c::VOLUME_HASH_NAME" ref="db9360c37dd4127e52052defdf952ea7" args="(V)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VOLUME_HASH_NAME          </td>
          <td>(</td>
          <td class="paramtype">V&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;HASH_VOLUME_NAME ((V)-&gt;name)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Hash function for volume V. 
</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="0fcb27c8d16afa1b86ef9f9acbe15df7"></a><!-- doxytag: member="volume.c::cleanup_volume_c" ref="0fcb27c8d16afa1b86ef9f9acbe15df7" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cleanup_volume_c           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy data structures in VOLUME.C. 
</div>
</div><p>
<a class="anchor" name="36f9857d096006262cd82840ee1a8108"></a><!-- doxytag: member="volume.c::debug_volume" ref="36f9857d096006262cd82840ee1a8108" args="(volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void debug_volume           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Print the information about volume VOL to STDERR. 
</div>
</div><p>
<a class="anchor" name="411b075894e34132f3580d8753bbcb0a"></a><!-- doxytag: member="volume.c::debug_volumes" ref="411b075894e34132f3580d8753bbcb0a" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void debug_volumes           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Print the information about all volumes to STDERR. 
</div>
</div><p>
<a class="anchor" name="ff14115666f2068fd980be18d391c9dc"></a><!-- doxytag: member="volume.c::delete_dentries_of_marked_volume" ref="ff14115666f2068fd980be18d391c9dc" args="(volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void delete_dentries_of_marked_volume           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Delete all dentries of marked volume and clear local path. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>vol</em>&nbsp;</td><td>Volume on which the dentries will be deleted. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="a48cbdbf2ea763c5424a8c10f02ff8dc"></a><!-- doxytag: member="volume.c::delete_dentries_of_marked_volumes" ref="a48cbdbf2ea763c5424a8c10f02ff8dc" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void delete_dentries_of_marked_volumes           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Delete all dentries of marked volume. 
</div>
</div><p>
<a class="anchor" name="b30ce0a069c7edf1d2277431c2dc8e19"></a><!-- doxytag: member="volume.c::destroy_all_volumes" ref="b30ce0a069c7edf1d2277431c2dc8e19" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void destroy_all_volumes           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Delete all volumes. 
</div>
</div><p>
<a class="anchor" name="fb4196ed458f962b411850e4f26c5aa2"></a><!-- doxytag: member="volume.c::destroy_marked_volume" ref="fb4196ed458f962b411850e4f26c5aa2" args="(uint32_t vid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void destroy_marked_volume           </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>vid</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy volume VID if it is marked. 
</div>
</div><p>
<a class="anchor" name="00079f80b84474d3b6dc1b2f0ff59803"></a><!-- doxytag: member="volume.c::destroy_marked_volume_1" ref="00079f80b84474d3b6dc1b2f0ff59803" args="(volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void destroy_marked_volume_1           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy volume VOL if it is marked. 
</div>
</div><p>
<a class="anchor" name="20369883caf42604941821cb0568544d"></a><!-- doxytag: member="volume.c::destroy_marked_volumes" ref="20369883caf42604941821cb0568544d" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void destroy_marked_volumes           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Delete marked volumes. 
</div>
</div><p>
<a class="anchor" name="9314da618430ff531d3d6396007fc167"></a><!-- doxytag: member="volume.c::initialize_volume_c" ref="9314da618430ff531d3d6396007fc167" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initialize_volume_c           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize data structures in VOLUME.C. 
</div>
</div><p>
<a class="anchor" name="a1310151f7efc01e28346cc656b5e15f"></a><!-- doxytag: member="volume.c::mark_all_volumes" ref="a1310151f7efc01e28346cc656b5e15f" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mark_all_volumes           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Mark all volumes. 
</div>
</div><p>
<a class="anchor" name="b02f6e686967c62c9f3ed4bcb61c36a1"></a><!-- doxytag: member="volume.c::print_volume" ref="b02f6e686967c62c9f3ed4bcb61c36a1" args="(FILE *f, volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void print_volume           </td>
          <td>(</td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Print the information about volume VOL to file F. 
</div>
</div><p>
<a class="anchor" name="1f36c8e3e91277adee16634051ab7e6c"></a><!-- doxytag: member="volume.c::print_volumes" ref="1f36c8e3e91277adee16634051ab7e6c" args="(FILE *f)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void print_volumes           </td>
          <td>(</td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>f</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Print the information about all volumes to file F. 
</div>
</div><p>
<a class="anchor" name="4409ba5284d5b5e8d95834c4f6e00da6"></a><!-- doxytag: member="volume.c::volume_create" ref="4409ba5284d5b5e8d95834c4f6e00da6" args="(uint32_t id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structvolume__def.html">volume</a> volume_create           </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>id</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create volume structure and fill it with information. 
</div>
</div><p>
<a class="anchor" name="dc4b39c1a76f36c1204acb3711fb845d"></a><!-- doxytag: member="volume.c::volume_delete" ref="dc4b39c1a76f36c1204acb3711fb845d" args="(volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void volume_delete           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy volume VOL and free memory associated with it. Destroy dentries while volume_mutex is unlocked. This function expects fh_mutex to be locked. 
</div>
</div><p>
<a class="anchor" name="75013820f58de099cc90ff9c7964040c"></a><!-- doxytag: member="volume.c::volume_destroy" ref="75013820f58de099cc90ff9c7964040c" args="(volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void volume_destroy           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy volume VOL and free memory associated with it. This function expects volume_mutex to be locked. 
</div>
</div><p>
<a class="anchor" name="98998b9291c4b9fa1991d5e16e72ce8b"></a><!-- doxytag: member="volume.c::volume_eq" ref="98998b9291c4b9fa1991d5e16e72ce8b" args="(const void *x, const void *y)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int volume_eq           </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>y</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Compare a volume X with ID *Y. 
</div>
</div><p>
<a class="anchor" name="9a389c6eaba5c1c4db15ef75cd2daabb"></a><!-- doxytag: member="volume.c::volume_eq_name" ref="9a389c6eaba5c1c4db15ef75cd2daabb" args="(const void *x, const void *y)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int volume_eq_name           </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>y</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Compare a volume X with string Y. 
</div>
</div><p>
<a class="anchor" name="17a011cc3f1d5aa4efce97cb82dbf7bb"></a><!-- doxytag: member="volume.c::volume_hash" ref="17a011cc3f1d5aa4efce97cb82dbf7bb" args="(const void *x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="hashtab_8h.html#fb05a131363b0de134535fc5f7b01dc0">hash_t</a> volume_hash           </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>x</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Hash function for volume X, conputed from ID. 
</div>
</div><p>
<a class="anchor" name="f6e59e344a182f33feccb2d53cc915f3"></a><!-- doxytag: member="volume.c::volume_hash_name" ref="f6e59e344a182f33feccb2d53cc915f3" args="(const void *x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="hashtab_8h.html#fb05a131363b0de134535fc5f7b01dc0">hash_t</a> volume_hash_name           </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>x</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Hash function for volume X, conputed from volume name. 
</div>
</div><p>
<a class="anchor" name="f44196fe505490754d836a290343758d"></a><!-- doxytag: member="volume.c::volume_lookup" ref="f44196fe505490754d836a290343758d" args="(uint32_t id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structvolume__def.html">volume</a> volume_lookup           </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>id</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the volume with volume ID == ID. 
</div>
</div><p>
<a class="anchor" name="ad0913dbd2b64fc9c776d79cc730a2ff"></a><!-- doxytag: member="volume.c::volume_lookup_name" ref="ad0913dbd2b64fc9c776d79cc730a2ff" args="(string *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structvolume__def.html">volume</a> volume_lookup_name           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the volume with name == NAME. 
</div>
</div><p>
<a class="anchor" name="15a420ea311c052c2ff74466f77078c4"></a><!-- doxytag: member="volume.c::volume_lookup_nolock" ref="15a420ea311c052c2ff74466f77078c4" args="(uint32_t id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structvolume__def.html">volume</a> volume_lookup_nolock           </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>id</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the volume with volume ID == ID. 
</div>
</div><p>
<a class="anchor" name="9c55277aace6ada1895214c30641f579"></a><!-- doxytag: member="volume.c::volume_set_common_info" ref="9c55277aace6ada1895214c30641f579" args="(volume vol, string *name, string *mountpoint, node master)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void volume_set_common_info           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>mountpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structnode__def.html">node</a>&nbsp;</td>
          <td class="paramname"> <em>master</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the information common for all volume types. 
</div>
</div><p>
<a class="anchor" name="05602bea4bbb2a7c7c33aa785d6ceafe"></a><!-- doxytag: member="volume.c::volume_set_common_info_wrapper" ref="05602bea4bbb2a7c7c33aa785d6ceafe" args="(volume vol, char *name, char *mountpoint, node master)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void volume_set_common_info_wrapper           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>mountpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structnode__def.html">node</a>&nbsp;</td>
          <td class="paramname"> <em>master</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Wrapper for volume_set_common_info. 
</div>
</div><p>
<a class="anchor" name="28057b4d94fe9d94733d0bea549835d9"></a><!-- doxytag: member="volume.c::volume_set_local_info" ref="28057b4d94fe9d94733d0bea549835d9" args="(volume *volp, string *local_path, uint64_t size_limit)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool volume_set_local_info           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a> *&nbsp;</td>
          <td class="paramname"> <em>volp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>local_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>size_limit</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the information for a volume with local copy. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>volp</em>&nbsp;</td><td>Volume. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>local_path</em>&nbsp;</td><td>Local path to the volume. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size_limit</em>&nbsp;</td><td>Size limit for the volume. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="8a10ec910d49b5316d2c5096c27314a6"></a><!-- doxytag: member="volume.c::volume_set_local_info_wrapper" ref="8a10ec910d49b5316d2c5096c27314a6" args="(volume *volp, char *local_path, uint64_t size_limit)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool volume_set_local_info_wrapper           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a> *&nbsp;</td>
          <td class="paramname"> <em>volp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>local_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>size_limit</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the information for a volume with local copy. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>volp</em>&nbsp;</td><td>Volume. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>local_path</em>&nbsp;</td><td>Local path to the volume. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size_limit</em>&nbsp;</td><td>Size limit for the volume. </td></tr>
  </table>
</dl>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="7a55cc4cde3dae9a1428f9f4610667d8"></a><!-- doxytag: member="volume.c::volume_htab" ref="7a55cc4cde3dae9a1428f9f4610667d8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structhtab__def.html">htab_t</a> <a class="el" href="volume_8c.html#7a55cc4cde3dae9a1428f9f4610667d8">volume_htab</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Hash table of volumes, searched by ID. 
</div>
</div><p>
<a class="anchor" name="cdaf67302453c0d371ec78075433fac6"></a><!-- doxytag: member="volume.c::volume_htab_name" ref="cdaf67302453c0d371ec78075433fac6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structhtab__def.html">htab_t</a> <a class="el" href="volume_8c.html#cdaf67302453c0d371ec78075433fac6">volume_htab_name</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Hash table of volumes, searched by NAME. 
</div>
</div><p>
<a class="anchor" name="ab8b51fe27048d972cd06b1dec470875"></a><!-- doxytag: member="volume.c::volume_mutex" ref="ab8b51fe27048d972cd06b1dec470875" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_mutex_t <a class="el" href="volume_8h.html#ab8b51fe27048d972cd06b1dec470875">volume_mutex</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Mutex for table of volumes. 
</div>
</div><p>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Aug 6 00:39:38 2010 for zlomekFS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.2 </small></address>
</body>
</html>
