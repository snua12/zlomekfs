<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>zlomekFS: user-group.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul>
</div>
<div class="nav">
<a class="el" href="dir_21c430ab3b7001ae39034eae6f7edf71.html">zfsd</a></div>
<h1>user-group.h File Reference</h1>User and group functions. <a href="#_details">More...</a>
<p>
<code>#include &quot;<a class="el" href="system_8h-source.html">system.h</a>&quot;</code><br>
<code>#include &lt;inttypes.h&gt;</code><br>
<code>#include &quot;<a class="el" href="hashtab_8h-source.html">hashtab.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="node_8h-source.html">node.h</a>&quot;</code><br>

<p>
<a href="user-group_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structuser__def.html">user_def</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Description of ZFS user.  <a href="structuser__def.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structgroup__def.html">group_def</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Description of ZFS group.  <a href="structgroup__def.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structid__mapping__def.html">id_mapping_def</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Mapping between ZFS user/group ID and node user/group ID.  <a href="structid__mapping__def.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#089b92475ec3e99b6caf78bfcb7704cc">DEFAULT_ZFS_UID</a>&nbsp;&nbsp;&nbsp;((uint32_t) -2)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#ebb9706000e7c7bd77b5d12d150edf58">DEFAULT_ZFS_GID</a>&nbsp;&nbsp;&nbsp;((uint32_t) -2)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#7d0fa13f62551ae7a192ce10793bf4a7">MAP_ID_HASH</a>(UID)&nbsp;&nbsp;&nbsp;(UID)</td></tr>

<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="structuser__def.html">user_def</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#3311441115d290e1dec99ca37b689e1a">user_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Description of ZFS user.  <a href="#3311441115d290e1dec99ca37b689e1a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="structgroup__def.html">group_def</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#fb001401cbcac1f4f9f06bf6b99b87c2">group_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Description of ZFS group.  <a href="#fb001401cbcac1f4f9f06bf6b99b87c2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="structid__mapping__def.html">id_mapping_def</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#472b8607685aca08ff9b37d80b9aa59c">id_mapping</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Mapping between ZFS user/group ID and node user/group ID.  <a href="#472b8607685aca08ff9b37d80b9aa59c"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structuser__def.html">user_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#be03f42a89f5fddc96fdb7cf103ab638">user_create</a> (uint32_t id, <a class="el" href="structstring__def.html">string</a> *name)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#ac3f6646c63673b21d2323b5f415295b">user_destroy</a> (<a class="el" href="structuser__def.html">user_t</a> u)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structgroup__def.html">group_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#c5696a89a5e2054430bc57f79d14c410">group_create</a> (uint32_t id, <a class="el" href="structstring__def.html">string</a> *name)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#a3fc045c6d43b361322f9e23d2c51159">group_destroy</a> (<a class="el" href="structgroup__def.html">group_t</a> g)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="hashtab_8h.html#fb05a131363b0de134535fc5f7b01dc0">hash_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#f27cb9342b9e91436e17754846eed19e">map_id_to_node_hash</a> (const void *x)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="hashtab_8h.html#fb05a131363b0de134535fc5f7b01dc0">hash_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#633f62e731cf196cd1154eed8dbcc1db">map_id_to_zfs_hash</a> (const void *x)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#b8730a606e376705e2329e875c2c2620">map_id_to_node_eq</a> (const void *x, const void *y)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#33f21ddb83fe05b6696d34c6ad562256">map_id_to_zfs_eq</a> (const void *x, const void *y)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structid__mapping__def.html">id_mapping</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#3283841f4f7fa22bdc01b2da55f0a590">user_mapping_create</a> (<a class="el" href="structstring__def.html">string</a> *zfs_user, <a class="el" href="structstring__def.html">string</a> *node_user, <a class="el" href="structnode__def.html">node</a> nod)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#73c565e586e248ef0c088e41035b0844">set_default_user_mapping</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#38272cf870d2033492981658b7658251">user_mapping_destroy_all</a> (<a class="el" href="structnode__def.html">node</a> nod)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structid__mapping__def.html">id_mapping</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#c22c8cb79fafce7a3bcb0cd55735575b">group_mapping_create</a> (<a class="el" href="structstring__def.html">string</a> *zfs_group, <a class="el" href="structstring__def.html">string</a> *node_group, <a class="el" href="structnode__def.html">node</a> nod)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#77c5c8c5a4cc68aa72cc5c2d814182a6">set_default_group_mapping</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#c54d7c71e191973c86f62c88a7f4424c">group_mapping_destroy_all</a> (<a class="el" href="structnode__def.html">node</a> nod)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#79f44396820e5b7e28649e37a636ca19">map_uid_zfs2node</a> (uint32_t uid)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#c840ffedddbba21d866224596e03d966">map_uid_node2zfs</a> (uint32_t uid)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#ad7943bdd007888deea0c21d16a89f48">map_gid_zfs2node</a> (uint32_t gid)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#96013672ab1b8af6b533401cb85262fe">map_gid_node2zfs</a> (uint32_t gid)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#ddedb4c7cf6665d45144661c08e47013">mark_all_users</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#3fb93736aaf61ff78642d98598870508">mark_all_groups</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#6971d062c1a95e7760e41eb6c75ecc2e">mark_user_mapping</a> (<a class="el" href="structnode__def.html">node</a> nod)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#3fefc8ea2b38dc2195aeaab290f17e28">mark_group_mapping</a> (<a class="el" href="structnode__def.html">node</a> nod)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#374b914945c35b41eb486ec9a1c3d86b">destroy_marked_users</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#06eea7495c3e590d2be4720fb39c1a03">destroy_marked_groups</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#441fb4fe532d3095ee7b869fc3ec6712">destroy_marked_user_mapping</a> (<a class="el" href="structnode__def.html">node</a> nod)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#36202217b8205de027fe6fe650f606ba">destroy_marked_group_mapping</a> (<a class="el" href="structnode__def.html">node</a> nod)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#fcbca0e7d23481a8bbc58da5bb9d1fbc">initialize_user_group_c</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#2716e9eeb98779beb4d6ab2dea6a2a5e">cleanup_user_group_c</a> (void)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">pthread_mutex_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#8a5b9fa445930d3304e4885feb3f1b0b">users_groups_mutex</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#b387e7d0f061805752ad6fb24bd1b233">default_node_uid</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user-group_8h.html#66468b54d8cca122bf2bffeb8a0c6952">default_node_gid</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
User and group functions. 
<p>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="ebb9706000e7c7bd77b5d12d150edf58"></a><!-- doxytag: member="user-group.h::DEFAULT_ZFS_GID" ref="ebb9706000e7c7bd77b5d12d150edf58" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_ZFS_GID&nbsp;&nbsp;&nbsp;((uint32_t) -2)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="089b92475ec3e99b6caf78bfcb7704cc"></a><!-- doxytag: member="user-group.h::DEFAULT_ZFS_UID" ref="089b92475ec3e99b6caf78bfcb7704cc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_ZFS_UID&nbsp;&nbsp;&nbsp;((uint32_t) -2)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
ID of default ZFS user/group. 
</div>
</div><p>
<a class="anchor" name="7d0fa13f62551ae7a192ce10793bf4a7"></a><!-- doxytag: member="user-group.h::MAP_ID_HASH" ref="7d0fa13f62551ae7a192ce10793bf4a7" args="(UID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAP_ID_HASH          </td>
          <td>(</td>
          <td class="paramtype">UID&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(UID)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Hash functions for user/group ID mapping. 
</div>
</div><p>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="fb001401cbcac1f4f9f06bf6b99b87c2"></a><!-- doxytag: member="user-group.h::group_t" ref="fb001401cbcac1f4f9f06bf6b99b87c2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structgroup__def.html">group_def</a> * <a class="el" href="structgroup__def.html">group_t</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Description of ZFS group. 
<p>

</div>
</div><p>
<a class="anchor" name="472b8607685aca08ff9b37d80b9aa59c"></a><!-- doxytag: member="user-group.h::id_mapping" ref="472b8607685aca08ff9b37d80b9aa59c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structid__mapping__def.html">id_mapping_def</a> * <a class="el" href="structid__mapping__def.html">id_mapping</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Mapping between ZFS user/group ID and node user/group ID. 
<p>

</div>
</div><p>
<a class="anchor" name="3311441115d290e1dec99ca37b689e1a"></a><!-- doxytag: member="user-group.h::user_t" ref="3311441115d290e1dec99ca37b689e1a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structuser__def.html">user_def</a> * <a class="el" href="structuser__def.html">user_t</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Description of ZFS user. 
<p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="2716e9eeb98779beb4d6ab2dea6a2a5e"></a><!-- doxytag: member="user-group.h::cleanup_user_group_c" ref="2716e9eeb98779beb4d6ab2dea6a2a5e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cleanup_user_group_c           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy data structures in USER-GROUP.C. 
</div>
</div><p>
<a class="anchor" name="36202217b8205de027fe6fe650f606ba"></a><!-- doxytag: member="user-group.h::destroy_marked_group_mapping" ref="36202217b8205de027fe6fe650f606ba" args="(node nod)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void destroy_marked_group_mapping           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnode__def.html">node</a>&nbsp;</td>
          <td class="paramname"> <em>nod</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy marked group mapping. 
</div>
</div><p>
<a class="anchor" name="06eea7495c3e590d2be4720fb39c1a03"></a><!-- doxytag: member="user-group.h::destroy_marked_groups" ref="06eea7495c3e590d2be4720fb39c1a03" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void destroy_marked_groups           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy marked groups. 
</div>
</div><p>
<a class="anchor" name="441fb4fe532d3095ee7b869fc3ec6712"></a><!-- doxytag: member="user-group.h::destroy_marked_user_mapping" ref="441fb4fe532d3095ee7b869fc3ec6712" args="(node nod)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void destroy_marked_user_mapping           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnode__def.html">node</a>&nbsp;</td>
          <td class="paramname"> <em>nod</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy marked user mapping. 
</div>
</div><p>
<a class="anchor" name="374b914945c35b41eb486ec9a1c3d86b"></a><!-- doxytag: member="user-group.h::destroy_marked_users" ref="374b914945c35b41eb486ec9a1c3d86b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void destroy_marked_users           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy marked users. 
</div>
</div><p>
<a class="anchor" name="c5696a89a5e2054430bc57f79d14c410"></a><!-- doxytag: member="user-group.h::group_create" ref="c5696a89a5e2054430bc57f79d14c410" args="(uint32_t id, string *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structgroup__def.html">group_t</a> group_create           </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a group with ID and NAME, its list of users is USER_LIST. 
</div>
</div><p>
<a class="anchor" name="a3fc045c6d43b361322f9e23d2c51159"></a><!-- doxytag: member="user-group.h::group_destroy" ref="a3fc045c6d43b361322f9e23d2c51159" args="(group_t g)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void group_destroy           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgroup__def.html">group_t</a>&nbsp;</td>
          <td class="paramname"> <em>g</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy group G. 
</div>
</div><p>
<a class="anchor" name="c22c8cb79fafce7a3bcb0cd55735575b"></a><!-- doxytag: member="user-group.h::group_mapping_create" ref="c22c8cb79fafce7a3bcb0cd55735575b" args="(string *zfs_group, string *node_group, node nod)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structid__mapping__def.html">id_mapping</a> group_mapping_create           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>zfs_group</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>node_group</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structnode__def.html">node</a>&nbsp;</td>
          <td class="paramname"> <em>nod</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add mapping between ZFS group name ZFS_GROUP and node group name NODE_GROUP for node NOD. If NOD is NULL add it to default mapping. 
</div>
</div><p>
<a class="anchor" name="c54d7c71e191973c86f62c88a7f4424c"></a><!-- doxytag: member="user-group.h::group_mapping_destroy_all" ref="c54d7c71e191973c86f62c88a7f4424c" args="(node nod)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void group_mapping_destroy_all           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnode__def.html">node</a>&nbsp;</td>
          <td class="paramname"> <em>nod</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy all group mappings between ZFS and node NOD. If NOD is NULL destroy default mapping. 
</div>
</div><p>
<a class="anchor" name="fcbca0e7d23481a8bbc58da5bb9d1fbc"></a><!-- doxytag: member="user-group.h::initialize_user_group_c" ref="fcbca0e7d23481a8bbc58da5bb9d1fbc" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initialize_user_group_c           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize data structures in USER-GROUP.C. 
</div>
</div><p>
<a class="anchor" name="96013672ab1b8af6b533401cb85262fe"></a><!-- doxytag: member="user-group.h::map_gid_node2zfs" ref="96013672ab1b8af6b533401cb85262fe" args="(uint32_t gid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t map_gid_node2zfs           </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>gid</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Map (local) node GID to ZFS group ID. 
</div>
</div><p>
<a class="anchor" name="ad7943bdd007888deea0c21d16a89f48"></a><!-- doxytag: member="user-group.h::map_gid_zfs2node" ref="ad7943bdd007888deea0c21d16a89f48" args="(uint32_t gid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t map_gid_zfs2node           </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>gid</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Map ZFS group GID to (local) node group ID. 
</div>
</div><p>
<a class="anchor" name="b8730a606e376705e2329e875c2c2620"></a><!-- doxytag: member="user-group.h::map_id_to_node_eq" ref="b8730a606e376705e2329e875c2c2620" args="(const void *x, const void *y)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int map_id_to_node_eq           </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>y</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Compare ID mapping X with ZFS user/group ID Y. 
</div>
</div><p>
<a class="anchor" name="f27cb9342b9e91436e17754846eed19e"></a><!-- doxytag: member="user-group.h::map_id_to_node_hash" ref="f27cb9342b9e91436e17754846eed19e" args="(const void *x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="hashtab_8h.html#fb05a131363b0de134535fc5f7b01dc0">hash_t</a> map_id_to_node_hash           </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>x</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Hash function for id_mapping, computed from ZFS_ID. 
</div>
</div><p>
<a class="anchor" name="33f21ddb83fe05b6696d34c6ad562256"></a><!-- doxytag: member="user-group.h::map_id_to_zfs_eq" ref="33f21ddb83fe05b6696d34c6ad562256" args="(const void *x, const void *y)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int map_id_to_zfs_eq           </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>y</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Compare ID mapping X with node user/group ID Y. 
</div>
</div><p>
<a class="anchor" name="633f62e731cf196cd1154eed8dbcc1db"></a><!-- doxytag: member="user-group.h::map_id_to_zfs_hash" ref="633f62e731cf196cd1154eed8dbcc1db" args="(const void *x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="hashtab_8h.html#fb05a131363b0de134535fc5f7b01dc0">hash_t</a> map_id_to_zfs_hash           </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>x</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Hash function for id_mapping, computed from NODE_ID. 
</div>
</div><p>
<a class="anchor" name="c840ffedddbba21d866224596e03d966"></a><!-- doxytag: member="user-group.h::map_uid_node2zfs" ref="c840ffedddbba21d866224596e03d966" args="(uint32_t uid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t map_uid_node2zfs           </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>uid</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Map (local) node UID to ZFS user ID. 
</div>
</div><p>
<a class="anchor" name="79f44396820e5b7e28649e37a636ca19"></a><!-- doxytag: member="user-group.h::map_uid_zfs2node" ref="79f44396820e5b7e28649e37a636ca19" args="(uint32_t uid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t map_uid_zfs2node           </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>uid</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Map ZFS user UID to (local) node user ID. 
</div>
</div><p>
<a class="anchor" name="3fb93736aaf61ff78642d98598870508"></a><!-- doxytag: member="user-group.h::mark_all_groups" ref="3fb93736aaf61ff78642d98598870508" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mark_all_groups           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Mark all groups. 
</div>
</div><p>
<a class="anchor" name="ddedb4c7cf6665d45144661c08e47013"></a><!-- doxytag: member="user-group.h::mark_all_users" ref="ddedb4c7cf6665d45144661c08e47013" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mark_all_users           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Mark all users. 
</div>
</div><p>
<a class="anchor" name="3fefc8ea2b38dc2195aeaab290f17e28"></a><!-- doxytag: member="user-group.h::mark_group_mapping" ref="3fefc8ea2b38dc2195aeaab290f17e28" args="(node nod)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mark_group_mapping           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnode__def.html">node</a>&nbsp;</td>
          <td class="paramname"> <em>nod</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Mark group mapping. If NOD is defined mark group mapping for node NOD otherwise mark the global group mapping. 
</div>
</div><p>
<a class="anchor" name="6971d062c1a95e7760e41eb6c75ecc2e"></a><!-- doxytag: member="user-group.h::mark_user_mapping" ref="6971d062c1a95e7760e41eb6c75ecc2e" args="(node nod)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mark_user_mapping           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnode__def.html">node</a>&nbsp;</td>
          <td class="paramname"> <em>nod</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Mark user mapping. If NOD is defined mark user mapping for node NOD otherwise mark the global user mapping. 
</div>
</div><p>
<a class="anchor" name="77c5c8c5a4cc68aa72cc5c2d814182a6"></a><!-- doxytag: member="user-group.h::set_default_group_mapping" ref="77c5c8c5a4cc68aa72cc5c2d814182a6" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_default_group_mapping           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
For each ZFS group try to create mapping "group" &lt;-&gt; "group". 
</div>
</div><p>
<a class="anchor" name="73c565e586e248ef0c088e41035b0844"></a><!-- doxytag: member="user-group.h::set_default_user_mapping" ref="73c565e586e248ef0c088e41035b0844" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_default_user_mapping           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
For each ZFS user try to create mapping "user" &lt;-&gt; "user". 
</div>
</div><p>
<a class="anchor" name="be03f42a89f5fddc96fdb7cf103ab638"></a><!-- doxytag: member="user-group.h::user_create" ref="be03f42a89f5fddc96fdb7cf103ab638" args="(uint32_t id, string *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structuser__def.html">user_t</a> user_create           </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create an user with ID and NAME. 
</div>
</div><p>
<a class="anchor" name="ac3f6646c63673b21d2323b5f415295b"></a><!-- doxytag: member="user-group.h::user_destroy" ref="ac3f6646c63673b21d2323b5f415295b" args="(user_t u)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void user_destroy           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structuser__def.html">user_t</a>&nbsp;</td>
          <td class="paramname"> <em>u</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy user U. 
</div>
</div><p>
<a class="anchor" name="3283841f4f7fa22bdc01b2da55f0a590"></a><!-- doxytag: member="user-group.h::user_mapping_create" ref="3283841f4f7fa22bdc01b2da55f0a590" args="(string *zfs_user, string *node_user, node nod)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structid__mapping__def.html">id_mapping</a> user_mapping_create           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>zfs_user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstring__def.html">string</a> *&nbsp;</td>
          <td class="paramname"> <em>node_user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structnode__def.html">node</a>&nbsp;</td>
          <td class="paramname"> <em>nod</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add mapping between ZFS user name ZFS_USER and node user name NODE_USER for node NOD. If NOD is NULL add it to default mapping. 
</div>
</div><p>
<a class="anchor" name="38272cf870d2033492981658b7658251"></a><!-- doxytag: member="user-group.h::user_mapping_destroy_all" ref="38272cf870d2033492981658b7658251" args="(node nod)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void user_mapping_destroy_all           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnode__def.html">node</a>&nbsp;</td>
          <td class="paramname"> <em>nod</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy all user mappings between ZFS and node NOD. If NOD is NULL destroy default mapping. 
</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="66468b54d8cca122bf2bffeb8a0c6952"></a><!-- doxytag: member="user-group.h::default_node_gid" ref="66468b54d8cca122bf2bffeb8a0c6952" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t <a class="el" href="user-group_8h.html#66468b54d8cca122bf2bffeb8a0c6952">default_node_gid</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="b387e7d0f061805752ad6fb24bd1b233"></a><!-- doxytag: member="user-group.h::default_node_uid" ref="b387e7d0f061805752ad6fb24bd1b233" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t <a class="el" href="user-group_8h.html#b387e7d0f061805752ad6fb24bd1b233">default_node_uid</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
ID of default node user/group. 
</div>
</div><p>
<a class="anchor" name="8a5b9fa445930d3304e4885feb3f1b0b"></a><!-- doxytag: member="user-group.h::users_groups_mutex" ref="8a5b9fa445930d3304e4885feb3f1b0b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_mutex_t <a class="el" href="user-group_8h.html#8a5b9fa445930d3304e4885feb3f1b0b">users_groups_mutex</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Mutex protecting hash tables users_*, groups_*, map_*. 
</div>
</div><p>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Aug 6 00:39:38 2010 for zlomekFS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.2 </small></address>
</body>
</html>
