<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>zlomekFS: network.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul>
</div>
<div class="nav">
<a class="el" href="dir_21c430ab3b7001ae39034eae6f7edf71.html">zfsd</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_ac94841c51e61ddc7acc56e12a771012.html">backup</a></div>
<h1>backup/network.h File Reference</h1>Network thread functions. <a href="#_details">More...</a>
<p>
<code>#include &quot;<a class="el" href="backup_2system_8h-source.html">system.h</a>&quot;</code><br>
<code>#include &lt;inttypes.h&gt;</code><br>
<code>#include &lt;time.h&gt;</code><br>
<code>#include &quot;<a class="el" href="backup_2pthread-wrapper_8h-source.html">pthread-wrapper.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2constant_8h-source.html">constant.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2data-coding_8h-source.html">data-coding.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2hashtab_8h-source.html">hashtab.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2fibheap_8h-source.html">fibheap.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2alloc-pool_8h-source.html">alloc-pool.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2thread_8h-source.html">thread.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2node_8h-source.html">node.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="backup_2volume_8h-source.html">volume.h</a>&quot;</code><br>

<p>
<a href="backup_2network_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfd__data__def.html">fd_data_def</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Data for a file descriptor used to communicate with other nodes or kernel.  <a href="structfd__data__def.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#e523380cb4bc77c8bc4ceaaade9f1d57">WAITING4REPLY_HASH</a>(REQUEST_ID)&nbsp;&nbsp;&nbsp;(REQUEST_ID)</td></tr>

<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef enum <a class="el" href="backup_2network_8h.html#4481de8e88f274684e427cd861960175">connection_status_def</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#2f1ecaedbee3b95d95e6517cf12e6302">connection_status</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef enum <a class="el" href="backup_2network_8h.html#ebd83da79c3086f35cbcf9757981c87c">authentication_status_def</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#868c0a63d9198ca553df6bea18817a82">authentication_status</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="structfd__data__def.html">fd_data_def</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#eb57bce0caa95d85cef4146e631ce5fa">fd_data_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Data for a file descriptor used to communicate with other nodes or kernel.  <a href="#eb57bce0caa95d85cef4146e631ce5fa"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#4481de8e88f274684e427cd861960175">connection_status_def</a> { <br>
&nbsp;&nbsp;<a class="el" href="backup_2network_8h.html#4481de8e88f274684e427cd8619601758ad3970838c849405136a8d52bec70e1">CONNECTION_NONE</a> =  0, 
<a class="el" href="backup_2network_8h.html#4481de8e88f274684e427cd861960175cea519623e2a85915e9b3376c08d107a">CONNECTION_CONNECTING</a>, 
<a class="el" href="backup_2network_8h.html#4481de8e88f274684e427cd8619601752dee7fdb974fb3a008e70d5261fe105a">CONNECTION_ACTIVE</a>, 
<a class="el" href="backup_2network_8h.html#4481de8e88f274684e427cd86196017541a76e61caa362817a7512a064fd832f">CONNECTION_PASSIVE</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="backup_2network_8h.html#4481de8e88f274684e427cd861960175896593e4924cf7134781b415ca1f2952">CONNECTION_ESTABLISHED</a>, 
<a class="el" href="network_8h.html#4481de8e88f274684e427cd8619601758ad3970838c849405136a8d52bec70e1">CONNECTION_NONE</a> =  0, 
<a class="el" href="network_8h.html#4481de8e88f274684e427cd861960175cea519623e2a85915e9b3376c08d107a">CONNECTION_CONNECTING</a>, 
<a class="el" href="network_8h.html#4481de8e88f274684e427cd8619601752dee7fdb974fb3a008e70d5261fe105a">CONNECTION_ACTIVE</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="network_8h.html#4481de8e88f274684e427cd86196017541a76e61caa362817a7512a064fd832f">CONNECTION_PASSIVE</a>, 
<a class="el" href="network_8h.html#4481de8e88f274684e427cd861960175896593e4924cf7134781b415ca1f2952">CONNECTION_ESTABLISHED</a>
<br>
 }</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#ebd83da79c3086f35cbcf9757981c87c">authentication_status_def</a> { <br>
&nbsp;&nbsp;<a class="el" href="backup_2network_8h.html#ebd83da79c3086f35cbcf9757981c87c87d183eebdc21b7ed1701523267cbb40">AUTHENTICATION_NONE</a> =  0, 
<a class="el" href="backup_2network_8h.html#ebd83da79c3086f35cbcf9757981c87c1120976ae35974cc01a7ce4a10015833">AUTHENTICATION_Q1</a>, 
<a class="el" href="backup_2network_8h.html#ebd83da79c3086f35cbcf9757981c87cebc15c7cfffe5352d4db967947a81e67">AUTHENTICATION_STAGE_1</a>, 
<a class="el" href="backup_2network_8h.html#ebd83da79c3086f35cbcf9757981c87c70b2405c64ea5e6efb769b5529d452ed">AUTHENTICATION_Q3</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="backup_2network_8h.html#ebd83da79c3086f35cbcf9757981c87c5ed708456b51f513cefab7e9370716da">AUTHENTICATION_FINISHED</a>, 
<a class="el" href="network_8h.html#ebd83da79c3086f35cbcf9757981c87c87d183eebdc21b7ed1701523267cbb40">AUTHENTICATION_NONE</a> =  0, 
<a class="el" href="network_8h.html#ebd83da79c3086f35cbcf9757981c87c1120976ae35974cc01a7ce4a10015833">AUTHENTICATION_Q1</a>, 
<a class="el" href="network_8h.html#ebd83da79c3086f35cbcf9757981c87cebc15c7cfffe5352d4db967947a81e67">AUTHENTICATION_STAGE_1</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="network_8h.html#ebd83da79c3086f35cbcf9757981c87c70b2405c64ea5e6efb769b5529d452ed">AUTHENTICATION_Q3</a>, 
<a class="el" href="network_8h.html#ebd83da79c3086f35cbcf9757981c87c5ed708456b51f513cefab7e9370716da">AUTHENTICATION_FINISHED</a>
<br>
 }</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="hashtab_8h.html#fb05a131363b0de134535fc5f7b01dc0">hash_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#5dfe1a1b5d917369b28a28a0dc916f5d">waiting4reply_hash</a> (const void *xx)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#b05e13e2874f423b317be094e6b343d4">waiting4reply_eq</a> (const void *xx, const void *yy)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#2066841d370a20b4163bde3d4d5a10c9">update_node_fd</a> (<a class="el" href="structnode__def.html">node</a> nod, int fd, unsigned int generation, bool <a class="el" href="network_8c.html#fc96158f7b62d68f30b14d5bf5e148a9">active</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#d69b54caf868fa84a6a166482f284837">wake_all_threads</a> (<a class="el" href="structfd__data__def.html">fd_data_t</a> *fd_data, int32_t retval)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#01208284c3394d58d268d1394ad3d2a9">close_network_fd</a> (int fd)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#da5d5652301ebe83082f39bcf4b8d9cd">node_has_valid_fd</a> (<a class="el" href="structnode__def.html">node</a> nod)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#a13352611b8d3fccf9947ad576fb6644">node_connected</a> (uint32_t sid, unsigned int *generation)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="zfs-prot_8h.html#9e8c56217c02c355396741e69be2422a">connection_speed</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#ac61b61d470a7a69ee987aee1a9c6c83">volume_master_connected</a> (<a class="el" href="structvolume__def.html">volume</a> vol)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#836f7c0bcb74cfb28215cc8aaae5c834">node_connect_and_authenticate</a> (<a class="el" href="structthread__def.html">thread</a> *t, <a class="el" href="structnode__def.html">node</a> nod, <a class="el" href="network_8h.html#868c0a63d9198ca553df6bea18817a82">authentication_status</a> auth)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#0c932ef2b4e8ba33954e299dfce14003">request_from_this_node</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#744a729c9d088c0f4bb040836386c7ff">recycle_dc_to_fd_data</a> (<a class="el" href="structdata__coding__def.html">DC</a> *dc, <a class="el" href="structfd__data__def.html">fd_data_t</a> *fd_data)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#63114b14f0a64bc57df529157a03ee60">recycle_dc_to_fd</a> (<a class="el" href="structdata__coding__def.html">DC</a> *dc, int fd)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#5dee9a0eba34370db58fc734960eeacc">network_worker_init</a> (struct <a class="el" href="structthread__def.html">thread_def</a> *t)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#57dea47a481fa6a4c660674855d1d032">network_worker_cleanup</a> (void *data)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#14699d17ece2e57470a2600ce6a0d6ae">add_fd_to_active</a> (int fd)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#1247ab9e7b5c25d0cc017eb1312f8031">send_oneway_request</a> (struct <a class="el" href="structthread__def.html">thread_def</a> *t, int fd)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#a6077265b833815bed069b6440c69f0f">send_request</a> (struct <a class="el" href="structthread__def.html">thread_def</a> *t, uint32_t <a class="el" href="zfs-prot_8c.html#2d443c7790532c952661166cf010cb17">request_id</a>, int fd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Helper function for sending request.  <a href="#a6077265b833815bed069b6440c69f0f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#b02056483d16f3d062811f8cb18cce1e">fd_data_init</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize information about networking file descriptors, mutexes and cond vars.  <a href="#b02056483d16f3d062811f8cb18cce1e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#536a6d5f832633f319ae164266c274f1">fd_data_shutdown</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Start networking shutdown.  <a href="#536a6d5f832633f319ae164266c274f1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#1df20200bd3aafee88c381605c59d2f9">fd_data_destroy</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destroy networking and kernel file descriptors, mutexes and cond vars.  <a href="#1df20200bd3aafee88c381605c59d2f9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#ea16bb421494dec59aa58bda38abc7be">network_start</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a listening socket and start the main network thread.  <a href="#ea16bb421494dec59aa58bda38abc7be"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#27e400186e95900585492202f501606a">network_cleanup</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Terminate network threads and destroy data structures.  <a href="#27e400186e95900585492202f501606a"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structthread__pool__def.html">thread_pool</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#5a7fc260cfe02ed0b750942707cf4a85">network_pool</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structfd__data__def.html">fd_data_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#968a4b6f8ee274080b42eae4c1fcfe59">fd_data_a</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#9528d09825e9e042f5444b59106ea84f">pending_slow_reqs_count</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Number of pending slow requests.  <a href="#9528d09825e9e042f5444b59106ea84f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">pthread_mutex_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#59a99d25ba5bffaa1855481f3d561d53">pending_slow_reqs_mutex</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Mutex for <a class="el" href="network_8h.html#1213d448ab03c0805fd259234fd83dc5" title="Condition variable for pending_slow_reqs_count.">pending_slow_reqs_cond</a>.  <a href="#59a99d25ba5bffaa1855481f3d561d53"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">pthread_cond_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="backup_2network_8h.html#1213d448ab03c0805fd259234fd83dc5">pending_slow_reqs_cond</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Condition variable for <a class="el" href="network_8h.html#9528d09825e9e042f5444b59106ea84f" title="Number of pending slow requests.">pending_slow_reqs_count</a>.  <a href="#1213d448ab03c0805fd259234fd83dc5"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Network thread functions. 
<p>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="e523380cb4bc77c8bc4ceaaade9f1d57"></a><!-- doxytag: member="backup/network.h::WAITING4REPLY_HASH" ref="e523380cb4bc77c8bc4ceaaade9f1d57" args="(REQUEST_ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WAITING4REPLY_HASH          </td>
          <td>(</td>
          <td class="paramtype">REQUEST_ID&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;(REQUEST_ID)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Hash function for request ID. 
</div>
</div><p>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="868c0a63d9198ca553df6bea18817a82"></a><!-- doxytag: member="backup/network.h::authentication_status" ref="868c0a63d9198ca553df6bea18817a82" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="backup_2network_8h.html#ebd83da79c3086f35cbcf9757981c87c">authentication_status_def</a>  <a class="el" href="network_8h.html#868c0a63d9198ca553df6bea18817a82">authentication_status</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Status of authentication. 
</div>
</div><p>
<a class="anchor" name="2f1ecaedbee3b95d95e6517cf12e6302"></a><!-- doxytag: member="backup/network.h::connection_status" ref="2f1ecaedbee3b95d95e6517cf12e6302" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="backup_2network_8h.html#4481de8e88f274684e427cd861960175">connection_status_def</a>  <a class="el" href="network_8h.html#2f1ecaedbee3b95d95e6517cf12e6302">connection_status</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Connection status. 
</div>
</div><p>
<a class="anchor" name="eb57bce0caa95d85cef4146e631ce5fa"></a><!-- doxytag: member="backup/network.h::fd_data_t" ref="eb57bce0caa95d85cef4146e631ce5fa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structfd__data__def.html">fd_data_def</a>  <a class="el" href="structfd__data__def.html">fd_data_t</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Data for a file descriptor used to communicate with other nodes or kernel. 
<p>

</div>
</div><p>
<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="ebd83da79c3086f35cbcf9757981c87c"></a><!-- doxytag: member="backup/network.h::authentication_status_def" ref="ebd83da79c3086f35cbcf9757981c87c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="backup_2network_8h.html#ebd83da79c3086f35cbcf9757981c87c">authentication_status_def</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Status of authentication. <dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="ebd83da79c3086f35cbcf9757981c87c87d183eebdc21b7ed1701523267cbb40"></a><!-- doxytag: member="AUTHENTICATION_NONE" ref="ebd83da79c3086f35cbcf9757981c87c87d183eebdc21b7ed1701523267cbb40" args="" -->AUTHENTICATION_NONE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="ebd83da79c3086f35cbcf9757981c87c1120976ae35974cc01a7ce4a10015833"></a><!-- doxytag: member="AUTHENTICATION_Q1" ref="ebd83da79c3086f35cbcf9757981c87c1120976ae35974cc01a7ce4a10015833" args="" -->AUTHENTICATION_Q1</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="ebd83da79c3086f35cbcf9757981c87cebc15c7cfffe5352d4db967947a81e67"></a><!-- doxytag: member="AUTHENTICATION_STAGE_1" ref="ebd83da79c3086f35cbcf9757981c87cebc15c7cfffe5352d4db967947a81e67" args="" -->AUTHENTICATION_STAGE_1</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="ebd83da79c3086f35cbcf9757981c87c70b2405c64ea5e6efb769b5529d452ed"></a><!-- doxytag: member="AUTHENTICATION_Q3" ref="ebd83da79c3086f35cbcf9757981c87c70b2405c64ea5e6efb769b5529d452ed" args="" -->AUTHENTICATION_Q3</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="ebd83da79c3086f35cbcf9757981c87c5ed708456b51f513cefab7e9370716da"></a><!-- doxytag: member="AUTHENTICATION_FINISHED" ref="ebd83da79c3086f35cbcf9757981c87c5ed708456b51f513cefab7e9370716da" args="" -->AUTHENTICATION_FINISHED</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="ebd83da79c3086f35cbcf9757981c87c87d183eebdc21b7ed1701523267cbb40"></a><!-- doxytag: member="AUTHENTICATION_NONE" ref="ebd83da79c3086f35cbcf9757981c87c87d183eebdc21b7ed1701523267cbb40" args="" -->AUTHENTICATION_NONE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="ebd83da79c3086f35cbcf9757981c87c1120976ae35974cc01a7ce4a10015833"></a><!-- doxytag: member="AUTHENTICATION_Q1" ref="ebd83da79c3086f35cbcf9757981c87c1120976ae35974cc01a7ce4a10015833" args="" -->AUTHENTICATION_Q1</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="ebd83da79c3086f35cbcf9757981c87cebc15c7cfffe5352d4db967947a81e67"></a><!-- doxytag: member="AUTHENTICATION_STAGE_1" ref="ebd83da79c3086f35cbcf9757981c87cebc15c7cfffe5352d4db967947a81e67" args="" -->AUTHENTICATION_STAGE_1</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="ebd83da79c3086f35cbcf9757981c87c70b2405c64ea5e6efb769b5529d452ed"></a><!-- doxytag: member="AUTHENTICATION_Q3" ref="ebd83da79c3086f35cbcf9757981c87c70b2405c64ea5e6efb769b5529d452ed" args="" -->AUTHENTICATION_Q3</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="ebd83da79c3086f35cbcf9757981c87c5ed708456b51f513cefab7e9370716da"></a><!-- doxytag: member="AUTHENTICATION_FINISHED" ref="ebd83da79c3086f35cbcf9757981c87c5ed708456b51f513cefab7e9370716da" args="" -->AUTHENTICATION_FINISHED</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

</div>
</div><p>
<a class="anchor" name="4481de8e88f274684e427cd861960175"></a><!-- doxytag: member="backup/network.h::connection_status_def" ref="4481de8e88f274684e427cd861960175" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="backup_2network_8h.html#4481de8e88f274684e427cd861960175">connection_status_def</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Connection status. <dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="4481de8e88f274684e427cd8619601758ad3970838c849405136a8d52bec70e1"></a><!-- doxytag: member="CONNECTION_NONE" ref="4481de8e88f274684e427cd8619601758ad3970838c849405136a8d52bec70e1" args="" -->CONNECTION_NONE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="4481de8e88f274684e427cd861960175cea519623e2a85915e9b3376c08d107a"></a><!-- doxytag: member="CONNECTION_CONNECTING" ref="4481de8e88f274684e427cd861960175cea519623e2a85915e9b3376c08d107a" args="" -->CONNECTION_CONNECTING</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="4481de8e88f274684e427cd8619601752dee7fdb974fb3a008e70d5261fe105a"></a><!-- doxytag: member="CONNECTION_ACTIVE" ref="4481de8e88f274684e427cd8619601752dee7fdb974fb3a008e70d5261fe105a" args="" -->CONNECTION_ACTIVE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="4481de8e88f274684e427cd86196017541a76e61caa362817a7512a064fd832f"></a><!-- doxytag: member="CONNECTION_PASSIVE" ref="4481de8e88f274684e427cd86196017541a76e61caa362817a7512a064fd832f" args="" -->CONNECTION_PASSIVE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="4481de8e88f274684e427cd861960175896593e4924cf7134781b415ca1f2952"></a><!-- doxytag: member="CONNECTION_ESTABLISHED" ref="4481de8e88f274684e427cd861960175896593e4924cf7134781b415ca1f2952" args="" -->CONNECTION_ESTABLISHED</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="4481de8e88f274684e427cd8619601758ad3970838c849405136a8d52bec70e1"></a><!-- doxytag: member="CONNECTION_NONE" ref="4481de8e88f274684e427cd8619601758ad3970838c849405136a8d52bec70e1" args="" -->CONNECTION_NONE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="4481de8e88f274684e427cd861960175cea519623e2a85915e9b3376c08d107a"></a><!-- doxytag: member="CONNECTION_CONNECTING" ref="4481de8e88f274684e427cd861960175cea519623e2a85915e9b3376c08d107a" args="" -->CONNECTION_CONNECTING</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="4481de8e88f274684e427cd8619601752dee7fdb974fb3a008e70d5261fe105a"></a><!-- doxytag: member="CONNECTION_ACTIVE" ref="4481de8e88f274684e427cd8619601752dee7fdb974fb3a008e70d5261fe105a" args="" -->CONNECTION_ACTIVE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="4481de8e88f274684e427cd86196017541a76e61caa362817a7512a064fd832f"></a><!-- doxytag: member="CONNECTION_PASSIVE" ref="4481de8e88f274684e427cd86196017541a76e61caa362817a7512a064fd832f" args="" -->CONNECTION_PASSIVE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="4481de8e88f274684e427cd861960175896593e4924cf7134781b415ca1f2952"></a><!-- doxytag: member="CONNECTION_ESTABLISHED" ref="4481de8e88f274684e427cd861960175896593e4924cf7134781b415ca1f2952" args="" -->CONNECTION_ESTABLISHED</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="14699d17ece2e57470a2600ce6a0d6ae"></a><!-- doxytag: member="backup/network.h::add_fd_to_active" ref="14699d17ece2e57470a2600ce6a0d6ae" args="(int fd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void add_fd_to_active           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>fd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add file descriptor FD to the set of active file descriptors. 
</div>
</div><p>
<a class="anchor" name="01208284c3394d58d268d1394ad3d2a9"></a><!-- doxytag: member="backup/network.h::close_network_fd" ref="01208284c3394d58d268d1394ad3d2a9" args="(int fd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void close_network_fd           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>fd</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Close file descriptor FD and update its fd_data. 
</div>
</div><p>
<a class="anchor" name="1df20200bd3aafee88c381605c59d2f9"></a><!-- doxytag: member="backup/network.h::fd_data_destroy" ref="1df20200bd3aafee88c381605c59d2f9" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fd_data_destroy           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy networking and kernel file descriptors, mutexes and cond vars. 
<p>

</div>
</div><p>
<a class="anchor" name="b02056483d16f3d062811f8cb18cce1e"></a><!-- doxytag: member="backup/network.h::fd_data_init" ref="b02056483d16f3d062811f8cb18cce1e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fd_data_init           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize information about networking file descriptors, mutexes and cond vars. 
<p>

</div>
</div><p>
<a class="anchor" name="536a6d5f832633f319ae164266c274f1"></a><!-- doxytag: member="backup/network.h::fd_data_shutdown" ref="536a6d5f832633f319ae164266c274f1" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fd_data_shutdown           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Start networking shutdown. 
<p>
Wake threads waiting for reply on file descriptors. 
</div>
</div><p>
<a class="anchor" name="27e400186e95900585492202f501606a"></a><!-- doxytag: member="backup/network.h::network_cleanup" ref="27e400186e95900585492202f501606a" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void network_cleanup           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Terminate network threads and destroy data structures. 
<p>

</div>
</div><p>
<a class="anchor" name="ea16bb421494dec59aa58bda38abc7be"></a><!-- doxytag: member="backup/network.h::network_start" ref="ea16bb421494dec59aa58bda38abc7be" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool network_start           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a listening socket and start the main network thread. 
<p>

</div>
</div><p>
<a class="anchor" name="57dea47a481fa6a4c660674855d1d032"></a><!-- doxytag: member="backup/network.h::network_worker_cleanup" ref="57dea47a481fa6a4c660674855d1d032" args="(void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void network_worker_cleanup           </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Cleanup network thread DATA. 
</div>
</div><p>
<a class="anchor" name="5dee9a0eba34370db58fc734960eeacc"></a><!-- doxytag: member="backup/network.h::network_worker_init" ref="5dee9a0eba34370db58fc734960eeacc" args="(struct thread_def *t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void network_worker_init           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structthread__def.html">thread</a> *&nbsp;</td>
          <td class="paramname"> <em>t</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize network thread T. 
</div>
</div><p>
<a class="anchor" name="836f7c0bcb74cfb28215cc8aaae5c834"></a><!-- doxytag: member="backup/network.h::node_connect_and_authenticate" ref="836f7c0bcb74cfb28215cc8aaae5c834" args="(thread *t, node nod, authentication_status auth)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int node_connect_and_authenticate           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structthread__def.html">thread</a> *&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structnode__def.html">node</a>&nbsp;</td>
          <td class="paramname"> <em>nod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="network_8h.html#868c0a63d9198ca553df6bea18817a82">authentication_status</a>&nbsp;</td>
          <td class="paramname"> <em>auth</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Check whether node NOD is connected and authenticated. If not do so. Return open file descriptor and leave its NETWORK_FD_DATA locked. 
</div>
</div><p>
<a class="anchor" name="a13352611b8d3fccf9947ad576fb6644"></a><!-- doxytag: member="backup/network.h::node_connected" ref="a13352611b8d3fccf9947ad576fb6644" args="(uint32_t sid, unsigned int *generation)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool node_connected           </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>sid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&nbsp;</td>
          <td class="paramname"> <em>generation</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
If node SID is connected return true and store generation of file descriptor to GENERATION. Otherwise return false. 
</div>
</div><p>
<a class="anchor" name="da5d5652301ebe83082f39bcf4b8d9cd"></a><!-- doxytag: member="backup/network.h::node_has_valid_fd" ref="da5d5652301ebe83082f39bcf4b8d9cd" args="(node nod)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool node_has_valid_fd           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnode__def.html">node</a>&nbsp;</td>
          <td class="paramname"> <em>nod</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return true if there is a valid file descriptor attached to node NOD and lock NETWORK_FD_DATA[NOD-&gt;FD].MUTEX. This function expects NOD-&gt;MUTEX to be locked. 
</div>
</div><p>
<a class="anchor" name="63114b14f0a64bc57df529157a03ee60"></a><!-- doxytag: member="backup/network.h::recycle_dc_to_fd" ref="63114b14f0a64bc57df529157a03ee60" args="(DC *dc, int fd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void recycle_dc_to_fd           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdata__coding__def.html">DC</a> *&nbsp;</td>
          <td class="paramname"> <em>dc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>fd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Put DC back to data for socket connected to master of volume VOL. 
</div>
</div><p>
<a class="anchor" name="744a729c9d088c0f4bb040836386c7ff"></a><!-- doxytag: member="backup/network.h::recycle_dc_to_fd_data" ref="744a729c9d088c0f4bb040836386c7ff" args="(DC *dc, fd_data_t *fd_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void recycle_dc_to_fd_data           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdata__coding__def.html">DC</a> *&nbsp;</td>
          <td class="paramname"> <em>dc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfd__data__def.html">fd_data_t</a> *&nbsp;</td>
          <td class="paramname"> <em>fd_data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Put DC back to file descriptor data FD_DATA. 
</div>
</div><p>
<a class="anchor" name="0c932ef2b4e8ba33954e299dfce14003"></a><!-- doxytag: member="backup/network.h::request_from_this_node" ref="0c932ef2b4e8ba33954e299dfce14003" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool request_from_this_node           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return true if current request came from this node. 
</div>
</div><p>
<a class="anchor" name="1247ab9e7b5c25d0cc017eb1312f8031"></a><!-- doxytag: member="backup/network.h::send_oneway_request" ref="1247ab9e7b5c25d0cc017eb1312f8031" args="(struct thread_def *t, int fd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void send_oneway_request           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structthread__def.html">thread</a> *&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>fd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Send one-way request with request id REQUEST_ID using data in thread T to connected socket FD. 
</div>
</div><p>
<a class="anchor" name="a6077265b833815bed069b6440c69f0f"></a><!-- doxytag: member="backup/network.h::send_request" ref="a6077265b833815bed069b6440c69f0f" args="(struct thread_def *t, uint32_t request_id, int fd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void send_request           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structthread__def.html">thread</a> *&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>request_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>fd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Helper function for sending request. 
<p>
Send request with request id REQUEST_ID using data in thread T to connected socket FD and wait for reply. It expects fd_data_a[fd].mutex to be locked. Tracks number of slow requests in <a class="el" href="network_8h.html#9528d09825e9e042f5444b59106ea84f" title="Number of pending slow requests.">pending_slow_reqs_count</a> for slowly connected volumes. 
</div>
</div><p>
<a class="anchor" name="2066841d370a20b4163bde3d4d5a10c9"></a><!-- doxytag: member="backup/network.h::update_node_fd" ref="2066841d370a20b4163bde3d4d5a10c9" args="(node nod, int fd, unsigned int generation, bool active)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void update_node_fd           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnode__def.html">node</a>&nbsp;</td>
          <td class="paramname"> <em>nod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>generation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>active_open</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Update file descriptor of node NOD to be FD with generation GENERATION. ACTIVE_OPEN is true when this node is creating the connection. 
</div>
</div><p>
<a class="anchor" name="ac61b61d470a7a69ee987aee1a9c6c83"></a><!-- doxytag: member="backup/network.h::volume_master_connected" ref="ac61b61d470a7a69ee987aee1a9c6c83" args="(volume vol)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="zfs-prot_8h.html#9e8c56217c02c355396741e69be2422a">connection_speed</a> volume_master_connected           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvolume__def.html">volume</a>&nbsp;</td>
          <td class="paramname"> <em>vol</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the speed of connection between current node and master of volume VOL. 
</div>
</div><p>
<a class="anchor" name="b05e13e2874f423b317be094e6b343d4"></a><!-- doxytag: member="backup/network.h::waiting4reply_eq" ref="b05e13e2874f423b317be094e6b343d4" args="(const void *xx, const void *yy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int waiting4reply_eq           </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>xx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>yy</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return true when waiting4reply_data XX is data for request ID *YY. 
</div>
</div><p>
<a class="anchor" name="5dfe1a1b5d917369b28a28a0dc916f5d"></a><!-- doxytag: member="backup/network.h::waiting4reply_hash" ref="5dfe1a1b5d917369b28a28a0dc916f5d" args="(const void *xx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="hashtab_8h.html#fb05a131363b0de134535fc5f7b01dc0">hash_t</a> waiting4reply_hash           </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>xx</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Hash function for waiting4reply_data. 
</div>
</div><p>
<a class="anchor" name="d69b54caf868fa84a6a166482f284837"></a><!-- doxytag: member="backup/network.h::wake_all_threads" ref="d69b54caf868fa84a6a166482f284837" args="(fd_data_t *fd_data, int32_t retval)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void wake_all_threads           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfd__data__def.html">fd_data_t</a> *&nbsp;</td>
          <td class="paramname"> <em>fd_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>retval</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Wake all threads waiting for reply on file descriptor with fd_data FD_DATA and set return value to RETVAL. 
</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="968a4b6f8ee274080b42eae4c1fcfe59"></a><!-- doxytag: member="backup/network.h::fd_data_a" ref="968a4b6f8ee274080b42eae4c1fcfe59" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfd__data__def.html">fd_data_t</a>* <a class="el" href="network_8h.html#968a4b6f8ee274080b42eae4c1fcfe59">fd_data_a</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The array of data for each file descriptor. 
</div>
</div><p>
<a class="anchor" name="5a7fc260cfe02ed0b750942707cf4a85"></a><!-- doxytag: member="backup/network.h::network_pool" ref="5a7fc260cfe02ed0b750942707cf4a85" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structthread__pool__def.html">thread_pool</a> <a class="el" href="network_8h.html#5a7fc260cfe02ed0b750942707cf4a85">network_pool</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Pool of network threads. 
</div>
</div><p>
<a class="anchor" name="1213d448ab03c0805fd259234fd83dc5"></a><!-- doxytag: member="backup/network.h::pending_slow_reqs_cond" ref="1213d448ab03c0805fd259234fd83dc5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_cond_t <a class="el" href="network_8h.html#1213d448ab03c0805fd259234fd83dc5">pending_slow_reqs_cond</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Condition variable for <a class="el" href="network_8h.html#9528d09825e9e042f5444b59106ea84f" title="Number of pending slow requests.">pending_slow_reqs_count</a>. 
<p>
Protected by <a class="el" href="network_8h.html#59a99d25ba5bffaa1855481f3d561d53" title="Mutex for pending_slow_reqs_cond.">pending_slow_reqs_mutex</a> 
</div>
</div><p>
<a class="anchor" name="9528d09825e9e042f5444b59106ea84f"></a><!-- doxytag: member="backup/network.h::pending_slow_reqs_count" ref="9528d09825e9e042f5444b59106ea84f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="network_8h.html#9528d09825e9e042f5444b59106ea84f">pending_slow_reqs_count</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Number of pending slow requests. 
<p>
Total number of RPC requests sent and yet not received from slowly connected nodes.<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="network_8h.html#1213d448ab03c0805fd259234fd83dc5" title="Condition variable for pending_slow_reqs_count.">pending_slow_reqs_cond</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="59a99d25ba5bffaa1855481f3d561d53"></a><!-- doxytag: member="backup/network.h::pending_slow_reqs_mutex" ref="59a99d25ba5bffaa1855481f3d561d53" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_mutex_t <a class="el" href="network_8h.html#59a99d25ba5bffaa1855481f3d561d53">pending_slow_reqs_mutex</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Mutex for <a class="el" href="network_8h.html#1213d448ab03c0805fd259234fd83dc5" title="Condition variable for pending_slow_reqs_count.">pending_slow_reqs_cond</a>. 
<p>

</div>
</div><p>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Aug 6 00:37:41 2010 for zlomekFS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.2 </small></address>
</body>
</html>
